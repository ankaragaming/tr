var answerisnotdefined_message='İşleminize şu anda sistemde bir hata olduğu için devam edemiyorum. Daha sonra benimle tekrar deneyebilirsiniz ya da sizi <strong><a href="https://onlineislemler.turktelekom.com.tr" target="_blank"><span style="color:#16a085">Online İşlemler</span></a></strong> web sitemize yönlendirebilirim.<br /><br />Başka bir konuda sorunuz varsa yanıtlayabilirim.',botlanguage="tr",clients={},CLIENT="turktelekom",CBOT_CUSTOM_CSS_IS_ACTIVE=!0;setTimeout(()=>{var t=minify_css?"cbot-"+CLIENT+"-custom.min":"cbot-"+CLIENT+"-custom",o=(addCssFile(t),setInterval(function(){var e=Array.from(document.styleSheets).some(e=>e.href&&e.href.includes(t));window.jQuery&&e&&(clearInterval(o),clients={opening_delay:0,theme:"modern",title:"",color:"#e4e2e2",title_font_color:"#FFFFFF",welcome_message:"",help_text:'<div class="cbot-component cbot-button-template" style="margin:5px;float:inherit;left: 10px;max-width: 290px;padding: initial;padding-left: 15px;border-bottom-left-radius: 0px;border-top-left-radius: 15px;top:5px;"><p>Dilerseniz <a href="https://www.turktelekom.com.tr/yardim/bireysel-mobil/diger#tab230" rel="noopener" target="_blank"> <strong style="color: #00b0f0;"> Aydınlatma Metnimizi </strong> </a> okuyabilirsiniz.</p></div><div class="cbot-component cbot-button-template" style="margin:5px;float:inherit;left: 10px;max-width: 290px;padding: initial;padding-left: 15px;padding-right: 30px;border-bottom-left-radius: 0px;border-top-left-radius: 15px; top:10px;"><p>Size yardımcı olabileceğim başlıca konular;</p><ul>\t<li onclick="cbotHelpTextToDialog(&quot;Avantajlı teklif&quot;)"><strong style="color: #00b0f0;cursor: pointer;">Avantajlı teklif önerileri</strong> sunabilirim.</li>\t<li onclick="cbotHelpTextToDialog(&quot;Fatura sorgulama&quot;)">\t<p><strong style="color: #00b0f0;cursor: pointer;">Fatura sorgulama ve ödeme işlemlerinizde</strong> yardımcı olabilirim.</p>\t</li>\t<li onclick="cbotHelpTextToDialog(&quot;Yeni ürün başvurusu&quot;)">\t<p><strong style="color: #00b0f0;cursor: pointer;">Yeni ürün başvurusu </strong> için sizi yönlendirebilirim.</p>\t</li>\t<li onclick="cbotHelpTextToDialog(&quot; Taahhüt bitiş tarihi&quot;)">\t<p><strong style="color: #00b0f0;cursor: pointer;">Taahhüt bitiş tarihinizi </strong> söyleyebilirim.</p>\t</li></ul></div>',trigger_messages:["welcome"],icon:"https://www.turktelekom.com.tr/PublishingImages/chatbot/titi-bot-v2.gif",slide_from_left:null,slide_from_right:null,bounce:!0,avatar:"https://bireysel.turktelekom.com.tr/tt-evde-internet/PublishingImages/TiTi_80x80.gif",gtm_id:"GTM-5HWG5C3",popup_is_active:!1,popup_infinite_hold:!1,popup_text:"",popup_background_color:"#ebeef4",popup_text_color:"#002855",widget_urls:[{url:"",delay:0}],file_upload_mimetypes:[],login_token:"rxCbdDMUGtgYMgXIQjJWMDDSc5YJE7Sf",login_url:"https://onlineislemler.turktelekom.com.tr/chatbot-login?tabType=${data.assigned}",user_timeout_minute:"15",user_timeout_notify_second:"120",clear_after_close_bot:{DEFAULT:!1,MOBILE:!1,TEST1:!1,GOOGLERCS:!1,MOIM:!1,WHATSAPPFB:!1},custom_width:"80px",custom_height:"80px",clear_after_close_page:{DEFAULT:!1,MOBILE:!1,TEST1:!1,GOOGLERCS:!1,MOIM:!1,WHATSAPPFB:!1},login_field:"",widget_url_activation:!1,link_list:{DEFAULT:""},remove_clicked_button_family:!0,placeholder_message:"",custom_css_is_active:!0,user_timeout:{DEFAULT:{message:"Sizden bir süredir yanıt alamadığımız için oturumunuz sonlanmıştır. Yardımcı olmamı isterseniz talebinizi tekrarlayabilirsiniz."}},messages_sending_time:{DEFAULT:!1,MOBILE:!1,TEST1:!1,GOOGLERCS:!1,MOIM:!1,WHATSAPPFB:!1},popup_show_time:"5",popup_initial_delay:"",dont_clear_after_another_page:{DEFAULT:!1,MOBILE:!1,TEST1:!1,GOOGLERCS:!1,MOIM:!1,WHATSAPPFB:!1},leave_livechat_after_close_bot:{DEFAULT:!1,MOBILE:!1,TEST1:!1,GOOGLERCS:!1,MOIM:!1,WHATSAPPFB:!1},close_widget_after_leave_livechat:{DEFAULT:!1,MOBILE:!1,TEST1:!1,GOOGLERCS:!1,MOIM:!1,WHATSAPPFB:!1},icon_voice_over:"Türk Telekom’un yapay zeka destekli dijital asistanı TiTi. Türk Telekom ürün ve hizmetleri hakkında sorularınızı yanıtlayabilir, fatura ödeyebilir ve geçmiş/güncel faturalarınız hakkında bilgi verebilir, kalan kullanımlarınızı ya da bakiye bilginizi söyleyebilir, size uygun avantajlı teklifler önerebilir.",disable_user_chat_input_button_component:!1,lottie_icon_activation:!1,lottie_icon_url:"https://assets4.lottiefiles.com/packages/lf20_zyquagfl.json",livechat_timeout:{DEFAULT:{}},feedback:{},stay_open_widget:!1,remotestorage_is_active:!0,refresh_button:!0,chat_avatar:"",chat_agent_avatar:"",custom_css_url:"https://corechatbotai.turktelekom.com.tr/css/cbot-turktelekom-custom.css",bot_name:"Türk Telekom"},document.getElementsByTagName("head")[0],document.createElement("script").type="text/javascript",cbot_init(clients.icon,clients.icon,clients.color+"",clients.title,clients.color+" !important","turktelekom",void 0,clients.opening_delay,clients.welcome_message,clients.help_text,clients.trigger_messages||[],!0,100,1500))},100))},400);var interactive_recommends,ia_display_popup_state,ia_open_widget_state,ia_take_attention_state,ia_take_attention_state_timer,cbot_dynamic_id,agent_name,LIVE_CHAT="true"==(LIVE_CHAT="undefined"),USER_CONTROL_IS_ACTIVE="true"==(USER_CONTROL_IS_ACTIVE="true"),SEND_ENDCHAT=!1,exit_survey_feedback_response_display_time="",rootAddress="https://corechatbotai.turktelekom.com.tr",staticAddress="https://corechatbotai.turktelekom.com.tr",soc_connect="https://core-socketchatbotai.turktelekom.com.tr",is_interactive_response_active=!0,interactive_actions={take_attention:[],open_widget:[],display_popup:[{behaviour:"site_urls",equity:[{display:"https://bireysel.turktelekom.com.tr/ev-telefonu/mevcut-musteri-tarifeleri",value:"https://bireysel.turktelekom.com.tr/ev-telefonu/mevcut-musteri-tarifeleri"}],operator:"equal",popup:{popup_type:"BUTTON",buttons:[{type:"POSTBACK",title:"Teklifleri Göster",payload:"Ev telefonu avantajlı teklifler"}],duration:20,message:"Size özel avantajlı teklifler sunabilirim 👋",proactive_welcome_message:"Merhaba 😊",convert_trigger_message:null,image_url:null,image_payload:null,image_payload_postback:null,opening_delay:2,show_again:null,show_again_time:null,show_again_loop:null,welcome_message_type:null,welcome_message:null,welcome_intent:null,rule_code:"30"},channels:["DEFAULT","MOBILE"]},{behaviour:"site_urls",equity:[{display:"https://bireysel.turktelekom.com.tr/mobil/mevcut-musteri-tarife-ve-paketleri",value:"https://bireysel.turktelekom.com.tr/mobil/mevcut-musteri-tarife-ve-paketleri"}],operator:"equal",popup:{popup_type:"BUTTON",buttons:[{type:"POSTBACK",title:"Teklifleri Göster",payload:"Mobil avantajlı teklifler"}],duration:20,message:"Size özel avantajlı teklifler sunabilirim",proactive_welcome_message:"Merhaba 😊",convert_trigger_message:!1,image_url:null,image_payload:null,image_payload_postback:!1,opening_delay:2,show_again:!1,show_again_time:"",show_again_loop:"",welcome_message_type:null,welcome_message:null,welcome_intent:null,rule_code:"40"},channels:["DEFAULT","MOBILE"]},{behaviour:"site_urls",equity:[{display:"https://bireysel.turktelekom.com.tr/dijital-servisler/dijital-odeme/pokus",value:"https://bireysel.turktelekom.com.tr/dijital-servisler/dijital-odeme/pokus"}],operator:"equal",popup:{popup_type:"BUTTON",buttons:[{type:"POSTBACK",title:"Evet",payload:"Pokus"}],duration:20,message:"Pokus ile ilgili bilgi vermemi ister misiniz?",proactive_welcome_message:"Merhaba 😊",convert_trigger_message:null,image_url:null,image_payload:null,image_payload_postback:null,opening_delay:10,show_again:null,show_again_time:null,show_again_loop:null,welcome_message_type:null,welcome_message:null,welcome_intent:null,rule_code:"4"},channels:["DEFAULT","MOBILE"]},{behaviour:"site_urls",equity:[{display:"https://bireysel.turktelekom.com.tr/evde-internet/mevcut-musteri-kampanyalari",value:"https://bireysel.turktelekom.com.tr/evde-internet/mevcut-musteri-kampanyalari"}],operator:"equal",popup:{popup_type:"BUTTON",buttons:[{type:"POSTBACK",title:"Teklifleri Göster",payload:"Evde internet avantajlı teklifler"}],duration:20,message:"Size özel avantajlı teklifler sunabilirim 👋",proactive_welcome_message:"Merhaba 😊",convert_trigger_message:null,image_url:null,image_payload:null,image_payload_postback:null,opening_delay:5,show_again:null,show_again_time:null,show_again_loop:null,welcome_message_type:null,welcome_message:null,welcome_intent:null,rule_code:"60"},channels:["MOBILE","DEFAULT"]},{behaviour:"site_urls",equity:[{display:"https://bireysel.turktelekom.com.tr/dijital-servisler/dijital-uygulama-ve-platformlar",value:"https://bireysel.turktelekom.com.tr/dijital-servisler/dijital-uygulama-ve-platformlar"}],operator:"equal",popup:{popup_type:"BUTTON",buttons:[{type:"POSTBACK",title:"Evet",payload:"Dijital Servisler"}],duration:20,message:"Dijital uygulama ve platformlarımızı birlikte keşfedelim mi?",proactive_welcome_message:"Merhaba 😊",convert_trigger_message:null,image_url:null,image_payload:null,image_payload_postback:null,opening_delay:10,show_again:null,show_again_time:null,show_again_loop:null,welcome_message_type:null,welcome_message:null,welcome_intent:null,rule_code:"8"},channels:["DEFAULT","MOBILE"]},{behaviour:"site_urls",equity:[{display:"https://bireysel.turktelekom.com.tr/dijital-servisler/dijital-uygulama-ve-platformlar/muud",value:"https://bireysel.turktelekom.com.tr/dijital-servisler/dijital-uygulama-ve-platformlar/muud"}],operator:"equal",popup:{popup_type:"BUTTON",buttons:[{type:"POSTBACK",title:"Keşfet",payload:"Bana şarkı öner"}],duration:20,message:"Muud'u birlikte keşfetmeye ne dersiniz?🎵",proactive_welcome_message:"Merhaba 😊",convert_trigger_message:null,image_url:null,image_payload:null,image_payload_postback:null,opening_delay:10,show_again:null,show_again_time:null,show_again_loop:null,welcome_message_type:null,welcome_message:null,welcome_intent:null,rule_code:"2"},channels:["DEFAULT","MOBILE"]},{behaviour:"site_urls",equity:[{display:"https://bireysel.turktelekom.com.tr/dijital-servisler/dijital-uygulama-ve-platformlar/turk-telekom-e-dergi",value:"https://bireysel.turktelekom.com.tr/dijital-servisler/dijital-uygulama-ve-platformlar/turk-telekom-e-dergi"}],operator:"equal",popup:{popup_type:"BUTTON",buttons:[{type:"POSTBACK",title:"Evet",payload:"e-dergi"}],duration:20,message:"e-dergi ile ilgili sorularınızı yanıtlamamı ister misiniz? 😊 ",proactive_welcome_message:"Merhaba 😊",convert_trigger_message:null,image_url:null,image_payload:null,image_payload_postback:null,opening_delay:10,show_again:null,show_again_time:null,show_again_loop:null,welcome_message_type:null,welcome_message:null,welcome_intent:null,rule_code:"9"},channels:["DEFAULT","MOBILE"]},{behaviour:"site_urls",equity:[{display:"https://www.turktelekom.com.tr/arama",value:"https://www.turktelekom.com.tr/arama"}],operator:"equal",popup:{popup_type:"BUTTON",buttons:[{type:"POSTBACK",title:"Evet",payload:"Evet"}],duration:10,message:"Aradığınızı bulmanıza yardımcı olmamı ister misiniz?",proactive_welcome_message:"Merhaba",convert_trigger_message:null,image_url:null,image_payload:null,image_payload_postback:null,opening_delay:20,show_again:null,show_again_time:null,show_again_loop:null,welcome_message_type:null,welcome_message:null,welcome_intent:null,rule_code:"50"},channels:["DEFAULT","MOBILE"]}],is_active:!0},with_credentials=!0,sendCategory="",conversations=[],emojies=[":)",":-)",":D",":-D",":-(",":()",":(","<3",":>","0_0","0_o","o_o","o_0",":p",";)"],emojiIcons=["😊","😊","😂","😂","😞","😮","😞","❤️","😊","👀","👀","👀","👀","😋","😉"],dialogCloseSurveyShowed=!1,isWidgetOpen=!1,ratingSelector=0,ratingGroup=0,firstLoad=!1,newMsgCount=0,hasSurveyFeedback=!1,sentSurveyFeedback=!1;let voice_bot_is_active=!1,chartjs_is_active=!1;var recognition,recorder,login_user_display_name,startEventTriggerFlag,currentTime,hours,minutes,user_timeout,timeoutNotifySecPeriod=30,cbotShowMessageArea="show",voiceRecordingEnabled=!1,voice_bot_button_option=!1,minify_css=!1,disable_default_font_face=!0,lang_vars={LIVECHAT_CLOSE_MESSAGE:"Görüşme sonlandırıldı.",LIVECHAT_CUSTOMER_CLOSE_MESSAGE:"Görüşme sonlandırdınız."},data_owl=getParameterFromScript("data-owl"),data_owl_margin=getParameterFromScript("data-owl-margin"),cbot_messages_sending_time=!1,stream_response=null,IS_TYPING=!1,bool_attachments=!1,welcomeMessage="",welcomeMessageSent=!1;let previousURL=localStorage.getItem(getDynamicLSName("currentURL")),currentURL=window.location.href;localStorage.setItem(getDynamicLSName("currentURL"),currentURL),disable_default_font_face||(addFontFile("muli/Muli"),addFontFile("muli/Muli-Bold"));var show_more_min_elem_count,max_element_count,triple_button_css="",triple_button_class="",suggestion_button_style="",text_button_class="";const browser_engine=detectBrowser();var livechat_connection_images={},isScrolling=!1;let audioElement=void 0;function addAvatarLetters(e){e=e.toUpperCase().split(" ");0<e.length&&(initials=e[0]?e[0].charAt(0):"?"),$("#cbot-chat").append('<style>.cbot-self::after{background: #763AC7;} .cbot-self:before{content:"'+initials+'"; color: white;}</style>')}function runGAScript(e){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id="+e,document.getElementsByTagName("head")[0].insertBefore(t,document.getElementsByTagName("head")[0].firstChild),window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config",e)}function gtag(){window.dataLayer.push(arguments)}function numberToString(e){return e&&"number"==typeof e?e.toString():e&&null!=e?e:""}function sendUrlsToGA(e){for(var t=((e=numberToString(e))||"").match(/(http[^\s'"]*)/g),o=0;t&&o<t.length;o++)gtag("event","cbot",{event_category:"cbot-link",event_action:t[o],event_label:t[o]})}function clickTheURLs(e){gtag("event","cbot",{event_category:"cbot-link",event_action:"click",event_label:e.getAttribute("href")})}function clickTheUrlsDirect(e){gtag("event","cbot",{event_category:"cbot-link",event_action:"click",event_label:e})}window.dataLayer=window.dataLayer||[],window.addEventListener("load",function(){var e,t;window.jQuery||((e=document.createElement("script")).type="text/javascript",e.src=staticAddress+"/js/jquery-3.7.1.min.js",e.async=!0,document.getElementsByTagName("head")[0].insertBefore(e,document.getElementsByTagName("head")[0].firstChild)),data_owl&&(t=null,t=setInterval(function(){var e;window.$&&(clearInterval(t),(e=document.createElement("script")).type="text/javascript",e.src=staticAddress+"/js/owl.carousel.min.js",e.async=!0,document.getElementsByTagName("head")[0].insertBefore(e,document.getElementsByTagName("head")[0].firstChild))},100))});var userId,cbotSessionId,trigger_messages,surveyTimeout,surveyInterval,lastRequestTime,interval,loginId,focookie,socket,$,data_vip,data_livechat,data_user,data_user_fls,data_function,lottie_icon_activation,lottie,welcomeDoc,data_mobileapp,data_device_model,auth,kvk,FIRST_LIVE_MESSAGE=!1,CHANNEL="WIDGET",trigger_messages_count=0,lastMessageReceiveDate=null,firstMessageSent=!1,sentSurvey=!1,showedSurvey=null,isSurveyShowed=!1,exitSurvey=null,cbot_config={},intents=[],isOpen=!1,ua=navigator.userAgent,iOS=/iPad|iPhone|iPod/.test(ua),iOS11=/OS 11(_[0-3])*/.test(ua),data_script_qs={},queryStringVars={},storageCount=0,cbot_custom_positioning={},data_timeout_popup_active_answered=!1,handlePopupTimeouts=[],login_button_clicked=!1,widget_lang="tr",cbotIsMobile={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)||navigator.userAgent.match(/WPDesktop/i)},any:function(){return cbotIsMobile.Android()||cbotIsMobile.BlackBerry()||cbotIsMobile.iOS()||cbotIsMobile.Opera()||cbotIsMobile.Windows()}};function cbot_init(a,s,i,n,c,r,l,d,e,u,g,p,m,b,t){welcomeMessage=e,clients.remotestorage_is_active&&appendLocalStorageIFrame(rootAddress+"/localstorage?client="+CLIENT,function(){getVarsFromLocalStorageIFrame(r)}),clients.lottie_icon_activation&&loadLottieLibrary(),chatEndNotifier(),interval=setInterval(function(){var e,t,o;(!clients.remotestorage_is_active||!xdLocalStorage.checkIFrameLocalStorage()||5<=storageCount)&&window.jQuery&&("function"!=typeof $&&($=window.jQuery),e=!0,t=checkLastMessageDate(r)&&getFirstMessageSentFLS(r),clients.widget_url_activation&&((o=checkURLs(clients.widget_urls))&&o.url&&o.url.length&&!t?d=o.time||d:t||(e=!1)),clients.chat_avatar_activation&&(o=$('<style nonce="8IBTHwOdqNKAWeKl7plt8g==">.cbot-other:before { content: "";width: 35px;height: 35px;position: absolute;left: 16px;border: 1px solid #DCDCDC;border-radius: 24px;background-image: url(../img/cbot-chat-icon.svg?client='+CLIENT+");background-repeat: no-repeat;background-size: 100% 100%;background-position-x: center;background-position-y: center;} .cbot-chat li {display:flex; padding: 0 20px; position: relative;} .cbot-other .cbot-msg {margin-left: 44px;margin-top: 2px;}</style>"),$("head").append(o),clients.chat_avatar)&&(o=$(`<style nonce="8IBTHwOdqNKAWeKl7plt8g==">.cbot-other:before { content: "";width: 35px;height: 35px;position: absolute;left: 16px;top: 0;border: 1px solid #DCDCDC;border-radius: 24px;display: flex;justify-content: center;align-items: center;background-image: url(${clients.chat_avatar});background-repeat: no-repeat;background-position-x: center;background-position-y: center;}</style>`),$("head").append(o)),e&&init(a,s,i,n,c,r,l,d,welcomeMessage,u,g,p,m,b,t),clearInterval(interval),interval=null)},100)}function init(w,k,T,S,I,e,t,o,C,a,s,i,n,c,r){trigger_messages=s,o=o||0,e&&(CLIENT=e),firstMessageSent=getFirstMessageSentFLS(e),stream_response=clients.stream_response||!1;var l,s=getParameterByName("open"),L=getParameterFromScript("data-open")||getIsWidgetOpenedTLS(),E=getParameterFromScript("data-full-page"),e=getParameterFromScript("data-not-set-cookie-redirect-url"),d=getParameterFromScript("data-cookie-name"),x=(getParameterFromScript("data-banner-img"),getParameterFromScript("data-timeout-popup-active")),N=getParameterFromScript("data-timeout-popup-text"),M=getParameterFromScript("data-timeout-popup-button"),A=getParameterFromScript("data-timeout-popup-button-theme"),O=getParameterFromScript("data-timeout-popup-button-type"),B=getParameterFromScript("data-timeout-popup-button-data"),D=getParameterFromScript("data-timeout-popup-button2"),P=getParameterFromScript("data-timeout-popup-button2-theme"),F=getParameterFromScript("data-timeout-popup-button2-type"),z=getParameterFromScript("data-timeout-popup-button2-data"),R=getParameterFromScript("data-timeout-popup-delay-sec"),u=(data_mobileapp=getParameterFromScript("data-mobileapp"),widget_lang=getParameterFromScript("widget-lang"),x="true"==x,E="true"==E,data_function=getParameterFromScript("data-function"),data_vip=getParameterFromScript("data-vip"),data_livechat=getParameterFromScript("data-livechat"),data_user=getParameterFromScript("data-user"),loginId=getParameterFromScript("data-session"),data_script_qs=getQueryVariable(window.location.href),queryStringVars=getQueryVariable(window.location.href),getParameterFromScript("data-static-url")),G=(clients.notification_sound&&(audioElement=new Audio(rootAddress+"/sounds/cbot_notification.mp3")),data_script_qs&&(data_script_qs["data-user"]&&(data_user=decodeURIComponent(data_script_qs["data-user"])),data_script_qs["data-session"]&&(loginId=decodeURIComponent(data_script_qs["data-session"])),data_script_qs["data-full-page"]&&(E="true"==data_script_qs["data-full-page"]),data_script_qs["data-open"]&&(L="true"==data_script_qs["data-open"]),data_script_qs["data-mobileapp"]&&(data_mobileapp="true"==data_script_qs["data-mobileapp"]),data_script_qs["data-device-model"])&&(data_device_model=decodeURIComponent(data_script_qs["data-device-model"])),window.dataLayer.cbot_message&&(queryStringVars.cbot_message=window.dataLayer.cbot_message,window.dataLayer.cbot_message=null),cbot_dynamic_id=queryStringVars.cbot_dynamic_id||getParameterFromScript("dynamic-id"),L||"true"!=queryStringVars.widget_open||(L=queryStringVars.widget_open),u&&(staticAddress=u),getCustomHeaders(!data_function),hasAttributeOnScript("data-user")?l=setInterval(function(){getParameterFromScript("data-user")&&(data_user=getParameterFromScript("data-user"),clearInterval(l),data_user_fls=getUserInfoFLS(),(!data_user.trim()&&data_user_fls||!data_user_fls&&data_user.trim())&&setSessionIdTLS(null),setUserInfoTLS("successful"))},100):(data_user_fls=getUserInfoFLS(),(!data_user.trim()&&data_user_fls||!data_user_fls&&data_user.trim())&&setSessionIdTLS(null),setUserInfoTLS("successful")),cbot_custom_positioning=getCustomPositionings(),"true"==E&&(E=!0,addCssFile("cbot-fullpage-modern-style")),L=!("true"!=L&&"true"!=s&&!L)&&(isWidgetOpen=!0),data_vip="true"==data_vip,data_livechat="true"==data_livechat,clients.attachments_is_active&&(bool_attachments=!0),d&&(focookie=getCookie(d)),d&&!focookie&&e&&window.location.replace(e),isLive=setIsLive(data_vip||data_livechat),data_owl&&addCssFile("owl.carousel.min"),data_mobileapp&&addCssFile("cbot-mobileapp-modern-style-"+CLIENT,Math.random()),data_vip&&addCssFile("cbot-vip-modern-"+CLIENT,Math.random()),a||"");if(userId=getUserIDFLS(),isLive=getisLiveFLS(),(cbotSessionId=getSessionIdFLS())||setisLiveTLS(isLive=setIsLive(!1)),checkLastMessageDate()||(cbotSessionId=null,setisLiveTLS(isLive=setIsLive(!1)),setSessionIdTLS(cbotSessionId),clearLastMessageSentDateTLS()),getChannelValue(clients.dont_clear_after_another_page,CHANNEL)?getChannelValue(clients.clear_after_close_page,CHANNEL)&&!isLive&&checkPageTransition()?cbotClearUserDialog():getChannelValue(clients.clear_after_close_page,CHANNEL)&&checkPageTransition()&&(closeLivechat(!1),cbotClearUserDialog()):getChannelValue(clients.clear_after_close_page,CHANNEL)&&!isLive?cbotClearUserDialog():getChannelValue(clients.clear_after_close_page,CHANNEL)&&(closeLivechat(!1),cbotClearUserDialog()),getChannelValue(clients.messages_sending_time,CHANNEL)&&(cbot_messages_sending_time=!0),is_interactive_response_active&&(interactive_recommends=interactive_class.recommend(),interactive_class.setStats()),(ia_open_widget_state=interactive_actions_executer.checkOpenWidget())&&(L=!0),ia_display_popup_state=interactive_actions_executer.checkDisplayPopup(),(ia_take_attention_state=interactive_actions_executer.checkTakeAttention()).status&&(ia_take_attention_state.is_executed=!1,ia_take_attention_state_timer=setTimeout(()=>{ia_take_attention_state.is_executed=!0,openAndSendMessage(ia_take_attention_state.trigger_message)},1e3*ia_take_attention_state.delay)),setTimeout(function(){cbot_config={robotImageURL:w,dialogImageURL:k,dialogButtonColor:T,chooseButtonColor:I,dialogTitle:S,client:CLIENT};var e,t,o="display: none;",a="display: block;",s="",i=(clients.custom_width&&clients.custom_height&&(s="; width: "+clients.custom_width+"; height: "+clients.custom_height),cbot_custom_positioning.height&&cbot_custom_positioning.width&&(s="; width: "+cbot_custom_positioning.width+"; height: "+cbot_custom_positioning.height),""),n=(clients.custom_top&&(i="; top: "+clients.custom_top),cbot_custom_positioning.right?i+="; right: "+cbot_custom_positioning.right:!clients.custom_right||clients.slide_from_right||clients.slide_from_left||(i+="; right: "+clients.custom_right),cbot_custom_positioning.bottom?i+="; bottom: "+cbot_custom_positioning.bottom:clients.custom_bottom&&(i+="; bottom: "+clients.custom_bottom),cbot_custom_positioning.left?i+="; left: "+cbot_custom_positioning.left:!clients.custom_left||clients.slide_from_right||clients.slide_from_left||(i+="; left: "+clients.custom_left),""),c=(-1<i.indexOf("left")&&(n="; left: 20px"),-1<i.indexOf("right")&&(n="; right: 20px"),clients.slide_from_left&&(n+="; left: 20px"),""),r=(parseInt((clients.custom_width||"61px").replace(/[^0-9]/g,"")),parseInt((clients.custom_height||"61px").replace(/[^0-9]/g,"")),parseInt((clients.custom_top||"").replace(/[0-9]/g,"")),parseInt((clients.custom_right||"").replace(/[^0-9]/g,""))||0),r=(parseInt((clients.custom_bottom||"20px").replace(/[^0-9]/g,"")),0<(parseInt((clients.custom_left||"").replace(/[^0-9]/g,""))||0)&&!clients.slide_from_right&&!clients.slide_from_left&&(c+="; left: 0px; "),0<r&&!clients.slide_from_right&&!clients.slide_from_left&&(c+="; right: 0px; "),""),l=(clients.bounce&&(r="cbot-bounce"),clients.slide_from_right&&(r="cbot-slide-right"),clients.slide_from_left&&(r="cbot-slide-left"),lottie_icon_activation=clients.lottie_icon_activation||!1,clients.lottie_icon_url||""),d="",s=(d+='<div class="cbot-center-page-popup-overlay"><div class="cbot-center-page-popup-container"><div class="cbot-center-page-popup-header"><div class="cbot-center-page-popup-logo" id="cbot-center-page-popup-logo"></div><div class="cbot-center-page-popup-close" id="cbot-center-page-popup-close"><img src="'+staticAddress+'/img/modern/icons8-close.svg" /></div></div><div class="cbot-center-page-popup-content"></div></div></div><div class="cbot-survey-fadebg"></div><div id="close-scroll" class="cbot-dialog-button-close"></div><div class="cbot-animation-holder '+r+'" style="'+i+'"><div class="cbot-count-badge" id="cbot-count-badge">'+newMsgCount+'</div><div class="cbot-dialog-button-regular cbot-channel-'+CHANNEL.toLowerCase()+'" style="'+(L?o:a)+"background-size: 100% 100%; "+s+'">'+(lottie_icon_activation?'<div id="lottie-animation"></div>':'<img class="cbot-dialog-button-image" src="'+cbot_config.dialogImageURL+'" aria-label= "'+(clients.icon_voice_over||"chatbot icon")+'" alt="cbot_icon"/>')+'<div class="cbot-dialog-end-survey" style="'+n+'"><span>Anketimize katılmak ister misiniz?</span> <a href="#" class="cbot-survey-yes">Evet</a> <a href="#" class="cbot-survey-no">Hayır</a></div></div>',clients.popup_is_active&&(r=clients.popup_text||"Ben kişisel asistanınız "+clients.bot_name+",  size nasıl yardımcı olabilirim?",i=clients.popup_background_color||cbot_config.dialogButtonColor||"#000",s=clients.popup_text_color||cbot_config.title_font_color||"#FFF",e="",clients.slide_from_left&&(e+="; left: 40px; padding-left: 50px;"),d+='<div class="cbot-proactive-rule cbot-dialog-button-help-message popup"style="'+("background: "+i+"; color: "+s+";")+o+c+e+'; width:346px;padding-right: 45px; font-size: 16px;padding-top: 15px; padding-left: 0px; line-height: 1.5; text-align: center; word-break: break-word; overflow-wrap: break-word;"> <p class="cbot-popup-message">'+r+"</p></div>",i=parseInt(1e3*(clients.popup_initial_delay||1)),t=parseInt(1e3*(clients.popup_show_time||4)),setTimeout(()=>{isWidgetOpen||($(".cbot-proactive-rule").not(".popup").css("display","none"),$(".cbot-dialog-button-help-message.popup").css("opacity","0"),$(".cbot-dialog-button-help-message.popup").css("display","flex"),$(".cbot-dialog-button-help-message.popup").stop().animate({opacity:1},400,function(){}),clients.popup_infinite_hold)||setTimeout(()=>{$(".cbot-dialog-button-help-message.popup").stop().animate({opacity:0},400,function(){$(".cbot-dialog-button-help-message.popup").css("display","none")})},t)},i)),ia_display_popup_state&&ia_display_popup_state.res&&(d+=handlePopup(ia_display_popup_state,clients,cbot_config)),x&&(d=d+"<div class='cbot-join-chat-container cbot-proactive-rule'><span class='cbot-join-chat-text'>"+N+"</span>",M&&(d+='<a href="#" class="'+("secondary"==A?"cbot-join-chat-button-secondary":"cbot-join-chat-button-primary")+'" onclick="'+("SENDMESSAGE"==O?"openAndSendMessage('"+B+"')":"HIDE"==O?"hideTimeoutPopup()":"openAndSendMessage()")+'">'+M+"</a>"),D&&(d+='<a href="#" class="'+("secondary"==P?"cbot-join-chat-button-secondary":"cbot-join-chat-button-primary")+'" onclick="'+("SENDMESSAGE"==F?"openAndSendMessage('"+z+"')":"HIDE"==F?"hideTimeoutPopup()":"openAndSendMessage()")+'">'+D+"</a>"),d+="</div>"),d=d+"</div>"+('<div class="cbot-survey-fadebg"></div><div id="cbot-modal" class="cbot-modal"><span class="cbot-modal-close">&times;</span><img class="cbot-modal-content" id="cbot-modal-image"></div ><div class="cbot-dialog" style="'+(L?a:o)+"; "+(data_mobileapp?null:n)+"; "+(data_mobileapp?"width:100%; height:100%;bottom:0;right:0;border-bottom-left-radius:0px; ":"")+'"><div id="cbot-web-area" style="display: none; opacity: 0;"><div class="cbot-web-area-header" style="background: '+T+'"><div class="cbot-web-reload"></div><div class="cbot-web-close"></div></div><div class="cbot-web-area-content"></div></div><div class="cbot-overlay" style="'+(L?a:o)+'display:none;transition:.5s;position:relative;width:100%;height:calc(100% - 67px);position: absolute;z-index: 999;background: rgba(0,0,0,0.5);border-radius:5px;"><div id="cbot-overlay-text" class="cbot-overlay-text cbot-overlay-help-collapse-on" style="overflow: auto;background: rgb(255, 255, 255);bottom: 0px;position: absolute;border-radius: 5px;padding: 20px 20px 10px;width: calc(100% - 40px);margin-top: 0px;margin-bottom: 0px;overflow: hidden;"><div style="background:#fff;height:100%"><h3 style=" width: 240px;height: 17px;color: #3278cd;font-family: \'Metropolis\';font-size: 16px;font-weight: 400;line-height: 17px;letter-spacing: -0.2666666px;padding: 0 0 0 5px;">Bana sorabileceğiniz bazı sorular:</h3><div class="cbot-list-scrollable" style="overflow-y: scroll;overflow-x: hidden;height: calc(91%)!important;display: block;"><ul class="cbot-new-help-sentences" style="list-style: none;padding: 0;margin: 0;height: calc(100% - 1593px);"><li><a href="#">50 TL’den yüksek market harcamalarım</a></li><li><a href="#">Son 6 ayda yaptığımız 100 liradan yüksek benzin harcamalarım</a></li><li><a href="#">Bu yıl yaptığım en yüksek tutarlı restoran harcamamı göster</a></li><li><a href="#">Bu ay yaptığım en pahalı harcama nedir? </a></li><li><a href="#">Kredi kartı borcum var mı?</a></li><li><a href="#">50 TL göndermek istiyorum</a></li><li><a href="#">EFT yapmak istiyorum</a></li><li><a href="#">Kredi başvuru ücretleri</a></li><li><a href="#">Para aktarma ücretleri</a></li><li><a href="#">Kredi kartı başvurusu</a></li></ul></div></div></div></div><div class="cbot-head-cover" style="'+(data_mobileapp?"visibility: hidden; position: absolute; bottom: 0;":a)+'"><div class="cbot-dialog-sozlesme"><div class="cbot-close-icon-new" id="cbot-close-icon-new"  cbot-tooltip="'+(clients.help_text_message||"Küçült")+'"></div><div class="cbot-left-arrow" id="cbot-left-arrow"  cbot-tooltip="'+(clients.help_text_message||"Konuşmaya Dön")+'"></div><div class="info-head" background-repeat: no-repeat;height: 55px;background-size: 15px;background-position: 12px;cursor: pointer;"><span style="font-size: 16px;line-height: 55px;/* padding-left: 49px; */user-select: none;color: '+clients.title_font_color+';text-align: center;width: 100%;display: block;">Bilgilendirme<span></div></div><div class="cbot-dialog-head" style="background: '+T+';">'),E||(d+='<div class="cbot-close-icon-new" id="cbot-close-icon-new" cbot-tooltip="'+(clients.help_text_message||"Küçült")+'"></div>'),d+='<div class="cbot-cog-icon" id="cbot-cog-icon" cbot-tooltip="'+(clients.help_text_message||"Bilgilendirme")+'"></div>',clients.refresh_button&&(d+='<div class="cbot-refresh-button" id="cbot-refresh-button" cbot-tooltip="'+(clients.refresh_button_tooltip_message||"Konuşmayı Yenile")+'"></div>'),d+='<div class="cbot-avatar"><img src="https://bireysel.turktelekom.com.tr/tt-evde-internet/PublishingImages/TiTi_80x80.gif" draggable="false"/><span style="color: '+(clients.title_font_color||"white")+'">'+(cbot_config.dialogTitle||"")+'</span></div></div></div><div class="cbot-help" style="height: 100%;display:none;" id="cbot-help"><div class="cbot-help-text">'+G+'</div></div><div class="cbot-livechat-close">Görüşmeyi sonlandır</div><ul class="notranslate cbot-chat" id="cbot-chat" '+(data_mobileapp?'style="height: calc(100% - 80px);"':"")+'><div class="cbot-survey"><div class="cbot-survey-text">Yapmış olduğunuz görüşmeyi değerlendirebilir misiniz?</div></div></ul> <div class="cbot-dialog-end-timer" style="display:none;"></div><div class="cbot-livechat-end-timer" style="display:none;"></div><div class="ripple_effect" style="display:none;"><div class="cbot-boxContainer"><div class="cbot-box cbot-box1"></div><div class="cbot-box cbot-box2"></div><div class="cbot-box cbot-box3"></div><div class="cbot-box cbot-box4"></div><div class="cbot-box cbot-box5"></div></div></div><form id="cbot-form" action="" onsubmit="return false;">',iOS&&iOS11||(d+='<div class="cbot-send-and-voice-wrapper"><a id="cbot-send-button" class="cbot-send-button" cbot-tooltip="'+(clients.help_text_message||"Gönder")+'" aria-label="Gönder"></a><div id="cbot-voice-area" class="cbot-voice-area"></div></div>'),d=(d=d+('<div class="cbot-form-message-area" id="cbot-form-message-area"><input type="button" class="cbot-send-button-info" style="display:none;" /><textarea class="textarea" autocomplete="off" id="cbot-form-message" type="text" placeholder="'+(clients.placeholder_message||"Mesajınızı buraya yazınız!")+'"></textarea> ')+"<input id='cbot-attachment-file-input' type='file' accept='' hidden/>")+('<div id="cbot-attachment-area" class="cbot-attachment-area" style="display: '+(bool_attachments&&isLive?"block":"none")+'"><div class="cbot-attachment-container"><div class="cbot-attachment-block cbot-attachment-file"><img src="'+staticAddress+'/img/cbot-file-icon.png" /> <span>Dosya</span></div></div></div>')+"</div></form></div>",$("body").append(d),initializeLottieAnimation("lottie-animation",l),L&&dialogOpenFunctions(),$("#cbot-attachment-area").on("click",function(e){sendCustomPostMessage("CBOT_FILE_UPLOAD_BUTTON_CLICKED",{})}).children().on("click","div",function(e){e.stopPropagation()}),fileUploadListener(),$(".cbot-dialog-end-survey").css("background-color",clients.popup_background_color||cbot_config.dialogButtonColor||"#000"),$(".cbot-dialog-end-survey *").css("color",clients.popup_text_color||cbot_config.title_font_color||"#FFF"),$(".cbot-dialog-end-survey").css("border-color",clients.popup_text_color||cbot_config.title_font_color||"#FFF"),$(".cbot-dialog-sozlesme").css("background",T||"rgb(21, 0, 143)"),$(".cbot-dialog-button").animate({right:"+=270"},1e3,function(){}),$(".cbot-okudum-anladim-trigger").on("click",function(){$(".cbot-okudum-anladim-checkbox").attr("checked",!$(".cbot-okudum-anladim-checkbox").attr("checked"))}),$(".cbot-center-page-popup-close").on("click",function(){login_button_clicked&&dialog(userId,"popup_close_message",function(){},"popup_close_message",login_button_clicked=!1),$(".cbot-center-page-popup-close").css("display","none"),$(".cbot-center-page-popup-container").css("height","517px"),window.removeEventListener("message",heightChangeHandler)}),$(".cbot-close-icon-new").on("click",function(){var e=showExitSurvey();e.status||(setIsWidgetOpenedTLS(isWidgetOpen=!1),E||(fadeIn(g),fadeOut(p)),$(".cbot-dialog-button-regular").removeClass("cbot-slide-right"),$(".cbot-dialog-button-regular").removeClass("cbot-slide-left"),clients.slide_from_left&&$(".cbot-dialog-button-regular").css("left","20px"),getChannelValue(clients.leave_livechat_after_close_bot,CHANNEL)&&!e.is_livechat_closed&&closeLivechat(!0),getChannelValue(clients.clear_after_close_bot,CHANNEL)&&(trigger_messages_count=0,sendToEndChat(),reset()))}),$(".cbot-refresh-button").hover(function(){$("head").append("<style>[cbot-tooltip]:before{width:119px; right:-10px;}</style>")},function(){$("head").append("<style>[cbot-tooltip]:before{width:auto; left:auto;}</style>")}),$(".cbot-left-arrow").hover(function(){$("head").append("<style>[cbot-tooltip]:before{right:186px;}</style>")},function(){$("head").append("<style>[cbot-tooltip]:before{width:auto; right:auto;}</style>")}),$(document).on("click",".cbot-generic-v2-show-more",function(){let o=!1,t=$(this);t.parent().parent().parent().addClass("delay"),t.parent().parent().parent().find(".cbot-generic-template-v2-background-holder").addClass("delay"),setTimeout(function(){t.find("i").removeClass("fa-spinner fa-spin").addClass("fa-arrow-circle-down"),data_owl?(e=$(t).attr("id").substring(22),0<carousels[""+$(t).attr("id")].length?(carousels[""+$(t).attr("id")].forEach(e=>{e[0].children[0].attributes.style.nodeValue="opacity: 1; display: block"}),$(`#${e} .cbot-owl-stage-outer .cbot-owl-stage`).append(carousels[""+$(t).attr("id")]),$("#"+e).owlCarousel("destroy"),$(`#${e} .cbot-show-more-container`).remove(),$("#"+e).owlCarousel({loop:!1,nav:!0,items:1,limit:3,startPosition:show_more_min_elem_count,dots:!0,margin:data_owl_margin?parseInt(data_owl_margin):10,stagePadding:30})):$(t).parent().parent().parent().parent().siblings().each((e,t)=>{!o&&$(t).children().hasClass("cbot-show-more-container")&&(o=!0,$(t).children().css("display","block")),o||($(t).children().css("pointer-events","auto"),$(t).children().css("display","block"),$(t).children().css("opacity",1))})):$(t).parent().parent().parent().siblings().each((e,t)=>{!o&&$(t).hasClass("cbot-show-more-container")&&(o=!0,$(t).css("display","block")),o||($(t).css("pointer-events","auto"),$(t).css("display","block"),$(t).css("opacity",1))}),setNavigatorDots(t.parent().parent().parent().parent().parent().siblings("div.cbot-generic-template-v2-navigator-wrapper"));var e=t.parent().parent().parent().parent();t.parent().parent().parent().remove(),cbotSetCarouselv2Width(e)},2e3)}),$(document).on("click",".cbot-generic-template-v2-dropdown-title",function(){$(this).parent().find(".cbot-generic-template-v2-dropdown-info").slideToggle(200),"matrix(-1, -1.22465e-16, 1.22465e-16, -1, 0, 0)"==$(".cbot-generic-template-v2-dropdown-arrow-icon").css("transform")?($(".cbot-generic-template-v2-dropdown-arrow-icon").css("transform","rotate(0deg)"),$(".cbot-generic-template-v2-dropdown-arrow-icon").attr("data-active","true")):($(".cbot-generic-template-v2-dropdown-arrow-icon").css("transform","rotate(-180deg)"),$(".cbot-generic-template-v2-dropdown-arrow-icon").attr("data-active","false"))}),$(document).on("click",".cbot-center-page-popup-close",function(){$(".cbot-center-page-popup-overlay").css("display","none")}),$(document).on("click","#cbot-close-button",function(){isWidgetOpen=!1,$(".cbot-dialog-button").animate({right:"-=270"},1e3,function(){fadeIn(g)})}),$(document).on("click","#cbot-open-button",function(){isWidgetOpen=!0,fadeOut(u),fadeIn(p),setTimeout(function(){var e;m.focus(),scrollChatScreen(1e3),Array.isArray(trigger_messages)&&0<trigger_messages.length&&""!=trigger_messages[0]&&0==trigger_messages_count&&(e=trigger_messages[0].split("#")[1],trigger_messages_count++,sendPost({senderName:"User_"+userId,userId:userId,sessionId:cbotSessionId,message:e,is_triggered:!0,intents:intents,live_chat:isLive,client:cbot_config.client},function(e){$("#cbot-form-message").attr("disabled",!1),$("#cbot-send-button").attr("disabled",!1),$("#cbot-form-message").val("Mesajınızı buraya yazınız!"),$("#cbot-form-message").focus(),$("#cbot-form-message").val(""),e?(intents=e.intents,appendMessageToDialogBox(e.message,"cbot-other",null,{notification:e.speak},function(){setClickEventToInteractiveButtons(e.userId),e.survey&&surveyTrigger(e.survey,e.userId),triggerTimingResponses(e)})):appendMessageToDialogBox("Cihazınız internete bağlı olmadığından işleminizi gerçekleştiremiyorum. İnternete bağlandıktan sonra talebinizi baştan iletebilirsiniz.","cbot-other",null,{notification:"Cihazınız internete bağlı olmadığından işleminizi gerçekleştiremiyorum. İnternete bağlandıktan sonra talebinizi baştan iletebilirsiniz."},funct)}))},200)}),$(document).on("click",".cbot-dropdown-input",function(e){var t=$(this).next();$(t).css("display","block")}),$(document).on("keyup",".cbot-dropdown-input",function(e){document.getElementsByClassName("cbot-dropdown-input")[document.getElementsByClassName("cbot-dropdown-input").length-1];var t,o,a=e.target.value.toUpperCase();for(div=$(e.target).next(),t=$(div).find("button"),o=0;o<t.length;o++)-1<(txtValue=t[o].textContent||t[o].innerText).toUpperCase().indexOf(a)?t[o].style.display="":t[o].style.display="none"}),$(document).on("click",".cbot-combobox",function(e){e=e.target.getAttribute("data-payload");gtag("event","cbot",{event_category:"cbot-button",event_action:"click",event_label:e}),$(".cbot-dropdown-input").attr("disabled","disabled"),$(".cbot-dropdown-input:last").val(e),dialog(userId,e,null,e)}),$(document).click(function(e){"cbot-dropdown-input"!=e.target.className&&"cbot-dropdown-input"!=e.target.className&&$(".cbot-dropdown-content").css("display","none")}),isNaN(parseInt(R))?120:parseInt(R)),u=(setTimeout(function(){isWidgetOpen||$(".cbot-join-chat-container").css("display","block")},1e3*s),$(document).on("click",".cbot-join-chat-container-close",function(){$(".cbot-join-chat-container").css("display","none")}),$(document).on("click",".cbot-join-chat-button-function",function(){$(".cbot-join-chat-container").css("display","none"),dialogButtonRegular()}),$(document).on("click",".cbot-hide-chat-button-function",function(){$(".cbot-join-chat-container").css("display","none")}),$(document).on("click",".cbot-web-close",function(){setTimeout(function(){$(".cbot-web-area-content").html("")},500),$("#cbot-web-area").fadeOut()}),$(document).on("click",".cbot-web-reload",function(){$(".cbot-web-area-content").html($(".cbot-web-area-content").html())}),$(document).on("click",".cbot-dialog-button-regular",dialogButtonRegular),$(document).on("click",".cbot-livechat-close",closeLivechat),$(document).on("click",".cbot-livechat-cancel",cancelLivechat),$(".cbot-dialog-end-survey").click(function(e){e.stopPropagation()}),$(".cbot-survey-yes").on("click",function(){dialogCloseSurveyShowed=!1,dialogButtonRegular(),$(".cbot-dialog-end-survey").fadeOut(),$(".cbot-survey-fadebg").css("display","none")}),$(".cbot-survey-no").on("click",function(){dialogCloseSurveyShowed=!1,$(".cbot-dialog-end-survey").fadeOut(),$(".cbot-survey-fadebg").css("display","none")}),document.getElementsByClassName("cbot-dialog-button")[0]),g=document.getElementsByClassName("cbot-dialog-button-regular")[0],p=document.getElementsByClassName("cbot-dialog")[0],m=(document.getElementsByClassName("cbot-dialog-head")[0],document.getElementsByClassName("cbot-remove")[0],document.getElementById("cbot-form"),document.getElementById("cbot-form-message")),b=(document.getElementsByClassName("cbot-chat")[0],document.getElementById("cbot-help-icon"),document.getElementsByClassName("cbot-triple-dot")[0],document.getElementById("cbot-help")),c=(document.getElementById("cbot-web-area"),document.getElementById("cbot-attachment-area")),_=document.getElementById("cbot-form-message-area");document.getElementById("cbot-send-button");cbotModal=document.getElementById("cbot-modal"),welcomeMessageSent=!!queryStringVars.cbot_message,!queryStringVars.cbot_message&&C&&appendMessageToDialogBox(C,"cbot-other",null,{},function(){}),welcomeMessageSent=!0,$(document).on("click",".cbot-generic-template-v1-dropdown-header",function(){var e=$(this).next();"block"===$(e).css("display")?$(e).css("display","none"):$(e).css("display","block")}),c.onclick=function(e){$("#cbot-attachment-file-input").click()},cbotModalImg=document.getElementById("cbot-modal-image");document.getElementsByClassName("cbot-modal-close")[0].onclick=function(){cbotModal.style.display="none"},$(m).bind("input",function(){$(this).val();var e=$(this).val();e&&0<e.length&&" "!=e?(y(),$(".cbot-send-button").addClass("active"),$(".cbot-form-message-area").addClass("active")):($(".cbot-send-button").removeClass("active"),$(".cbot-form-message-area").removeClass("active"))});var v,f,h=!0;$(".cbot-send-button-info").on("click",function(){$(".cbot-dialog-help-menu-help").fadeOut(),$(".cbot-dialog-help-menu-help").css("display","none"),h?y():($(".cbot-overlay").css("display","block"),$(".cbot-overlay").css("transition","transform 0.3s ease-out"),setTimeout(function(){$(".cbot-overlay").css("background-color","rgba(0,0,0,.5)")},0),$(".cbot-overlay").css("transition",".5s"),$(".cbot-overlay-text").stop().slideDown(500,function(){}),$(".cbot-overlay-text").animate({scrollTop:0},500,function(){}),h=!0)}),$(".cbot-send-button-info").hover(function(){$(".cbot-dialog-help-menu-help").css("opacity","0"),$(".cbot-dialog-help-menu-help").css("display","block"),$(".cbot-dialog-help-menu-help").stop().animate({opacity:1},400,function(){})},function(){$(".cbot-dialog-help-menu-help").stop().animate({opacity:0},400,function(){$(".cbot-dialog-help-menu-help").css("display","none")})}),y(),$(".cbot-overlay").click(function(e){"cbot-overlay"==e.target.className&&y()}),data_device_model&&([v,f]=data_device_model.split("|")),!0!==voice_bot_is_active||v&&f&&iphoneSpeechDisabledDevices.includes(v)&&-1===f.localeCompare("17.7",void 0,{numeric:!0,sensitivity:"base"})?$(".cbot-voice-area").css({display:"none",opacity:"0","pointer-events":"none"}):($(".cbot-form-message-area").css("width","calc(100% - 100px)"),$(".cbot-voice-area").css("display","block"));function y(){$(".cbot-overlay").css("background-color","rgba(0,0,0,0)"),$(".cbot-overlay-text").stop().slideUp(500,function(){$(".cbot-overlay").css("display","none")}),h=!1}$(".cbot-refresh-button").on("click",cbotRefreshChat),$(".cbot-cog-icon").on("click",function(){$(".cbot-dialog-head").fadeOut(),$(".cbot-dialog-sozlesme").fadeIn(),$(b).fadeIn(),$(_).stop().slideUp(),$(".cbot-send-and-voice-wrapper").css("display","none"),sendCustomPostMessage("CBOT_INFO_ICON_CLICKED",{})}),$(".cbot-left-arrow").on("click",function(){$(".cbot-dialog-head").fadeIn(),$(".cbot-dialog-sozlesme").fadeOut(),$(b).fadeOut(),$(_).stop().slideDown(),$(".cbot-send-and-voice-wrapper").css("display","block"),sendCustomPostMessage("CBOT_INFO_BACK_ICON_CLICKED",{})}),voice_bot_button_option&&($(".cbot-dialog-button-regular").on("click",function(){viewVoiceButton()}),$("#cbot-form-message").on("keypress",function(e){13===e.which&&($(".cbot-send-button").css("display","none"),$(".cbot-voice-area").css("display","block"))}),$("#cbot-send-button").on("click",function(){$("#cbot-voice-area").css("display","block"),$("#cbot-send-button").css("display","none")}),$("#cbot-form-message").on("input",function(){var e=$(this).val().trim(),t=$(this).attr("placeholder").trim();0<e.length?($(".cbot-send-button").css("display","block"),$(".cbot-voice-area").css("display","none"),""===(e=$(this).val().trim())&&$(this).val()!==$(this).attr("placeholder")&&$(this).val($(this).attr("currentValue"))):0===(e=e===t?"":e).length&&($(".cbot-send-button").css("display","none"),$(".cbot-voice-area").css("display","block")),bool_attachments&&isLive&&(0===(e=(e=$(this).val().trim())===$(this).attr("placeholder").trim()?"":e).length?toggleAttachmentIcon("block"):toggleAttachmentIcon("none"))})),$(".cbot-dialog-button-help-message").on("click",function(){dialogButtonRegular()}),$(".cbot-new-help-sentences").find("li").each(function(e,t){$(t).click(function(){dialog(userId,$(t).text()),$("#cbot-form-message").attr("disabled",!0),$("#cbot-send-button").attr("disabled",!0),$("#cbot-form-message").val("Yazıyor..."),y()})}),setClickEventToInteractiveButtons(userId),$("#cbot-form-message").mousedown(function(e){"Mesajınızı buraya yazınız!"==$(this).val()&&$(this).val("")}),$("#cbot-chat").mousedown(function(e){""==$("#cbot-form-message").val()&&$("#cbot-form-message").val("Mesajınızı buraya yazınız!")}),$("#cbot-form-message").keypress(function(e){13==e.which&&(soc_typing(!1),e.preventDefault(),""==(e=m.value)||/^\s+$/.test(e)||/Yazıyor\.\.\./i.test(e)?m.value="":(e=cleanTags(e),dialog(userId,e),$("#cbot-form-message").attr("disabled",!0),$("#cbot-send-button").attr("disabled",!0),$("#cbot-form-message").val("Yazıyor...")))}),$("#cbot-form-message").keyup(function(e){0<(m.value||"").length&&" "!=m.value?soc_typing(!0):soc_typing(!1)}),$(document).on("click","#cbot-send-button",function(e){e.preventDefault();e=m.value;""==e||/^\s+$/.test(e)||/Yazıyor\.\.\./i.test(e)?m.value="":(e=cleanTags(e),dialog(userId,e),$("#cbot-form-message").attr("disabled",!0),$("#cbot-send-button").attr("disabled",!0),$("#cbot-form-message").val("Yazıyor..."))}),sendCustomPostMessage("CBOT_WIDGET_INITIALIZED",{})},1e3*o),data_mobileapp)try{for(var g in document.styleSheets){var p=document.styleSheets[g];if(p.rules)for(var m=p.rules.length-1;0<=m;m--)p.rules[m].selectorText&&p.rules[m].selectorText.match(":hover")&&p.deleteRule(m)}}catch(e){}}function sendCustomEvent(e){e=new CustomEvent("CBOT_EVENT",{detail:e});window.dispatchEvent(e)}function dialogButtonRegular(e){hideTimeoutPopup();var t=document.getElementsByClassName("cbot-dialog-button-regular")[0],o=document.getElementsByClassName("cbot-dialog")[0];!welcomeMessageSent&&getChannelValue(clients.clear_after_close_bot,CHANNEL)&&(welcomeMessage&&appendMessageToDialogBox(welcomeMessage,"cbot-other",null,{},function(){}),sendTriggerMessages(trigger_messages)),$(".cbot-survey-fadebg").css("display","none"),setIsWidgetOpenedTLS(isWidgetOpen=!0),toggleBadge(newMsgCount=0),$(".cbot-dialog-end-survey").hide();try{$(".modal.fade.ec-modal.in").css("display","none"),$(".modal.fade.ec-modal.in").find(".close").click()}catch(e){console.log(e)}fadeOut(t),fadeIn(o),runGAScript("GTM-5HWG5C3"),$(".cbot-dialog-button-help-message").fadeOut(),dialogOpenFunctions(e),scrollChatScreen(1e3)}function dialogOpenFunctions(e){var t,o;function a(e){getConversations(()=>{browserNotifications(),firstLoad=!0,0==conversations.length?ia_take_attention_state.is_executed||sendTriggerMessages(trigger_messages):writeConversations(),isLive&&(toggleCloseChatButton("block"),cancelLivechat("successful")),$("#cbot-form-message").attr("disabled",!1),$("#cbot-send-button").attr("disabled",!1),$("#cbot-form-message").val("Mesajınızı buraya yazınız!"),$("#cbot-form-message").focus(),$("#cbot-form-message").val(""),disablePostbackButtonsInHistory(),handleMessageArea(),$(".cbot-dropdown-input").attr("disabled","disabled"),scrollChatScreen(1e3)},e)}ia_take_attention_state_timer&&clearTimeout(ia_take_attention_state_timer),$(".cbot-dialog-button-help-message").css("display","none"),viewVoiceButton(),window.SpeechRecognition||window.webkitSpeechRecognition?initRecording():voice_bot_button_option||($("#cbot-voice-area").css("display","none"),$(".cbot-form-message-area").css("width","calc(100% - 66px)")),firstLoad?triggerFunction():(LIVE_CHAT&&((t=document.createElement("script")).type="text/javascript",t.src=staticAddress+"/js/socket.io.js",document.getElementsByTagName("head")[0].insertBefore(t,document.getElementsByTagName("head")[0].firstChild),o=setInterval(function(){window.io&&userId&&cbotSessionId&&((socket=io.connect(soc_connect,{transports:["websocket"],secure:!0,upgrade:!1,auth:{session_id:cbotSessionId,user_id:userId}})).on("connect",function(){sendCustomPostMessage("CBOT_WEBSOCKET_CONNECTED",{});var e=setInterval(function(){userId&&(socket.emit("new_client",{userId:userId,sessionId:cbotSessionId}),clearInterval(e))},500)}),socket_connection_widget(),socket_agent_read_message(),soc_cli_data(),soc_survey(),soc_stop(),soc_client_typing(),socket_alert(),socket_delete_message(),soc_transfer_agent(),soc_error(),clearInterval(o))},1e3)),$("#cbot-form-message").attr("disabled",!0),data_function?triggerFunction(function(e){a()}):a(e)),"Edge"==browser_engine&&$("#cbot-voice-area").css("display","none")}function triggerFunction(t){data_function&&"function"==typeof window[data_function]&&data_function&&"function"==typeof window[data_function]&&window[data_function](function(e){e.headers&&(data_script_qs=e.headers),getCustomHeaders(!0),t(e)})}function delay(o,a){var s=0;return function(){var e=this,t=arguments;clearTimeout(s),s=setTimeout(function(){o.apply(e,t)},a||0)}}function setClickEventToInteractiveButtons(i){for(var e,t=document.getElementsByClassName("postback"),o=0;o<t.length;o++)(e=t[o]).onclick=function(e){e.preventDefault(),$("#cbot-form-message").attr("disabled",!0),$("#cbot-send-button").attr("disabled",!0),$("#cbot-form-message").val("Yazıyor...");var t=e.target,o=document.getElementsByClassName("postback"),e=t.getAttribute("data-payload"),a=t.getAttribute("data-full-action");clients.remove_clicked_button_family&&t.parentElement.parentElement&&!t.parentElement.parentElement.className.includes("cbot-survey-type")?t.parentElement.remove():setClickEventToSurveyButtons(t),gtag("event","cbot",{event_category:"cbot-button",event_action:"click",event_label:e}),$(".cbot-dropdown-input").attr("disabled","disabled"),$(".cbot-rating-group").addClass("cbot-rating-disabled"),$(".cbot-colorful-radio-main-container").addClass("cbot-rating-disabled"),$(".cbot-survey-type > .cbot-buttons").addClass("cbot-buttons-disabled"),$(".cbot-survey-type > .cbot-buttons").find(`a[data-payload="${e}"]`).addClass("checked-rate-"+e),"cbot-generic-template-v2-dropdown-right-area"==t.parentNode.className?dialog(i,t.parentElement.innerText||t.innerText||e,null,e,null,a):dialog(i,t.innerText||e,null,e,!t.className.includes("cbot-rating-label")&&t.parentElement.parentElement&&!t.parentElement.parentElement.className.includes("cbot-survey-type"),a);for(var s=0;s<o.length;s++)(t=o[s]).disabled=!0};for(t=document.getElementsByClassName("fileupload"),o=0;o<t.length;o++)fileUploadListener((e=t[o]).attributes["data-payload"].nodeValue),e.onclick=function(e){e=e.target.getAttribute("data-payload");$("#cbot-attachment-file-input-"+e).click()}}function setClickEventToSurveyButtons(e){e.classList.add("active");for(var t=e.parentNode.getElementsByClassName("cbot-button"),o=0;o<t.length;o++)t[o]!==e&&t[o].classList.add("disabled")}function setClickEventToFeedbackButtons(l){var e=$(".cbot-feedback-id-"+l);$(e).each(function(e,c){var r=$(c).find(".cbot-feedback-vote-button");$(r).each(function(e,n){$(n).on("click",function(e){$(r).each(function(e,t){});var t,o,a,s=c.querySelector(".cbot-feedback-status");function i(e){$(o).prop("disabled",!0),$(t).prop("disabled",!0),sendFeedbackPost({unique_id:l,user_comment:t.val()},function(){$(c).find(".cbot-feedback-status-form").text(clients.feedback.form_success_message),clients.feedback.hide_form_after_user_sent_feedback&&setTimeout(function(){fadeOut(a),setTimeout(()=>{$(o).prop("disabled",!1),$(t).prop("disabled",!1)},1e3)},clients.feedback.hide_form_after_user_sent_feedback_timeout||1e3)})}$(n).siblings("button.cbot-feedback-vote-button").eq(0).removeClass("cbot-vote-selected"),$(n).hasClass("cbot-vote-up-selectable")&&!$(n).hasClass("cbot-vote-selected")?($(n).addClass("cbot-vote-selected"),sendFeedbackPost({unique_id:l,feedback_like:"Positive"},function(){clients.feedback.show_vote_result_message&&($(s).text(clients.feedback.vote_up_message),clients.feedback.hide_after_user_sent_vote)&&setTimeout(function(){fadeOut(s)},clients.feedback.hide_after_user_sent_vote_timeout||1e3)})):$(n).hasClass("cbot-vote-up-selectable")&&$(n).hasClass("cbot-vote-selected")&&($(n).removeClass("cbot-vote-selected"),sendFeedbackPost({unique_id:l,feedback_like:""},function(){})),$(n).hasClass("cbot-vote-down-selectable")&&!$(n).hasClass("cbot-vote-selected")?($(n).addClass("cbot-vote-selected"),sendFeedbackPost({unique_id:l,feedback_like:"Negative"},function(){clients.feedback.show_vote_result_message&&($(s).text(clients.feedback.vote_down_message),clients.feedback.hide_after_user_sent_vote)&&setTimeout(function(){fadeOut(s)},clients.feedback.hide_after_user_sent_vote_timeout||1e3)})):$(n).hasClass("cbot-vote-down-selectable")&&$(n).hasClass("cbot-vote-selected")&&($(n).removeClass("cbot-vote-selected"),sendFeedbackPost({unique_id:l,feedback_like:""},function(){})),clients.feedback.positive_comment_is_active&&$(n).hasClass("cbot-vote-up-selectable")||clients.feedback.negative_comment_is_active&&$(n).hasClass("cbot-vote-down-selectable")?(fadeIn(a=c.querySelector(".cbot-feedback-comment-area")),t=$(c).find(".cbot-feedback-textarea"),o=$(c).find(".cbot-feedback-form-send"),$(t).keypress(function(e){13==e.which&&i()}),$(o).on("click",i)):fadeOut(a=c.querySelector(".cbot-feedback-comment-area"))})})})}function addFontFile(e,t){var o=document.createElement("link");o.type="font/woff2",o.rel="preload",o.as="font",o.crossOrigin="anonymous",o.href=staticAddress+"/fonts/"+e+".woff2"+(t?"?v="+t:""),document.getElementsByTagName("head")[0].appendChild(o)}function addFontFileTTF(e,t){var o=document.createElement("link");o.type="font/ttf",o.rel="preload",o.as="font",o.crossOrigin="anonymous",o.href=staticAddress+"/fonts/"+e+".ttf"+(t?"?v="+t:""),document.getElementsByTagName("head")[0].appendChild(o)}function addCssFile(e,t){var o=document.createElement("link"),o=(o.type="text/css",o.rel="preload",o.as="style",o.href=staticAddress+"/css/"+e+".css"+(t?"?v="+t:""),document.getElementsByTagName("head")[0].appendChild(o),document.createElement("link"));o.type="text/css",o.rel="stylesheet",o.href=staticAddress+"/css/"+e+".css"+(t?"?v="+t:""),document.getElementsByTagName("head")[0].appendChild(o)}function cleanTags(e){return(e||"").replace(/(<([^>]+)>)/gi," ")}function sanitize(e,t,o){if("string"==typeof e&&t&&o&&t.length==o.length)for(var a=0;a<t.length;a++)e=e.replace(new RegExp(t[a].replace(/([^a-zA-ZÖÇŞİĞÜöçşığü0-9\\|])/g,"\\$1"),"gi"),o[a]);return e}function handleAndAddEmoji(e,t,o){e=e.match(new RegExp("("+emojies.join("|").replace(/([^a-zA-ZÖÇŞİĞÜöçşığü0-9\\|])/g,"\\$1")+")","g"));return e&&0<e.length&&"string"==typeof t?t+(" "+e[0]):t}var CHANNEL=(CHANNEL=!(CHANNEL=getParameterFromScript("data-channel"))&&cbotIsMobile.any()?"MOBILE":CHANNEL)||"WIDGET",isLive=!1;function dialog(e,t,o,a,s,i,n=!1){i&&"{}"!=i||(i=""),"function"!=typeof o&&(o=function(){}),(s=null==s?!0:s)&&(appendMessageToDialogBox(t,"cbot-self",null,{},function(){}),appendTypingIconToDialogBox(""));document.getElementById("cbot-form-message");new RegExp("^("+emojies.join("|").replace(/([^a-zA-ZÖÇŞİĞÜöçşığü0-9\\|])/g,"\\$1")+")$","ig").test(t)?setTimeout(function(){$("#cbot-form-message").attr("disabled",!1),$("#cbot-send-button").attr("disabled",!1),$("#cbot-form-message").val("Mesajınızı buraya yazınız!"),$("#cbot-form-message").focus(),$("#cbot-form-message").val(""),appendMessageToDialogBox(t,"cbot-other",null,{notification:t},function(){setClickEventToInteractiveButtons(e)})},1500):(checkAndClearBeforeButtons(),setLastMessageSentDateTLS(),$(".cbot-dropdown-input").attr("disabled","disabled"),setFirstMessageSentTLS(firstMessageSent=!0),lastMessageReceiveDate=Date.now(),$(".cbot-rating-group").addClass("cbot-rating-disabled"),$(".cbot-colorful-radio-main-container").addClass("cbot-rating-disabled"),!isLive||FIRST_LIVE_MESSAGE?(currentTime=new Date,hours=(currentTime.getHours()<10?"0":"")+currentTime.getHours(),minutes=(currentTime.getMinutes()<10?"0":"")+currentTime.getMinutes(),sendPost({senderName:"User_"+e,userId:e,sessionId:cbotSessionId,data_full_action:i,message:a||t,intents:intents,client:cbot_config.client,live_chat:isLive,currentTime:hours+":"+minutes,is_triggered:n},function(e){document.getElementById("cbot-chat");e?(socketHandshake(),handleMessageArea(),intents=e.intents,clearTimeout(auth),1==e.smsAuth&&(auth=setTimeout(function(){appendMessageToDialogBox(e.smsMessage,"cbot-other",e.category,{unique_id:e.unique_id},function(){setClickEventToInteractiveButtons(e.userId),setClickEventToFeedbackButtons(e.unique_id)})},18e4)),clearTimeout(kvk),1==e.kvkConfirm&&(kvk=setTimeout(function(){appendMessageToDialogBox(e.kvkConfirmMessage,"cbot-other",e.category,{unique_id:e.unique_id},function(){setClickEventToInteractiveButtons(e.userId),setClickEventToFeedbackButtons(e.unique_id),e.survey&&surveyTrigger(e.survey,e.userId),triggerTimingResponses(e)})},3e4)),appendMessageToDialogBox(e.message,"cbot-other",e.category,{unique_id:e.unique_id,notification:e.speak,data:e},function(){setClickEventToInteractiveButtons(e.userId),setClickEventToFeedbackButtons(e.unique_id),!e.survey||e.live_chat&&1==e.live_chat||surveyTrigger(e.survey,e.userId),triggerTimingResponses(e),setisLiveTLS(isLive=setIsLive(e.live_chat)),!isLive||e.is_survey_message||e.is_survey_feedback||(FIRST_LIVE_MESSAGE=!0,socket_widget(t)),o()})):(appendMessageToDialogBox("Cihazınız internete bağlı olmadığından işleminizi gerçekleştiremiyorum. İnternete bağlandıktan sonra talebinizi baştan iletebilirsiniz.","cbot-other",null,{notification:"Cihazınız internete bağlı olmadığından işleminizi gerçekleştiremiyorum. İnternete bağlandıktan sonra talebinizi baştan iletebilirsiniz."},function(){}),o())})):($(".cbot-typing").remove(),$(".cbot-refresh-button").css("opacity","1"),$(".cbot-refresh-button").css("pointer-events","painted"),socket_widget(t),setTimeout(function(){$(".cbot-send-button").removeClass("active"),$(".cbot-form-message-area").removeClass("active"),$("#cbot-form-message").attr("disabled",!1),$("#cbot-send-button").attr("disabled",!1),$("#cbot-form-message").val("Mesajınızı buraya yazınız!"),$("#cbot-form-message").focus(),$("#cbot-form-message").val("")},200)))}function clearMessages(){document.getElementById("cbot-chat").innerHTML="",setSessionIdTLS(null),sendTriggerMessages(trigger_messages)}function appendTextLastAddedBox(e){document.querySelector("#cbot-chat > li:last-child > div").textContent=e}function removeLastAddedBox(){document.querySelector("#cbot-chat > li:last-child").remove()}function sendPost(o,a,t){isSpeechListening&&$(".cbot-voice-area").click(),o.referrer=CHANNEL||"WIDGET",focookie&&(o.focookie=focookie),loginId&&(o.loginId=loginId),data_user&&(o.userInfo=data_user),o.live_bot=FIRST_LIVE_MESSAGE,(o=addSurveyRequestData(o)).widget_lang=widget_lang,$(".cbot-send-button").removeClass("active"),$(".cbot-form-message-area").removeClass("active"),clearSurveyTimeout(),t||clearTimingResponseTimeout();for(var s=new XMLHttpRequest,i=(s.onreadystatechange=function(){if(console.log(this.readyState),2==this.readyState)stream_response&&appendMessageToDialogBox("","cbot-other","",{},function(){});else if(3==this.readyState)stream_response&&(appendTextLastAddedBox(s.responseText.split("\n").map(e=>e.replace(/^data: /,"")).filter(e=>0<e.length).join("")),scrollChatScreen(30));else if(4==this.readyState&&200==this.status){send_message_is_active_flag=send_message_is_active_flag&&!1;let e=this.responseText;stream_response&&(removeLastAddedBox(),e=e.match(/(?:\n\n|^)*data: (.*?)\n\n$/i)[1]);var t=JSON.parse(e);if(o.is_survey&&(t.is_survey_message=!0),hasSurveyFeedback&&(t.is_survey_feedback=!0),hasSurveyFeedback=t.survey_feedback,t.user_display_name&&addAvatarLetters(t.user_display_name),"CLEAR"==t.action)return clearMessages(),a(t);t.cleanSession?cbotClearUserDialog(!1):(setUserIdTLS(t.userId),setSessionIdTLS(t.session_id)),Array.isArray(t.entities.LONG_POLLING)&&"true"==t.entities.LONG_POLLING[0]&&waitForLongPolling(),!hasSurveyFeedback&&handleExitSurveyAnswer(t.category,t)||(t.exit_survey&&(exitSurvey=t.exit_survey),t.send_message&&(o.message=t.send_message,send_message_is_active_flag=!0,o.is_triggered=!0,sendPost(o,a),appendTypingIconToDialogBox("")),t.lang_vars&&setLangVars(t.lang_vars),t.serviceOutput&&t.serviceOutput.postMessage&&(cbotIsMobile.Android()?ChatbotJSBridge.changeAccount(JSON.stringify(t.serviceOutput)):cbotIsMobile.iOS()&&window.webkit.messageHandlers.changeAccount.postMessage(JSON.stringify(t.serviceOutput)),window.postMessage(t.serviceOutput,getAddr()),window.ReactNativeWebView&&window.ReactNativeWebView.postMessage(JSON.stringify(t.serviceOutput),getAddr()),t.serviceOutput.send_message)&&(o.message=t.serviceOutput.send_message,appendTypingIconToDialogBox(""),sendPost(o,a)),socket_newclient(),a(t))}else 4==this.readyState&&a()},s.open("POST",rootAddress+"/"+CLIENT,!0),s.setRequestHeader("Accept","application/json"),s.setRequestHeader("Content-Type","application/json"),s.setRequestHeader("CBOT-Token","evsx7Tkgv5ycqZbSXV1GiAp4O8NfSJHx"),s.setRequestHeader("CBOT-URL",generateCBOTURL(location.href)),s.withCredentials=with_credentials,clients.gateway_custom_headers||[]),n=0;n<i.length;n++){var c=i[n];s.setRequestHeader(c.key,c.value)}s.send(JSON.stringify(o)),1==o.is_survey||1==o.is_survey_feedback?sendCustomPostMessage("CBOT_SURVEY_ANSWERED_BY_USER",{message:o.message,survey_id:o.survey_id}):sendCustomPostMessage("CBOT_MESSAGE_SENT",{message:o.message}),elCbotInteractiveButtons=document.getElementsByClassName("postback");for(var r=0;r<elCbotInteractiveButtons.length;r++)"true"!=(e=elCbotInteractiveButtons[r]).getAttribute("data-branch")&&(e.style.pointerEvents="none")}function getAddr(){return"*"}function sendToEndChat(){SEND_ENDCHAT&&$.ajax({url:rootAddress+"/conversations/endchat?client="+CLIENT,type:"POST",headers:{"Content-Type":"application/json","CBot-Token":"evsx7Tkgv5ycqZbSXV1GiAp4O8NfSJHx","CBOT-URL":generateCBOTURL(location.href)},timeout:1e4,data:JSON.stringify({client:CLIENT,client_id:userId,sessionId:cbotSessionId,live_chat:isLive}),success:function(e){},error:function(e){}})}function setLangVars(t){var o=Object.keys(t);for(let e=0;e<o.length;e++){var a=o[e],s=t[a];lang_vars[a]=s}}let carousels={};function sendTimeOutMessage(e){appendMessageToDialogBox(e,"cbot-other",null,{notification:e},function(){}),setSessionIdTLS(cbotSessionId=null),setIsTimeoutMessageSentTLS(!0)}function appendMessageToDialogBox(u,g,p,m,b,_){_=_||null;const v=(new Date).getTime();if(b&&"function"==typeof b||(b=function(){}),m=m||{},"cbot-self"===g){var e=isLive?"is-live":"";cbot_messages_sending_time?(currentTime=new Date,hours=(currentTime.getHours()<10?"0":"")+currentTime.getHours(),minutes=(currentTime.getMinutes()<10?"0":"")+currentTime.getMinutes(),$("#cbot-chat").append('<li class="'+g+" "+e+'"><div class="cbot-msg">'+generateComponentHTML(u,p,m)+`<div class="cbot-messages-sending-time">${hours}:${minutes}</div></div></li>`)):$("#cbot-chat").append('<li class="'+g+" "+e+'"><div class="cbot-msg">'+generateComponentHTML(u,p,m)+"</div></li>"),m.instantWrite||scrollChatScreen(100)}else{$(".cbot-typing").remove(),$(".cbot-refresh-button").css("opacity","1"),$(".cbot-refresh-button").css("pointer-events","painted"),_&&(u.chat_type=_),u.is_survey&&(u.chat_type=u.is_survey),appendTypingIconToDialogBox("",u.chat_type),m.notification&&(showNotification(cbot_config.dialogTitle,m.notification),sendCustomPostMessage("CBOT_MESSAGE_RECEIVED",m.notification)),u=(u=Array.isArray(u)?u:[u]).filter(function(e){return"TEXT"!=e.message_type||"NO_MESSAGE"!=e.message&&"<p>NO_MESSAGE</p>"!=e.message});var f=0;let d;var h=setInterval(function e(){if(f<u.length){if(u&&Array.isArray(u)&&0<u.length&&"TEXT"==u[f].message_type&&("NO_MESSAGE"==u[f].message||"<p>NO_MESSAGE</p>"==u[f].message))return f++,e();if($(".cbot-typing").remove(),$(".cbot-refresh-button").css("opacity","1"),$(".cbot-refresh-button").css("pointer-events","painted"),u&&Array.isArray(u)&&0<u.length&&"TEXT"==u[f].message_type&&("NO_MESSAGE"==u[f].message||"<p>NO_MESSAGE</p>"==u[f].message))return f++,$("#cbot-form-message").attr("disabled",!1),$("#cbot-send-button").attr("disabled",!1),$("#cbot-form-message").val("Mesajınızı buraya yazınız!"),$("#cbot-form-message").focus(),$("#cbot-form-message").val(""),e();var t="",o=isGenericComponent(u[f])?" cbot-msg-custom-generic":"",a=isButtonComponent(u[f])?" cbot-msg-custom-button":"",s="",i=(f+1==u.length&&(t=generateFeedbackButtons(m)),u[f].custom_class&&(s=" "+u[f].custom_class),cbot_messages_sending_time&&"BUTTON_COMPONENT"!=u[f].message_type&&"DONUT_COMPONENT"!=u[f].message_type&&"GENERIC_COMPONENT_V3"!=u[f].message_type&&"GENERIC_COMPONENT_V1"!=u[f].message_type?(currentTime=new Date,hours=(currentTime.getHours()<10?"0":"")+currentTime.getHours(),minutes=(currentTime.getMinutes()<10?"0":"")+currentTime.getMinutes(),$("#cbot-chat").append('<li data-message-id="'+u[f].message_id+'" class="'+g+s+'"><div class="cbot-msg'+o+a+'">'+generateComponentHTML(u[f],p,m,v)+t+`<div class="cbot-messages-sending-time">${hours}:${minutes}</div></div></li>`)):$("#cbot-chat").append('<li data-message-id="'+u[f].message_id+'" class="'+g+s+'"><div class="cbot-msg'+o+a+'">'+generateComponentHTML(u[f],p,m,cbot_messages_sending_time,v)+t+"</div></li>"),document.getElementsByClassName("cbot-donut-arrow"));if(i&&0<i.length)for(var n=0;n<i.length;n++)i[n].onclick=slideDonut;if(d=u[f],++f<u.length&&appendTypingIconToDialogBox(""),m.instantWrite||scrollChatScreen(100),(i=document.getElementsByClassName("cbot-arrow"))&&0<i.length)for(var c=0;c<i.length;c++)i[c].onclick=slide;var r=document.getElementsByClassName("cbot-generic-v1-arrow");if(r&&0<r.length)for(c=0;c<r.length;c++)r[c].onclick=slideGenericV1;if((r=document.getElementsByClassName("cbot-generic-v2-arrow"))&&0<r.length)for(c=0;c<r.length;c++)r[c].onclick=slideGenericV2;if((r=document.getElementsByClassName("cbot-generic-v3-arrow"))&&0<r.length)for(c=0;c<r.length;c++)r[c].onclick=slideGenericV3;f==u.length&&m&&m.data&&!m.data.send_message&&($("#cbot-form-message").attr("disabled",!1),$("#cbot-send-button").attr("disabled",!1),$("#cbot-form-message").val("Mesajınızı buraya yazınız!"),cbotIsMobile.any()||($("#cbot-form-message").focus(),$("#cbot-form-message").val("")),$("#cbot-form-message").focusin(function(){scrollChatScreen(100)})),f!=u.length||send_message_is_active_flag||(clearInterval(h),"agent"==u[0].chat_type||"timeout"==_||u[0].is_survey||($("#cbot-form-message").attr("disabled",!1),$("#cbot-send-button").attr("disabled",!1),$("#cbot-form-message").val("Mesajınızı buraya yazınız!"),$("#cbot-form-message").focus(),$("#cbot-form-message").val("")),b())}else(send_message_is_active_flag?($(".cbot-typing").remove(),appendTypingIconToDialogBox):(clearInterval(h),b))();data_owl&&($("#"+v).length&&$("#"+v).owlCarousel&&$("#"+v).owlCarousel({loop:!1,nav:!0,items:1,limit:3,dots:!0,margin:data_owl_margin?parseInt(data_owl_margin):10,stagePadding:30}),$(".cbot-donut-carousel-wrapper.cbot-owl-carousel").each(function(){var e=$(this);e.owlCarousel&&e.owlCarousel({loop:!1,nav:!0,items:1,dots:!0,margin:data_owl_margin?parseInt(data_owl_margin):27,stagePadding:0})})),show_more_min_elem_count=d&&d.show_more_count?d.show_more_count:9;let l;if(d&&d.elements&&(s=d.elements,l=d.show_more_checkbox&&s.length>show_more_min_elem_count),l){let e=0;$(`#${v} .cbot-owl-stage-outer .cbot-owl-stage .cbot-owl-item`).each(function(){e>show_more_min_elem_count&&(carousels.hasOwnProperty("carousel_show_more_id_"+v)||(carousels["carousel_show_more_id_"+v]=[]),carousels["carousel_show_more_id_"+v].push($(this)),$(this).remove()),e++}),$("#"+v).owlCarousel("destroy"),$("#"+v).owlCarousel({loop:!1,nav:!0,items:1,limit:3,dots:!0,margin:data_owl_margin?parseInt(data_owl_margin):10,stagePadding:30})}return e}(),m.instantWrite?1:1500)}var t=document.getElementsByClassName("cbot-arrow");if(t&&0<t.length)for(var o=0;o<t.length;o++)t[o].onclick=slide;if((t=document.getElementsByClassName("cbot-donut-arrow"))&&0<t.length)for(o=0;o<t.length;o++)t[o].onclick=slideDonut;var a=document.getElementsByClassName("cbot-generic-v1-arrow");if(a&&0<a.length)for(var s=0;s<a.length;s++)a[s].onclick=slideGenericV1;if((a=document.getElementsByClassName("cbot-generic-v2-arrow"))&&0<a.length)for(s=0;s<a.length;s++)a[s].onclick=slideGenericV2;if((a=document.getElementsByClassName("cbot-generic-v3-arrow"))&&0<a.length)for(s=0;s<a.length;s++)a[s].onclick=slideGenericV3}function slide(e){e.preventDefault();var t=e.target,o=e.target;if(t.onclick=null,o.nextSibling){for(;"cbot-card-carousel"!=o.nextSibling.className;)o=o.nextSibling;o=o.nextSibling,0<=t.className.indexOf("left")?($(o).css("left")&&"auto"!=$(o).css("left")||$(o).css("left",0),+$(o).css("left").replace("px","")<0?($(o).siblings(".cbot-arrow.right").css("display","block"),$(o).animate({left:"+=224px"},1e3,"swing",function(){t.onclick=slide,0==Math.abs(+$(o).css("left").replace("px",""))?$(t).css("display","none"):$(t).css("display","block")})):t.onclick=slide):($(o).css("left")&&"auto"!=$(o).css("left")||$(o).css("left",0),Math.abs(+$(o).css("left").replace("px",""))+224<$(o).width()?($(o).siblings(".cbot-arrow.left").css("display","block"),$(o).animate({left:"-=224px"},1e3,"swing",function(){t.onclick=slide,Math.abs(+$(o).css("left").replace("px",""))+224>=$(o).width()?$(t).css("display","none"):$(t).css("display","block");var e=$(o).prop("data-currentIndex")||0;$(o).prop("data-currentIndex",++e)})):t.onclick=slide)}}function slideGenericV1(e){e.preventDefault();var t=e.target,a=e.target;if(t.onclick=null,a.nextSibling){for(;"cbot-generic-v1-carousel"!=a.nextSibling.className;)a=a.nextSibling;a=a.nextSibling,0<=t.className.indexOf("left")?($(".cbot-generic-v1-arrow.right").css("display","block"),$(a).css("left")&&"auto"!=$(a).css("left")||$(a).css("left",0),+$(a).css("left").replace("px","")<0?$(a).animate({left:"+=251px"},1e3,"swing",function(){0==Math.abs(+$(a).css("left").replace("px",""))?$(t).css("display","none"):$(t).css("display","block");var o=$(a).prop("data-currentIndex")||0;$(a).prop("data-currentIndex",--o),$(a).find(".cbot-generic-template-v1").each(function(e,t){e==o?($(t).css("opacity","1"),$(t).css("pointer-events","auto")):($(t).css("pointer-events","none"),$(t).css("opacity",".3"))}),$(a).parent().siblings(".cbot-generic-template-v2-navigator-wrapper").children().each(function(e,t){e==o?$(t).addClass("cbot-dot-active"):$(t).removeClass("cbot-dot-active")}),t.onclick=slideGenericV1}):t.onclick=slideGenericV1):($(".cbot-generic-v1-arrow.left").css("display","block"),$(a).css("left")&&"auto"!=$(a).css("left")||$(a).css("left",0),Math.abs(+$(a).css("left").replace("px",""))+251<$(a).width()?$(a).animate({left:"-=251px"},1e3,"swing",function(){Math.abs(+$(a).css("left").replace("px",""))+251>=$(a).width()?$(t).css("display","none"):$(t).css("display","block");var o=$(a).prop("data-currentIndex")||0;$(a).prop("data-currentIndex",++o),$(a).find(".cbot-generic-template-v1").each(function(e,t){e==o?($(t).css("opacity","1"),$(t).css("pointer-events","auto")):($(t).css("pointer-events","none"),$(t).css("opacity",".3"))}),$(a).parent().siblings(".cbot-generic-template-v2-navigator-wrapper").children().each(function(e,t){e==o?$(t).addClass("cbot-dot-active"):$(t).removeClass("cbot-dot-active")}),t.onclick=slideGenericV1}):t.onclick=slideGenericV1)}}var cbotV3SliderLock=!1;function slideGenericV3Number(e,o){var t,a;cbotV3SliderLock||(cbotV3SliderLock=!0,t=$(e).parent().parent().find(".cbot-generic-v3-carousel"),$(t).css("left")&&"auto"!=$(t).css("left")||$(t).css("left",0),a=$(e).parent().parent().find(".cbot-generic-template-v3").length,$(t).stop().animate({left:224*-o+"px"},1e3,"swing",function(){cbotV3SliderLock=!1,console.log("taşındı"),$(e).parent().parent().find(".cbot-generic-v3-carousel").prop("data-currentIndex",o),$(e).parent().parent().find(".cbot-generic-template-v3").each(function(e,t){e==o?($(t).css("opacity","1"),$(t).css("pointer-events","auto")):($(t).css("pointer-events","none"),$(t).css("opacity",".3"))}),$(e).parent().children().each(function(e,t){e==o?$(t).addClass("cbot-dot-active"):$(t).removeClass("cbot-dot-active")}),0==o&&($(e).parent().parent().find(".left").css("display","none"),a)&&$(e).parent().parent().find(".right").css("display","block"),0<o&&$(e).parent().parent().find(".left").css("display","block"),a-1==o&&$(e).parent().parent().find(".right").css("display","none")}))}var cbotV2SliderLock=!1;function slideGenericV2Number(e,o){var t,a;cbotV2SliderLock||(cbotV2SliderLock=!0,t=$(e).parent().parent().find(".cbot-generic-v2-carousel"),$(t).css("left")&&"auto"!=$(t).css("left")||$(t).css("left",0),a=$(e).parent().parent().find(".cbot-generic-template-v2").length,$(t).stop().animate({left:224*-o+"px"},1e3,"swing",function(){cbotV2SliderLock=!1,console.log("taşındı"),$(e).parent().parent().find(".cbot-generic-v2-carousel").prop("data-currentIndex",o),$(e).parent().parent().find(".cbot-generic-template-v2").each(function(e,t){e==o?($(t).css("opacity","1"),$(t).css("pointer-events","auto")):($(t).css("pointer-events","none"),$(t).css("opacity",".3"))}),$(e).parent().children().each(function(e,t){e==o?$(t).addClass("cbot-dot-active"):$(t).removeClass("cbot-dot-active")}),0==o&&($(e).parent().parent().find(".left").css("display","none"),a)&&$(e).parent().parent().find(".right").css("display","block"),0<o&&$(e).parent().parent().find(".left").css("display","block"),a-1==o&&$(e).parent().parent().find(".right").css("display","none")}))}var cbotV1SliderLock=!1;function slideGenericV1Number(e,o){var t,a;cbotV1SliderLock||(cbotV1SliderLock=!0,t=$(e).parent().parent().find(".cbot-generic-v1-carousel"),$(t).css("left")&&"auto"!=$(t).css("left")||$(t).css("left",0),a=$(e).parent().parent().find(".cbot-generic-template-v1").length,$(t).stop().animate({left:251*-o+"px"},1e3,"swing",function(){cbotV1SliderLock=!1,console.log("taşındı"),$(e).parent().parent().find(".cbot-generic-v1-carousel").prop("data-currentIndex",o),$(e).parent().parent().find(".cbot-generic-template-v1").each(function(e,t){e==o?($(t).css("opacity","1"),$(t).css("pointer-events","auto")):($(t).css("pointer-events","none"),$(t).css("opacity",".3"))}),$(e).parent().children().each(function(e,t){e==o?$(t).addClass("cbot-dot-active"):$(t).removeClass("cbot-dot-active")}),0==o&&($(e).parent().parent().find(".left").css("display","none"),a)&&$(e).parent().parent().find(".right").css("display","block"),0<o&&$(e).parent().parent().find(".left").css("display","block"),a-1==o&&$(e).parent().parent().find(".right").css("display","none")}))}function slideGenericV2(e,t,o){e.preventDefault();var a=e.target,s=e.target;if(a.onclick=null,s.nextSibling){for(;"cbot-generic-v2-carousel"!=s.nextSibling.className;)s=s.nextSibling;s=s.nextSibling,0<=a.className.indexOf("left")?($(".cbot-generic-v2-arrow.right").css("display","block"),$(s).css("left")&&"auto"!=$(s).css("left")||$(s).css("left",0),+$(s).css("left").replace("px","")<0?$(s).animate({left:"+=224px"},1e3,"swing",function(){var o=$(s).prop("data-currentIndex")||0;$(s).prop("data-currentIndex",--o),$(s).find(".cbot-generic-template-v2").each(function(e,t){e==o?($(t).css("opacity","1"),$(t).css("pointer-events","auto")):($(t).css("pointer-events","none"),$(t).css("opacity",".3"))}),$(s).parent().siblings(".cbot-generic-template-v2-navigator-wrapper").children().each(function(e,t){e==o?$(t).addClass("cbot-dot-active"):$(t).removeClass("cbot-dot-active")}),0==Math.abs(+$(s).css("left").replace("px",""))?$(a).css("display","none"):$(a).css("display","block"),a.onclick=slideGenericV2}):a.onclick=slideGenericV2):($(".cbot-generic-v2-arrow.left").css("display","block"),$(s).css("left")&&"auto"!=$(s).css("left")||$(s).css("left",0),Math.abs(+$(s).css("left").replace("px",""))+224<$(s).width()?$(s).animate({left:"-=224px"},1e3,"swing",function(){var o=$(s).prop("data-currentIndex")||0;$(s).prop("data-currentIndex",++o),$(s).find(".cbot-generic-template-v2").each(function(e,t){e==o?($(t).css("opacity","1"),$(t).css("pointer-events","auto")):($(t).css("pointer-events","none"),$(t).css("opacity",".3"))}),$(s).parent().siblings(".cbot-generic-template-v2-navigator-wrapper").children().each(function(e,t){e==o?$(t).addClass("cbot-dot-active"):$(t).removeClass("cbot-dot-active")}),Math.abs(+$(s).css("left").replace("px",""))+251>=$(s).width()?$(a).css("display","none"):$(a).css("display","block"),a.onclick=slideGenericV2}):a.onclick=slideGenericV2)}}function slideGenericV3(e,t,o){e.preventDefault();var a=e.target,s=e.target;if(a.onclick=null,s.nextSibling){for(;"cbot-generic-v3-carousel"!=s.nextSibling.className;)s=s.nextSibling;s=s.nextSibling,$(s).find(".cbot-generic-template-v3-dropdown-arrow-icon").each(function(e,t){"true"==$(t).attr("data-active")&&$(t).click()}),0<=a.className.indexOf("left")?($(".cbot-generic-v3-arrow.right").css("display","block"),$(s).css("left")&&"auto"!=$(s).css("left")||$(s).css("left",0),+$(s).css("left").replace("px","")<0?$(s).animate({left:"+=224px"},1e3,"swing",function(){var o=$(s).prop("data-currentIndex")||0;$(s).prop("data-currentIndex",--o),$(s).find(".cbot-generic-template-v3").each(function(e,t){e==o?($(t).css("opacity","1"),$(t).css("pointer-events","auto")):($(t).css("pointer-events","none"),$(t).css("opacity",".3"))}),$(s).parent().siblings(".cbot-generic-template-v3-navigator-wrapper").children().each(function(e,t){e==o?$(t).addClass("cbot-dot-active"):$(t).removeClass("cbot-dot-active")}),0==Math.abs(+$(s).css("left").replace("px",""))?$(a).css("display","none"):$(a).css("display","block"),a.onclick=slideGenericV3}):a.onclick=slideGenericV3):($(".cbot-generic-v3-arrow.left").css("display","block"),$(s).css("left")&&"auto"!=$(s).css("left")||$(s).css("left",0),Math.abs(+$(s).css("left").replace("px",""))+224<$(s).width()?$(s).animate({left:"-=224px"},1e3,"swing",function(){var o=$(s).prop("data-currentIndex")||0;$(s).prop("data-currentIndex",++o),$(s).find(".cbot-generic-template-v3").each(function(e,t){e==o?($(t).css("opacity","1"),$(t).css("pointer-events","auto")):($(t).css("pointer-events","none"),$(t).css("opacity",".3"))}),$(s).parent().siblings(".cbot-generic-template-v3-navigator-wrapper").children().each(function(e,t){e==o?$(t).addClass("cbot-dot-active"):$(t).removeClass("cbot-dot-active")}),Math.abs(+$(s).css("left").replace("px",""))+251>=$(s).width()?$(a).css("display","none"):$(a).css("display","block"),a.onclick=slideGenericV3}):a.onclick=slideGenericV3)}}function addMessageToCache(e){var t=localStorage[getDynamicLSName("messages")]&&""!=localStorage[getDynamicLSName("messages")]?JSON.parse(localStorage[getDynamicLSName("messages")]):[];10<t.length&&t.splice(0,1),t.push(e),localStorage[getDynamicLSName("messages")]=JSON.stringify(t)}function getMessagesFromCache(){var e=localStorage[getDynamicLSName("messages")]&&""!=localStorage[getDynamicLSName("messages")]?JSON.parse(localStorage[getDynamicLSName("messages")]):null;if(e instanceof Array&&0<e.length)for(var t=0;t<e.length;t++)"Bot"!=e[t].senderName?appendMessageToDialogBox(e[t].message,"cbot-self",null,{},function(){}):appendMessageToDialogBox(e[t].message,"cbot-other",null,{},function(){})}function fadeIn(e){e.style.opacity=0;function t(){e.style.opacity=+e.style.opacity+.1,e.style.opacity<1?window.requestAnimationFrame&&requestAnimationFrame(t)||setTimeout(t,16):e.style.display="block"}t()}function fadeOut(e){e.style.opacity=1;function t(){e.style.opacity=+e.style.opacity-.1,.2<e.style.opacity?window.requestAnimationFrame&&requestAnimationFrame(t)||setTimeout(t,16):(e.style.opacity=0,e.style.display="none")}t()}function slideIn(e){e.style.display="block";function t(){o+=5,e.style.height=o+"%",o<100&&(window.requestAnimationFrame&&requestAnimationFrame(t)||setTimeout(t,16))}var o=1;t()}function slideOut(e){function t(){o-=5,e.style.height=o+"%",0<o?window.requestAnimationFrame&&requestAnimationFrame(t)||setTimeout(t,16):e.style.display="none"}var o=100;t()}function generateFeedbackButtons(e){return e.unique_id&&clients.feedback&&clients.feedback.is_active?'<div class="cbot-feedback-area cbot-feedback-id-'+e.unique_id+'"><div class="cbot-feedback-status"></div><a href="#" class="cbot-feedback-vote-button cbot-vote-down-selectable"></a><a href="#" class="cbot-feedback-vote-button cbot-vote-up-selectable"></a><div class="cbot-clearfix"></div><div class="cbot-feedback-comment-area" style="display:none"><textarea class="cbot-feedback-textarea" placeholder=""></textarea><div class="cbot-feedback-status-form"></div><a href="#" class="cbot-feedback-form-send"></a><div class="cbot-clearfix"></div></div></div>':""}function sendFeedbackPost(e,t){for(var e={client:CLIENT,userId:userId,unique_id:e.unique_id,user_comment:e.user_comment,feedback_like:e.feedback_like},o=new XMLHttpRequest,a=(o.onreadystatechange=function(){var e;4!=this.readyState||200!=this.status&&429!=this.status?4==this.readyState&&t():(e=JSON.parse(this.responseText),t(e))},o.open("POST",rootAddress+"/"+CLIENT+"/savecomment",!0),o.setRequestHeader("Accept","application/json"),o.setRequestHeader("Content-Type","application/json"),o.setRequestHeader("CBOT-Token","evsx7Tkgv5ycqZbSXV1GiAp4O8NfSJHx"),o.setRequestHeader("CBOT-URL",generateCBOTURL(location.href)),clients.gateway_custom_headers||[]),s=0;s<a.length;s++){var i=a[s];o.setRequestHeader(i.key,i.value)}o.send(JSON.stringify(e))}var cbotModal,cbotModalImg,uploadIndex=1;function generateComponentHTML(e,t,o,a=!1,s=null){o=o||{};var i="";if(closeMiniWeb(),"object"!=typeof e)return sendUrlsToGA(e),('<span class="cbot-text">'+(e||"")+"</span>").replace(/(\n|\\n)/g,"<br/>");if("GENERIC_COMPONENT"==e.message_type)if(1<e.elements.length){var n=e.elements;i+='<div class="cbot-carousel-wrapper">',e.bottom_arrows?i+='<div class="cbot-card-carousel" style="width:'+224*n.length+'px; position: relative; display:flex">':i+='<div class="cbot-arrow left" style="display: none;"></div><div class="cbot-arrow right"></div><div class="cbot-card-carousel" style="width:'+224*n.length+'px; position: relative; display:flex">';for(var c=0;c<n.length;c++)l=""+n[c].title,i=i+('<div class="cbot-component generic-template" style="float:left; max-width:250px; margin-right:10px;background-image: url('+n[c].image_url)+')"><div class="cbot-image">',n[c].subtitle&&(n[c].subtitle=numberToString((n[c]||{}).subtitle),sendUrlsToGA(n[c].subtitle)),i=(i=(i=i+'<div class="cbot-description" style="position:relative"><p class="cbot-title">'+l+"</p>")+'<p class="cbot-subtitle">'+n[c].subtitle.replace(/(\n|\\n)/g,"<br/>").replace(/<\/?p.*?>/,"")+"</p></div></div>")+generateButtonsHTML(n[c].buttons,o.instantWrite)+"</div>";if(i+="</div>",e.bottom_arrows){for(i=i+'<div class="cbot-bottom-arrow-container">'+'<div class="cbot-bottom-arrow-left"></div>',c=0;c<n.length;c++)i+=0==c?'<div class="cbot-bottom-arrow-indicators active"></div>':'<div class="cbot-bottom-arrow-indicators"></div>';i=i+'<div class="cbot-bottom-arrow-right"></div>'+"</div>"}i+="</div>"}else{var r=e.elements[0],l=""+r.title;i=i+('<div class="cbot-component generic-template" style="float:none; margin:0 auto; max-width:250px; background-image: url('+r.image_url+')">')+'<div class="cbot-image">',r.subtitle&&(r.subtitle=numberToString((r||{}).subtitle),sendUrlsToGA(r.subtitle)),i=(i=(i=(i=i+'<div class="cbot-description" style="position:relative">'+('<p class="cbot-title">'+l+"</p>"))+('<p class="cbot-subtitle">'+r.subtitle.replace(/(\n|\\n)/g,"<br/>").replace(/<\/?p.*?>/,"")+"</p>"))+"</div>"+"</div>")+generateButtonsHTML(r.buttons,o.instantWrite)+"</div>"}else if("GENERIC_COMPONENT_V1"==e.message_type){if(0<e.elements.length){n=e.elements;i+='<div class="cbot-generic-template-v1-carousel-wrapper">',1<e.elements.length&&(i=i+'<div class="cbot-generic-v1-arrow left" style="'+(data_mobileapp?"opacity: 0.5 !important;":"display:none")+'"></div><div class="cbot-generic-v1-arrow right" style="'+(data_mobileapp?"opacity: 0.5 !important;":"display:block")+'"></div>'),i+='<div class="cbot-generic-v1-carousel" style="width:'+251*n.length+'px; position: relative; display:flex">';for(c=0;c<n.length;c++){var r=e.elements[c],d=(i+='<div class="cbot-generic-template-v1" style="opacity: '+(0<c?".3":"1")+'"">',r.background_color?"background-color: "+r.background_color:"");i=(i+='<div class="cbot-generic-template-v1-header" style="'+d+'">')+r.title+"</div>";for(let e=0;e<r.sub_descriptions.length;e++)if("text"==(b=r.sub_descriptions[e]).type)i=(i=(i+='<div class="cbot-generic-template-v1-text">')+(b.message||""))+(a?`<div class="cbot-messages-sending-time">${hours}:${minutes}</div></div>`:"</div>");else if("table"==b.type)i=(i=(i+='<div class="cbot-generic-template-v1-table"><div class="cbot-generic-template-v1-table-left">')+(b.left_column||"")+'</div><div class="cbot-generic-template-v1-table-right">')+(b.right_column||"")+'</div></div><div class="cbot-clear"></div>';else if("dropdown"==b.type){var u=b.rows;i=(i=(i=(i=i+'<div class="cbot-generic-template-v1-dropdown">'+'<div class="cbot-generic-template-v1-dropdown-header">')+(b.title||""))+'<div class="cbot-dropdown-arrow-icon"></div>'+'<span class="cbot-generic-dropdown-v1-action" />')+"</div>"+"<div>";for(let e=0;e<u.length;e++){var g=u[e];i=(i=(i=(i=(i=(i+='<div class="cbot-generic-template-v1-dropdown-row-container">')+'<div class="cbot-generic-template-v1-dropdown-row-left">'+'<div class="cbot-dropdown-list-icon"></div>')+(g.left_column||""))+"</div>"+'<div class="cbot-generic-template-v1-dropdown-row-right">')+(g.right_column||"")+"</div>")+'<div class="cbot-clear"></div>'+"</div>"}i=i+"</div>"+"</div>"}i=(i=(i+='<div class="cbot-generic-v1-button-holder">')+generateButtonsHTML(r.buttons,o.instantWrite))+"</div>"+"</div>"}i=i+"</div>"+"</div>"}if(0<e.elements.length){i+='<div class="cbot-generic-template-v2-navigator-wrapper">';for(let e=0;e<n.length;e++)i+='<div class="cbot-generic-template-v2-navigator-dot '+(0==e?"cbot-dot-active":"")+'" onclick="slideGenericV1Number(this,'+e+' )"></div>';i+="</div>"}}else if("GENERIC_COMPONENT_V2"==e.message_type){show_more_min_elem_count=e.show_more_count||9,max_element_count=e.max_element_count||18;var n=e.elements,p=e.show_more_checkbox&&n.length>show_more_min_elem_count;if(0<e.elements.length){i+='<div class="cbot-generic-template-v2-carousel-wrapper">',data_owl?i+='<div class="cbot-owl-carousel" id="'+s+'">':1<e.elements.length?i=(i+='<div class="cbot-generic-v2-arrow left"></div><div class="cbot-generic-v2-arrow right"></div>')+'<div class="cbot-generic-v2-carousel" style="width:'+224*(p?show_more_min_elem_count+1:n.length)+'px; position: relative;">':i+='<div class="cbot-generic-v2-carousel" style="width:'+224*(p?show_more_min_elem_count+1:n.length)+'px; position: relative;">';for(c=0;c<Math.min(n.length,max_element_count);c++){var r=e.elements[c],m=(0!=c&&c%show_more_min_elem_count==0&&p&&(i=i+(data_owl?'<div class="cbot-generic-template-v2 cbot-show-more-container" style="'+(c==show_more_min_elem_count?"display: block;":"display: none;")+' ">':'<div class="cbot-generic-template-v2 cbot-show-more-container" style="'+(0==c?"opacity: 1; pointer-events: auto;":"opacity: 0.3; pointer-events: none;")+(c==show_more_min_elem_count?"display: block;":"display: none;")+' ">')+'<div class="cbot-generic-template-v2-background-holder"style="background-color: #049ead; background-image: url('+staticAddress+'/img/modern/cbot-generic-v2-show-more.png); background-size: 100% 100%;"><div class="cbot-generic-template-v2-prime-title" style="visibility: hidden"></div><div class="cbot-generic-template-v2-title1"></div><div class="cbot-generic-template-v2-title2" style=""></div><div class="cbot-generic-template-v2-title3"></div><div class="cbot-generic-template-v2-row" style="border: none"></div></div><div class="cbot-generic-template-v2-dropdown-title-dummy" style="box-sizing: border-box;padding: 15px;">Size özel teklifleri keşfetmeye devam edin.</div><div class="cbot-generic-template-v2-dropdown-container" style="padding: 0 15px"><div class="cbot-generic-template-v2-dropdown-right-area" style="width: 100%;"><a href="#" class="cbot-generic-template-v2-dropdown-button cbot-generic-v2-show-more" data-payload="hehehe" id="carousel_show_more_id_'+s+'" style="font-size:12px !important; width: 100%">Daha Fazla Teklif Gör</a></div><div class="cbot-clear"></div></div>\x3c!-- ${elements.find(x => x.bottom_description_exists) ? "<div class="cbot-generic-template-v2-bottom-description"></div>" : ""}--\x3e</div>'),r.background_color||(r.background_color="#049ead"),"background-image:"+r.background_color);if(i=(i=(i=(i=(i=(i=(i=(i=(i=i+(data_owl?'<div class="cbot-generic-template-v2" style="opacity: 1; display: '+(p&&show_more_min_elem_count<=c?"none":"block")+'">':'<div class="cbot-generic-template-v2" style="opacity: '+(0<c?".3":"1")+"; display: "+(p&&show_more_min_elem_count<=c?"none":"block")+'">')+('<div class="cbot-generic-template-v2-background-holder" style="'+m+'">'))+('<div class="cbot-generic-template-v2-prime-title" style="visibility: '+(r.prime_title?"initial":"hidden")+";background:"+(r.prime_title_color||"#e91e63")+'">'))+(r.prime_title||""))+"</div>"+'<div class="cbot-generic-template-v2-title1">')+(r.title1||"")+"</div>")+('<div class="cbot-generic-template-v2-title2" style="font-size: '+cbotGetFontSize((r.title2||"").length||"")+'">'))+(r.title2||""))+"</div>"+'<div class="cbot-generic-template-v2-title3">')+(r.title3||"")+"</div>","text"==r.row_type?i=r.text?(i+='<div class="cbot-generic-template-v2-row">')+(r.text||"")+"</div>":(i+='<div class="cbot-generic-template-v2-row" style="border-top: transparent">')+(r.text||"")+"</div>":"table"==r.row_type?i=r.left_column&&r.right_column?(i=(i+='<div class="cbot-generic-template-v2-table-left">')+(r.left_column||"")+'</div><div class="cbot-generic-template-v2-table-right">')+(r.right_column||"")+'</div><div class="cbot-clear"></div>':r.left_column&&!r.right_column||!r.left_column&&r.right_column?(i+='<div class="cbot-generic-template-v2-row">')+(r.right_column||r.left_column||"")+"</div>":(i+='<div class="cbot-generic-template-v2-row" style="border-top:transparent">')+(r.right_column||r.left_column||"")+"</div>":i+='<div class="cbot-generic-template-v2-row" style="border: none"></div>',i+="</div>",r.dropdown_title_exists){i=i+'<div class="cbot-generic-template-v2-dropdown-title">'+'<div class="cbot-generic-template-v2-dropdown-info">',r.sub_descriptions||(r.sub_descriptions=[]);for(let e=0;e<r.sub_descriptions.length;e++){var b,_=(b=r.sub_descriptions[e]).rows;i=i+'<div class="cbot-generic-template-v1-dropdown">'+"<div>";for(let e=0;e<_.length;e++){g=_[e];i=(i=(i=(i+='<div class="cbot-generic-template-v1-dropdown-row-container">')+'<div class="cbot-generic-template-v2-dropdown-row">'+'<div class="cbot-dropdown-list-icon"></div>')+(g.left_column||"")+"</div>")+'<div class="cbot-clear"></div>'+"</div>"}i=i+"</div>"+"</div>"}i=(i=(i+="</div>")+("<span>"+(r.dropdown_title||"")+"</span>")+'<div class="cbot-generic-template-v2-dropdown-arrow-icon">')+"</div>"+"</div>"}else i+='<div class="cbot-generic-template-v2-dropdown-title-dummy"></div>';i=(i=(i=(i=i+'<div class="cbot-generic-template-v2-dropdown-container">'+'<div class="cbot-generic-template-v2-dropdown-commitment-period">')+('<span class="cbot-generic-template-v2-dropdown-commitment-period-value">'+(r.commitment_period||"")+"</span>")+"</div>")+'<div class="cbot-generic-template-v2-dropdown-left-area">'+'<div class="cbot-generic-template-v2-dropdown-left-area-first-price-container">')+'<div class="cbot-generic-template-v2-dropdown-left-area-price">'+'<div class="cbot-generic-template-v2-dropdown-left-area-price-holder">',r.dropdown_left_big_number&&2==r.dropdown_left_big_number.length?i+='<span class="cbot-left-area-price-big-short">':i+='<span class="cbot-left-area-price-big">',i=i+(r.dropdown_left_big_number||"")+"</span>",i=r.dropdown_left_small_currency&&2<r.dropdown_left_small_currency.length?(i+='<span class="cbot-left-area-price-small">')+(r.dropdown_left_small_currency||"")+"</span>":(i+='<span class="cbot-left-area-price-small-short">')+(r.dropdown_left_small_currency||"")+"</span>",i=(i=(i=(i=(i+="</div>")+"</div>"+'<div class="cbot-generic-template-v2-dropdown-left-area-description">')+(r.dropdown_left_big_description||"")+"</div>")+"</div>"+'<div class="cbot-generic-template-v2-dropdown-left-area-second-price-container">')+'<div class="cbot-generic-template-v2-dropdown-left-area-price">'+'<div class="cbot-generic-template-v2-dropdown-right-area-price-holder">',r.dropdown_right_big_number&&2==r.dropdown_right_big_number.length?i+='<span class="cbot-left-area-price-big-short">':i+='<span class="cbot-left-area-price-big">',i=i+(r.dropdown_right_big_number||"")+"</span>",i=r.dropdown_right_small_currency&&2<r.dropdown_right_small_currency.length?(i+='<span class="cbot-left-area-price-small">')+(r.dropdown_right_small_currency||"")+"</span>":(i+='<span class="cbot-left-area-price-small-short">')+(r.dropdown_right_small_currency||"")+"</span>",i=(i=(i=(i=(i+="</div>")+"</div>"+'<div class="cbot-generic-template-v2-dropdown-left-area-description">')+(r.dropdown_right_big_description||""))+"</div>"+"</div>")+"</div>"+'<div class="cbot-generic-template-v2-dropdown-right-area">',r.dropdown_button_exists&&("web_url"==r.dropdown_button_type&&(v=getUrlTarget(r.dropdown_button_url,CHANNEL),i+='<a href="'+r.dropdown_button_url+'" target="_blank"><img style="height:38px;width:48px;" src="https://corechatbotai.turktelekom.com.tr/img/modern/actions-controls-center-to-fit-24.svg" class="Actions-Controls-center-to-fit-24"></img></a>'),"postback"==r.dropdown_button_type)&&(i+='<img class="postback" style="height:38px;width:48px;box-shadow:none;cursor:pointer" data-payload="'+r.dropdown_button_postback+'" src="https://corechatbotai.turktelekom.com.tr/img/modern/actions-controls-center-to-fit-24.svg" class="Actions-Controls-center-to-fit-24"><p id="cbot-img-button-genericv2" style="display:none">'+r.dropdown_button_title+"</p></img>"),i=(i+="</div>")+'<div class="cbot-clear"></div>'+"</div>",r.bottom_description&&(i=(i=i+'<div class="cbot-generic-template-v2-bottom-description"><img class="cbot-info-icon" src="'+staticAddress+'/img/modern/info-copy.svg">')+"<span>"+(r.bottom_description||"")+"</span></div>"),i+="</div>"}data_owl&&(i+="</div></div>"),i=i+"</div>"+"</div>"}if(i+='<div class="cbot-clear"></div>',!data_owl&&0<n.length){i+='<div class="cbot-generic-template-v2-navigator-wrapper">';for(c=0;c<Math.min(n.length,max_element_count);c++)i+='<div class="cbot-generic-template-v2-navigator-dot '+(0==c?"cbot-dot-active":"")+'" onclick="slideGenericV2Number(this,'+c+' )" style="display: '+(p&&show_more_min_elem_count<c?"none":"inline-block")+'"></div>';i+="</div>"}}else if("GENERIC_COMPONENT_V3"==e.message_type){n=e.elements;if(0<e.elements.length){i+='<div class="cbot-generic-template-v3-carousel-wrapper">',1<e.elements.length&&(i+='<div class="cbot-generic-v3-arrow left"></div><div class="cbot-generic-v3-arrow right"></div>'),i+='<div class="cbot-generic-v3-carousel" style="width:'+224*n.length+'px; position: relative;">';for(c=0;c<n.length;c++){var v,r=e.elements[c],m=(r.background_color||(r.background_color="#049ead"),r.background_color?"background-color: "+r.background_color+"; background-image: linear-gradient(135deg, rgba(0,0,0,0.25) 0%, "+r.background_color+" 50%, rgba(255,255,255,0.5) 100%);":""),f=r.image_url?"background-image: url("+r.image_url+");":"";i=(i=(i=(i=(i=(i=(i=i+('<div class="cbot-generic-template-v3" style="opacity: '+(0<c?".3":"1")+';">')+('<div class="cbot-generic-template-v3-background-holder" style="'+m+f+'">'))+('<div class="cbot-generic-template-v3-prime-title" style="visibility: '+(r.prime_title?"initial":"hidden")+'">'))+(r.prime_title||"")+"</div>")+"</div>"+'<div class="cbot-generic-template-v3-dropdown-container">')+'<div class="cbot-generic-template-v3-dropdown-left-area">'+'<div class="cbot-generic-template-v3-title">')+(r.title||"")+"</div>")+"</div>"+'<div class="cbot-generic-template-v3-dropdown-right-area">',i=(i=(i=r.dropdown_button_exists&&("web_url"==r.dropdown_button_type&&(v=getUrlTarget(r.dropdown_button_url,CHANNEL),i=(i+='<a href="#" class="cbot-generic-template-v3-dropdown-button" target="'+v+'" href="'+r.dropdown_button_url+'">')+(r.dropdown_button_title||"")+"</a>"),"postback"==r.dropdown_button_type)?(i+='<a href="#" class="cbot-generic-template-v3-dropdown-button postback" data-payload="'+r.dropdown_button_postback+'" style="font-size:'+(14<=r.dropdown_button_title.length?11:12)+'px !important" >')+(r.dropdown_button_title||"")+"</a>":i)+"</div>"+'<div class="cbot-clear"></div>')+(a?`<div class="cbot-messages-sending-time">${hours}:${minutes}</div></div>`:"</div>")+"</div>"}i=i+"</div>"+"</div>"}if(i+='<div class="cbot-clear"></div>',1<n.length){i+='<div class="cbot-generic-template-v3-navigator-wrapper">';for(let e=0;e<n.length;e++)i+='<div class="cbot-generic-template-v3-navigator-dot '+(0==e?"cbot-dot-active":"")+'" onclick="slideGenericV3Number(this,'+e+' )"></div>';i+="</div>"}}else if("LIVE_CHAT"==e.message_type)if(1<e.elements.length){n=e.elements;i+='<div class="cbot-arrow left"></div><div class="cbot-arrow right"></div><div class="cbot-card-carousel" style="width:'+255*n.length+'px; position: relative;">';for(c=0;c<n.length;c++)""==n[c].title&&(n[c].title=answerisnotdefined_message||"Answer is not defined"),l=n[c].title,i+='<div class="cbot-component generic-template" style="float:left; max-width:250px; margin-right:5px;">',n[c].image_url&&(i+='<div class="cbot-image"><img src="'+n[c].image_url+'"></div>'),n[c].subtitle&&(n[c].subtitle=numberToString((n[c]||{}).subtitle),sendUrlsToGA(n[c].subtitle)),i=(i+='<div class="cbot-description"><p class="cbot-title">'+l+'</p><p class="cbot-subtitle">'+n[c].subtitle.replace(/(\n|\\n)/g,"<br/>")+"</p></div>")+generateButtonsHTML(n[c].buttons,o.instantWrite)+"</div>";i+="</div>"}else{r=e.elements[0];i+='<div class="cbot-component'+(e.banned_message?" banned_message":" generic-template livechat")+'">',r.image_url&&(i+='<div class="cbot-image"><img src="'+r.image_url+'"></div>'),l=r.title,r.subtitle&&(r.subtitle=numberToString((r||{}).subtitle),sendUrlsToGA(r.subtitle)),i+='<div class="cbot-description"><p class="cbot-title">'+l+'</p><p class="cbot-subtitle">'+r.subtitle.replace(/(\n|\\n)/g,"<br/>")+"</p>",r.custom_livechat_box_design&&(r.connect_fail_message&&r.connect_successful_message&&(i=(i+='<p class="cbot-connect-fail-message disabled">'+r.connect_fail_message.replace(/(\n|\\n)/g,"<br/>")+"</p>")+'<p class="cbot-connect-successful-message disabled">'+r.connect_successful_message.replace(/(\n|\\n)/g,"<br/>")+"</p>"),r.connect_fail_image&&r.connect_successful_image&&(livechat_connection_images.fail=r.connect_fail_image,livechat_connection_images.success=r.connect_successful_image),r.cancel_button)&&(r.buttons=r.buttons||[],r.buttons.push({title:r.cancel_button,type:"livechat_cancel"})),i=(i+="</div>")+generateButtonsHTML(r.buttons,o.instantWrite)+"</div>"}else if("IMAGE_COMPONENT"==e.message_type){r=e.elements[0];r.url&&(cbotIsMobile.any()?i+='<div class="cbot-tooltip" style="opacity: 1; z-index: 1;"><div onclick="cbotModalImage(\''+(r.url||"")+'\')"><div class="cbot-image" style="margin-bottom: 0px !important;"><img src="'+r.url+'"></div>':i+='<div class="cbot-tooltip" style="opacity: 1; z-index: 1;"><div onclick="openMiniWeb(\'image\',\''+(r.url||"")+'\')"><div class="cbot-image" style="margin-bottom: 0px !important;"><img src="'+r.url+'"></div></div>'),i+=generateButtonsHTML(r.buttons,o.instantWrite)}else if("DONUT_COMPONENT"==e.message_type){var n=[{tab_title:"İnternet",carousel:[{donut_rate:120,donut_color:"red",donut_rate_share:1,donut_rate_denominator:360,donut_title:"490 / 500",donut_subtitle:"SMS",title:"title",subtitle:"Haftalık 2GB ",description:"Yenilenme Tarihi"},{donut_rate:120,donut_color:"red",donut_rate_share:1,donut_rate_denominator:360,donut_title:"490 / 500",donut_subtitle:"SMS",title:"title",subtitle:"Haftalık 2GB ",description:"Yenilenme Tarihi"}]},{tab_title:"SMS",donut_rate_share:120,donut_rate_denominator:360,donut_title:"490 / 500",donut_subtitle:"SMS",title:"title",subtitle:"Haftalık 2GB ",description:"Yenilenme Tarihi"},{tab_title:"SMS",carousel:[{donut_rate:120,donut_color:"red",donut_rate_share:1,donut_rate_denominator:360,donut_title:"490 / 500",donut_subtitle:"SMS",title:"title",subtitle:"Haftalık 2GB ",description:"Yenilenme Tarihi"},{donut_rate:120,donut_color:"red",donut_rate_share:1,donut_rate_denominator:360,donut_title:"490 / 500",donut_subtitle:"SMS",title:"title",subtitle:"Haftalık 2GB ",description:"Yenilenme Tarihi"}]}],h=(n=(n=e.elements).map(function(e){return e.tabId=randomString(),e.tab_title=e.tab_title||"",e.carousel=(e.carousel||[]).map(e=>("0"==e.donut_rate_share&&"0"==e.donut_rate_denominator&&(e.donut_rate_share=1,e.donut_rate_denominator=1),e.donut_title=e.donut_title||"",e.donut_subtitle=e.donut_subtitle||"",e.donut_color=e.donut_color||"#000000",e.title=e.title||"",e.donut_rate=parseFloat(e.donut_rate_share||0)/parseFloat(e.donut_rate_denominator||1)*360,e.subtitle=e.subtitle||"",e.description=e.description||"",e)),e}),i=i+'<div class="cbot-donut-component-container">'+'<div class="cbot-donut-component-tab-container">',randomString()),y=randomString();for(let o=0;o<n.length;o++){const r=n[o];let e="",t="";(e=0==o?"active":"")&&(t="border-left: 3px solid "+r.carousel[0].donut_color+";");var w="cbot-"+parseInt(100/n.length)+"-width";i=(i+='<a href="#" class="'+w+" cbot-donut-component-tab "+h+" "+e+'"  onclick="cbotDonutOpenTab(event,\''+r.tabId+"','"+h+"','"+y+"','"+(r.carousel[0].donut_color||"#CCC")+'\')" style="'+(r.tab_title?"":"border:0px;")+t+'">')+r.tab_title+"</a>"}i=(i+='<div class="cbot-clear"></div>')+"</div>"+'<div class="cbot-donut-component-content-container">';for(let t=0;t<n.length;t++){const r=n[t];let e="";e=0==t?"display:block;":"display:none;",i=(i+='<div id="'+r.tabId+'" class="'+y+'" style="'+e+'">')+(data_owl?'<div class="cbot-donut-carousel-wrapper cbot-owl-carousel">':'<div class="cbot-donut-carousel-wrapper">');for(let e=0;e<r.carousel.length;e++){var k=r.carousel[e];i+='<div class="cbot-donut-component-element">',(k.top_area_info||k.top_area_title||k.top_area_date)&&(i+='<div class="cbot-donut-component-top-area">',k.top_area_info&&(i+='<div class="cbot-donut-component-top-area-info" style="color: '+k.donut_color+'"> '+k.top_area_info+" </div>"),k.top_area_title&&(i+='<div class="cbot-donut-component-top-area-title">'+k.top_area_title+" </div>"),k.top_area_date&&(i+='<div class="cbot-donut-component-top-area-date" style="color: '+k.donut_color+";background-color: "+k.donut_date_background_color+'"> '+k.top_area_date+" </div>"),i+="</div>"),i=(i=(i=(i=(i=(i=(i+='<div class="cbot-donut-component-left-area">')+('<div class="cbot-donut-chart" style="background-image: conic-gradient('+k.donut_color+" 0 "+k.donut_rate+'deg, #dee3ed 0 0)">'))+'    <div style="width: 90%; height: 90%; background-color: white; border-radius: 50%;">'+'<span class="cbot-donut-text-container">')+('<span class="cbot-donut-inner-text-title">'+k.donut_title+"</span>")+"<br>")+('<span class="cbot-donut-inner-text-subtitle" style="color: '+k.donut_color+'">'+k.donut_subtitle+"</span>"))+"</span>"+"    </div>")+"</div>"+"</div>",(k.right_area_title1||k.right_area_subtitle1||k.right_area_title2||k.right_area_subtitle2)&&(i+='<div class="cbot-donut-component-right-area">',(k.right_area_title1||k.right_area_subtitle1)&&(i+='<div class="cbot-donut-component-right-area-top">',k.right_area_title1&&(i+='<span class="cbot-donut-right-text-title">'+k.right_area_title1+"</span>"),k.right_area_subtitle1&&(i+='<span class="cbot-donut-right-text-subtitle">'+k.right_area_subtitle1+"</span>"),i+="</div>"),(k.right_area_title2||k.right_area_subtitle2)&&(i+='<div class="cbot-donut-component-right-area-bottom">',k.right_area_title2&&(i+='<span class="cbot-donut-right-text-title">'+k.right_area_title2+"</span>"),k.right_area_subtitle2&&(i+='<span class="cbot-donut-right-text-subtitle">'+k.right_area_subtitle2+"</span>"),i+="</div>"),i+="</div>"),(k.bottom_area_left||k.bottom_area_right)&&(i+='<div class="cbot-donut-component-bottom-area">',k.bottom_area_left&&(i+='<div class="cbot-donut-component-bottom-area-left">'+k.bottom_area_left+"</div>"),k.bottom_area_right&&(i+='<div class="cbot-donut-component-bottom-area-right" style="color: '+k.donut_color+'">'+k.bottom_area_right+"</div>"),i+="</div>"),i=i+'<div class="cbot-clear"></div>'+"</div>"}i+="</div>",data_owl||(i=(i+='<div class="cbot-donut-navigation-holder"><div class="cbot-donut-arrow arrow-left"></div>')+'<div class="cbot-donut-arrow-text" data-current="1" data-length="'+r.carousel.length+'"></div><div class="cbot-donut-arrow arrow-right"></div></div>'),i+="</div>"}i=i+(a?`<div class="cbot-messages-sending-time">${hours}:${minutes}</div></div>`:"</div>")+"</div>"}else if("VIDEO_COMPONENT"==e.message_type){r=e.elements[0];r.url&&(r.url.includes("youtube")?i+='<div class="cbot-image" style="margin-bottom: 0px !important; max-width:262px; max-height:200px"><iframe width="262" height="200" src="'+r.url+'" frameborder="0"></iframe></div>':r.url.includes("facebook")?i+='<div class="cbot-image" style="margin-bottom: 0px !important; max-height:200px"><iframe src="https://www.facebook.com/plugins/video.php?height=200&href='+r.url+'&show_text=false&width=200&t=0" width="200" height="200" style="border:none;overflow:hidden"scrolling="no" frameborder="0" allowfullscreen="true" allow="autoplay; clipboard-write; encrypted-media; picture-in-picture; web-share" allowFullScreen="true"></iframe></div>':i+='<div class="cbot-image" style="margin-bottom: 0px !important; max-height:200px"><video width="200" height="200" controls><source src="'+r.url+'" type="video/mp4"></video></div>')}else if("FILE_COMPONENT"==e.message_type)i=i+('<div class="cbot-component generic-template"><a style="cursor:pointer;" href="'+e.url+'" target="_blank"><div style="float:left"><img src="'+staticAddress+'/img/cbot-file-icon.png" style="width:16px; box-shadow:none;"></div><div style="float:left; padding: 0 5px; color:#fff; max-width:200px;">'+e.filename||e.description+'</div><div style="float:right" style="pointer:cursor;"><img src="'+staticAddress+'/img/cbot-download-icon.png" style="width:16px; box-shadow:none;" /></div></a></div>')+'<div class="cbot-description">',e.name&&(i+='<p class="cbot-title">'+(e.name||"")+"</p>"),e.address&&(i+='<p class="cbot-subtitle">'+(e.address||"").replace(/(\n|\\n)/g,"<br/>")+"</p></div>"),i+="</a></div>";else if("LOCATION_COMPONENT"==e.message_type)i=(i+='<div class="cbot-component generic-template"><a href="https://www.google.com.tr/maps/place/'+e.lat+","+e.lng+'" target="_blank">')+'<div class="cbot-image"><img style="cursor: pointer;" src="https://static-maps.yandex.ru/1.x/?lang=tr-TR&ll='+e.lng+","+e.lat+"&z=15&l=map&size=300,200&pt="+e.lng+","+e.lat+',pmgrm"></div>',e.address&&(e.address=numberToString((e||{}).address),sendUrlsToGA(e.address)),i+='<div class="cbot-description">',e.name&&(i+='<p class="cbot-title">'+(e.name||"")+"</p>"),e.address&&(i+='<p class="cbot-subtitle">'+(e.address||"").replace(/(\n|\\n)/g,"<br/>")+"</p></div>"),i=(i+="</a>")+generateButtonsHTML([{type:"mini_web",data_type:"location",title:"Mini-map'te Görüntüle",url:"https://www.google.com.tr/maps/place/"+e.lat+","+e.lng,lng:e.lng,lat:e.lat},{type:"web_url",title:"Haritada Görüntüle",url:"https://www.google.com.tr/maps/place/"+e.lat+","+e.lng}],o.instantWrite)+"</div>";else if("LIST_COMPONENT"==e.message_type){n=e.elements;i+='<div class="cbot-component list-template">';for(c=0;c<n.length;c++){i+=0==c?'<div class="cbot-list-item" style="border-top:none; margin-top:-10px;">':'<div class="cbot-list-item">',n[c].image_url?i=i+('<div class="cbot-list-item-image"><img src="'+n[c].image_url)+'"></div><div class="cbot-list-item-description">':i+='<div class="cbot-list-item-description" style="width:100%;">',l=""+n[c].title,n[c].subtitle&&(n[c].subtitle=numberToString((n[c]||{}).subtitle),sendUrlsToGA(n[c].subtitle)),i+='<p class="cbot-list-item-title">'+l+'</p><p class="cbot-list-item-text">'+n[c].subtitle.replace(/(\n|\\n)/g,"<br/>")+"</p>";for(var T=n[c].buttons,S=0;T&&S<T.length;S++)text_button_class=suggestion_button_style=triple_button_class=triple_button_css="","web_url"==T[S].type?i+=renderPostMessageButton(T[S].url,T[S].title,e.message_type):"phone_number"==T[S].type?i+='<a href="tel:'+(T[S].payload||T[S].phone_number)+'"class="cbot-list-item-button" onclick="clickTheURLs(this)">'+T[S].title+"</a>":"account_link"==T[S].type?i+='<div class="cbot-button cbot-list-item-button" onclick="waitForLogin(); openMidPagePopup(\''+(T[S].url||clients.login_url||"")+"')\">"+(T[S].title||"Giriş için Tıklayın")+"</div>":"location"==T[S].type?i+='<a href="#" class="cbot-button cbot-list-item-button cbot-location" onclick="shareLocation()">'+T[S].title+"</a>":"file_download"==T[S].type?i+='<a href="'+T[S].url+'" target="_blank" class="cbot-list-item-button" onclick="clickTheURLs(this)">'+T[S].title+"</a>":"file_upload"==T[S].type?(i+="<input id='cbot-attachment-file-input-"+uploadIndex+"' accept='"+T[S].mimetypes.map(function(e){return e.mimetype}).join(",")+'\' type=\'file\' hidden/><a href="#" class="cbot-button cbot-list-item-button fileupload" data-payload="'+uploadIndex+'">'+T[S].title+"</a>",uploadIndex++):i+='<a href="#" class="cbot-button cbot-list-item-button postback" data-full-action=\''+JSON.stringify(T[S]||{})+"'>"+T[S].title+"</a>";i+='</div><div style="clear:both;"></div></div>'}i+="</div>"}else if("COMBOBOX_COMPONENT"==e.message_type)i=i+("<span>"+e.message)+'</span> <div class="cbot-dropdown"><input type="text" placeholder="Arama.." class="cbot-dropdown-input"><div id="myDropdown" class="cbot-dropdown-content">',e.combobox_items.forEach(function(e){i+='<a type="button" class="cbot-combobox" data-payload="'+e+'">'+e+"</a>"}),i+=" </div> </div> ";else if("BUTTON_COMPONENT"==e.message_type){T=e.buttons||[];e.from_file&&(Array.isArray(e.buttons)||(e.buttons=[]),T=[{type:"mini_web",data_type:"html",title:"Mini-web'te görüntüle",html:b64encode(e.message)}].concat(T)),sendUrlsToGA(e.message),i+='<div class="cbot-component cbot-button-template">',currentTime=new Date,hours=(currentTime.getHours()<10?"0":"")+currentTime.getHours(),minutes=(currentTime.getMinutes()<10?"0":"")+currentTime.getMinutes(),i=(i+=a?'<div class="cbot-description">'+e.message+`<div class="cbot-messages-sending-time">${hours}:${minutes}</div></div>`:'<div class="cbot-description">'+e.message+"</div>")+"</div>"+'<div class="cbot-clear"></div>',e.is_survey&&e.type?i+='<div class="cbot-survey-type survey-'+e.type+'">'+generateButtonsHTML(T,o.instantWrite,e.suggestion_type)+"</div>":i+=generateButtonsHTML(T,o.instantWrite,e.suggestion_type)}else if("TRANSACTION_COMPONENT"==e.message_type){i=i+('<div class="cbot-component generic-template"><div class="cbot-description">'+e.message+"</div>")+'<hr class="cbot-dashed-hr" />';for(n=e.elements||[],c=0;c<n.length;c++){var $=(n[c].subtitle||"").replace(/\n/g,"<br />");i=i+('<div class="cbot-txn-title">'+n[c].title+"</div>")+('<div class="cbot-txn-subtitle">'+$+"</div>"),n.length!=c+1&&(i+='<hr class="cbot-solid-hr" />')}i=i+generateButtonsHTML(e.buttons,o.instantWrite)+"</div>"}else if("LIST_NEW_COMPONENT"==e.message_type){i=i+('<div class="cbot-component generic-template"><div class="cbot-description">'+e.message+"</div>")+'<hr class="cbot-dashed-hr" />';for(n=e.elements||[],c=0;c<n.length;c++){$=(n[c].subtitle||"").replace(/\n/g,"<br />");i=(i=(i=(i=(i=(i=i+'<div class="cbot-list-new-container">'+'<div style="display:block;float:left">')+('<div class="cbot-list-new-img" style="background-image:url(.'+n[c].image_url+')"></div>'))+"</div>"+'<div style="display:block;float:left;width:calc(100% - 50px)">')+('<div class="cbot-list-new-title">'+n[c].title+"</div>"))+('<div class="cbot-list-new-subtitle">'+$+"</div>")+"</div>")+'<div style="clear:both"></div>'+"</div>",n.length,i+='<hr class="cbot-dashed-hr" />'}i+="</div>"}else if("CURRENCY_COMPONENT"==e.message_type)i=i+('<div class="cbot-component generic-template"><div class="cbot-description"><p class="cbot-subtitle">'+e.message)+"</p></div>";else{if("PREVIEW_COMPONENT"==e.message_type)return""+((r=e.elements[0]).message||"").replace(/(\n|\\n)/g,"<br/>");if("SURVEY_STAR_COMPONENT"==e.message_type)i=(i=(i=(i=(i=(i=(i=(i=(i=(i=i+("<p>"+e.message)+'</p>      <div class="cbot-rating-group">')+'      <label class="cbot-rating-label postback" data-payload="0" for="cbot-rating-'+ ++ratingSelector+'" style="display: none;">              <i class="cbot-rating-star cbot-icon-star"></i></label>')+'      <input class="cbot-rating-input" name="rating'+ratingGroup+'" id="cbot-rating-'+ratingSelector+'" value="0" type="radio" style="display: none;" checked>      <label class="cbot-rating-label postback" data-payload="1" for="cbot-rating-'+ ++ratingSelector+'">')+'              <i class="cbot-rating-star cbot-icon-star"></i></label>      <input class="cbot-rating-input" name="rating'+ratingGroup+'" id="cbot-rating-'+ratingSelector+'" value="1" type="radio">')+'      <label class="cbot-rating-label postback" data-payload="2" for="cbot-rating-'+ ++ratingSelector+'">              <i class="cbot-rating-star cbot-icon-star"></i></label>')+'      <input class="cbot-rating-input" name="rating'+ratingGroup+'" id="cbot-rating-'+ratingSelector+'" value="2" type="radio">      <label class="cbot-rating-label postback" data-payload="3" for="cbot-rating-'+ ++ratingSelector+'">')+'              <i class="cbot-rating-star cbot-icon-star"></i></label>      <input class="cbot-rating-input" name="rating'+ratingGroup+'" id="cbot-rating-'+ratingSelector+'" value="3" type="radio">')+'      <label class="cbot-rating-label postback" data-payload="4" for="cbot-rating-'+ ++ratingSelector+'">              <i class="cbot-rating-star cbot-icon-star"></i></label>')+'      <input class="cbot-rating-input" name="rating'+ratingGroup+'" id="cbot-rating-'+ratingSelector+'" value="4" type="radio">      <label class="cbot-rating-label postback" data-payload="5" for="cbot-rating-'+ ++ratingSelector+'">')+'              <i class="cbot-rating-star cbot-icon-star"></i></label>      <input class="cbot-rating-input" name="rating'+ratingGroup+'" id="cbot-rating-'+ratingSelector+'" value="5" type="radio">',"1-10"==e.type&&(i=(i=(i=(i=(i=(i=(i=(i+='      <label class="cbot-rating-label postback" data-payload="6" for="cbot-rating-'+ ++ratingSelector+'">')+'              <i class="cbot-rating-star cbot-icon-star"></i></label>      <input class="cbot-rating-input" name="rating'+ratingGroup+'" id="cbot-rating-'+ratingSelector+'" value="6" type="radio">')+'      <label class="cbot-rating-label postback" data-payload="7" for="cbot-rating-'+ ++ratingSelector+'">              <i class="cbot-rating-star cbot-icon-star"></i></label>')+'      <input class="cbot-rating-input" name="rating'+ratingGroup+'" id="cbot-rating-'+ratingSelector+'" value="7" type="radio">      <label class="cbot-rating-label postback" data-payload="8" for="cbot-rating-'+ ++ratingSelector+'">')+'              <i class="cbot-rating-star cbot-icon-star"></i></label>      <input class="cbot-rating-input" name="rating'+ratingGroup+'" id="cbot-rating-'+ratingSelector+'" value="8" type="radio">')+'      <label class="cbot-rating-label postback" data-payload="9" for="cbot-rating-'+ ++ratingSelector+'">              <i class="cbot-rating-star cbot-icon-star"></i></label>')+'      <input class="cbot-rating-input" name="rating'+ratingGroup+'" id="cbot-rating-'+ratingSelector+'" value="9" type="radio">      <label class="cbot-rating-label postback" data-payload="10" for="cbot-rating-'+ ++ratingSelector+'">')+'              <i class="cbot-rating-star cbot-icon-star"></i></label>      <input class="cbot-rating-input" name="rating'+ratingGroup+'" id="cbot-rating-'+ratingSelector+'" value="10" type="radio">'),ratingGroup++,i+="</div>";else if("SURVEY_COLORFUL_COMPONENT"==e.message_type)i=i+("<p>"+e.message)+'</p><div class="cbot-colorful-radio-main-container"> <label class="cbot-colorful-radio-container cbot-colorful-radio-container-styling-0">    <input type="radio" name="radio">    <span class="cbot-colorful-radio-span cbot-colorful-radio-span-styling-0 postback" data-payload="0">0</span></label> <label class="cbot-colorful-radio-container cbot-colorful-radio-container-styling-1">    <input type="radio" name="radio">    <span class="cbot-colorful-radio-span cbot-colorful-radio-span-styling-1 postback" data-payload="1">1</span></label><label class="cbot-colorful-radio-container cbot-colorful-radio-container-styling-2">    <input type="radio" name="radio">    <span class="cbot-colorful-radio-span cbot-colorful-radio-span-styling-2 postback" data-payload="2">2</span></label><label class="cbot-colorful-radio-container cbot-colorful-radio-container-styling-3">    <input type="radio" name="radio">    <span class="cbot-colorful-radio-span cbot-colorful-radio-span-styling-3 postback" data-payload="3">3</span></label><label class="cbot-colorful-radio-container cbot-colorful-radio-container-styling-4">    <input type="radio" name="radio">    <span class="cbot-colorful-radio-span cbot-colorful-radio-span-styling-4 postback" data-payload="4">4</span></label><label class="cbot-colorful-radio-container cbot-colorful-radio-container-styling-5">    <input type="radio" name="radio">    <span class="cbot-colorful-radio-span cbot-colorful-radio-span-styling-5 postback" data-payload="5">5</span></label><label class="cbot-colorful-radio-container cbot-colorful-radio-container-styling-6">    <input type="radio" name="radio">    <span class="cbot-colorful-radio-span cbot-colorful-radio-span-styling-6 postback" data-payload="6">6</span></label><label class="cbot-colorful-radio-container cbot-colorful-radio-container-styling-7">    <input type="radio" name="radio">    <span class="cbot-colorful-radio-span cbot-colorful-radio-span-styling-7 postback" data-payload="7">7</span></label><label class="cbot-colorful-radio-container cbot-colorful-radio-container-styling-8">    <input type="radio" name="radio">    <span class="cbot-colorful-radio-span cbot-colorful-radio-span-styling-8 postback" data-payload="8">8</span></label><label class="cbot-colorful-radio-container cbot-colorful-radio-container-styling-9">    <input type="radio" name="radio">    <span class="cbot-colorful-radio-span cbot-colorful-radio-span-styling-9 postback" data-payload="9">9</span></label><label class="cbot-colorful-radio-container cbot-colorful-radio-container-styling-10">    <input type="radio" name="radio">    <span class="cbot-colorful-radio-span cbot-colorful-radio-span-styling-10 postback" data-payload="10">10</span></label>   </div><div style="clear:both"></div>';else if("TEXT"==e.message_type)i+='<span class="cbot-text">'+e.message+"</span>";else if(e.message&&e.message.quick_replies)l=""+e.message.text,i=(i+='<div class="cbot-component generic-template"><div class="cbot-description"><p class="cbot-subtitle">'+l+"</p></div>")+generateButtonsHTML(e.message.quick_replies,o.instantWrite);else if("template"===e.message.attachment.type)if(l=""+e.message.attachment.payload.text,"button"===e.message.attachment.payload.template_type)sendUrlsToGA(l),i=(i+='<div class="cbot-component generic-template"><div class="cbot-description"><p class="cbot-subtitle">'+l+"</p></div>")+generateButtonsHTML(e.message.attachment.payload.buttons,o.instantWrite);else if("generic"===e.message.attachment.payload.template_type)if(1<e.message.attachment.payload.elements.length){n=e.message.attachment.payload.elements;i+='<div class="cbot-arrow left"></div><div class="cbot-arrow right"></div><div class="cbot-card-carousel" style="width:'+224*n.length+'px; position: relative;">';for(c=0;c<n.length;c++)l=""+n[c].title,i+='<div class="cbot-component generic-template" style="float:left; max-width:250px; margin-right:10px;">',n[c].image_url&&(i+='<div class="cbot-image"><img src="'+n[c].image_url+'"></div>'),n[c].subtitle&&(n[c].subtitle=numberToString((n[c]||{}).subtitle),sendUrlsToGA(n[c].subtitle)),i=(i+='<div class="cbot-description"><p class="cbot-title">'+l+'</p><p class="cbot-subtitle">'+n[c].subtitle.replace(/(\n|\\n)/g,"<br/>")+"</p></div>")+generateButtonsHTML(n[c].buttons,o.instantWrite)+"</div>";i+="</div>"}else{r=e.message.attachment.payload.elements[0];i+='<div class="cbot-component generic-template">',r.image_url&&(i+='<div class="cbot-image"><img src="'+r.image_url+'"></div>'),l=""+r.title,r.subtitle&&(r.subtitle=numberToString((r||{}).subtitle),sendUrlsToGA(r.subtitle)),i=(i+='<div class="cbot-description"><p class="cbot-title">'+l+'</p><p class="cbot-subtitle">'+r.subtitle.replace(/(\n|\\n)/g,"<br/>")+"</p></div>")+generateButtonsHTML(r.buttons,o.instantWrite)+"</div>"}else if("list"===e.message.attachment.payload.template_type){n=e.message.attachment.payload.elements;i+='<div class="cbot-component list-template">';for(c=0;c<n.length;c++){i+=0==c?'<div class="cbot-list-item" style="border-top:none; margin-top:-10px;">':'<div class="cbot-list-item">',n[c].image_url?i=i+('<div class="cbot-list-item-image"><img src="'+n[c].image_url)+'"></div><div class="cbot-list-item-description">':i+='<div class="cbot-list-item-description" style="width:100%;">',l=""+n[c].title,n[c].subtitle&&(n[c].subtitle=numberToString((n[c]||{}).subtitle),sendUrlsToGA(n[c].subtitle)),i+='<p class="cbot-list-item-title">'+l+'</p><p class="cbot-list-item-text">'+n[c].subtitle.replace(/(\n|\\n)/g,"<br/>")+"</p>";for(T=n[c].buttons,S=0;T&&S<T.length;S++)"web_url"==T[S].type?i+=renderPostMessageButton(T[S].url,T[S].title,e.message.attachment.payload.template_type):"phone_number"==T[S].type?i+='<a href="tel:'+(T[S].payload||T[S].phone_number)+'" target="_blank" class="cbot-list-item-button" onclick="clickTheURLs(this)">'+T[S].title+"</a>":"file_download"==T[S].type?i+='<a href="'+T[S].url+'" target="_blank" class="cbot-list-item-button" onclick="clickTheURLs(this)">'+T[S].title+"</a>":"file_upload"==T[S].type?(i+="<input id='cbot-attachment-file-input-"+uploadIndex+"' accept='"+T[S].mimetypes.map(function(e){return e.mimetype}).join(",")+'\' type=\'file\' hidden/><a href="#" class="cbot-button cbot-list-item-button fileupload" data-payload="'+uploadIndex+'">'+T[S].title+"</a>",uploadIndex++):i+='<div class="cbot-button cbot-list-item-button postback">'+T[S].title+"</div>";i+='</div><div style="clear:both;"></div></div>'}i+="</div>"}}return i}function appendTypingIconToDialogBox(e,t){t=t||null,""!=e&&null!=e?botlanguage&&"tr"!=botlanguage?$("#cbot-chat").append('<li class="cbot-other cbot-typing"><div class="cbot-msg" style="height: 30px;">'+e+' is typing <div class="cbot-typing-loader"></div></div></li>'):$("#cbot-chat").append('<li class="cbot-other cbot-typing"><div class="cbot-msg" style="height: 30px;">'+e+' yazıyor <div class="cbot-typing-loader"></div></div></li>'):($("#cbot-chat").append('<li class="cbot-other cbot-typing"><div class="cbot-msg" style="height: 20px;"><div class="cbot-typing-loader"></div></div></li>'),t||($("#cbot-form-message").attr("disabled",!0),$("#cbot-send-button").attr("disabled",!0),$("#cbot-form-message").val("Yazıyor..."),$(".cbot-refresh-button").css("opacity","0.5"),$(".cbot-refresh-button").css("pointer-events","none"))),scrollChatScreen(100)}function cbotModalImage(e){cbotModal.style.display="block",cbotModalImg.src=e}function showExitSurvey(){return!showedSurvey&&exitSurvey?LIVE_CHAT&&isLive?(closeLivechat(!0),{status:!1,is_livechat_closed:!0}):(surveyTrigger(exitSurvey,userId,!0),{status:!0,is_livechat_closed:!1}):{status:!1,is_livechat_closed:!1}}function handleExitSurveyAnswer(e,t={}){if(e!=(exitSurvey||{}).id)return!1;{let e=0;return t&&t.is_survey_feedback&&Array.isArray(t.message)&&0<t.message.length&&(e=parseInt(exit_survey_feedback_response_display_time)||3e3,appendMessageToDialogBox(t.message)),setTimeout(()=>{$("#cbot-close-icon-new").click(),exitSurvey&&exitSurvey.do_not_clear_chat_screen_after_vote?reset(exitSurvey.do_not_clear_chat_screen_after_vote):reset()},e),!(exitSurvey=null)}}function surveyTrigger(o,a,s=!1){clearSurveyTimeout(),!showedSurvey&&o&&(Array.isArray(o)&&(o=o[0]),surveyTimeout=setTimeout(function(){var e={};if("STAR"==o.show_type)e={message_type:"SURVEY_STAR_COMPONENT",type:o.type,message:o.question,buttons:[]};else if("0-10Colorful"==o.show_type)e={message_type:"SURVEY_COLORFUL_COMPONENT",type:o.type,message:o.question,buttons:[]};else for(var e={message_type:"BUTTON_COMPONENT",type:o.type,message:o.question,buttons:[]},t=0;t<o.buttons.length;t++)e.buttons.push({type:"postback",title:o.buttons[t],payload:o.buttons[t]});!s&&isLive||(o.show_as_popup&&!isWidgetOpen&&starAnketShow(o),e.is_survey=!0,appendMessageToDialogBox(e,"cbot-other","SURVEY",{notification:o.question},function(){setClickEventToInteractiveButtons(a)}),o.survey_from_agent||(showedSurvey=o),sendCustomPostMessage("CBOT_SURVEY_SENT_TO_USER",o))},1e3*(o.show_when_close?0:o.delay)))}function clearSurveyTimeout(){surveyTimeout&&(clearTimeout(surveyTimeout),surveyTimeout=null)}function addSurveyRequestData(e){return showedSurvey&&(sentSurvey?hasSurveyFeedback&&sentSurvey&&!sentSurveyFeedback&&(sentSurveyFeedback=!0,e.is_survey_feedback=!0,e.survey_id=showedSurvey.id,e.agent_id=agentId||showedSurvey.agent_id):(e.is_survey=!0,e.survey_id=showedSurvey.id,e.agent_id=agentId||showedSurvey.agent_id,sentSurvey=!0)),e}function reset(e=!1){cbotClearUserDialog(null,e),sentSurvey=firstLoad=!(welcomeMessageSent=!(showedSurvey=null))}function getParameterByName(e,t){t=t||window.location.href,e=e.replace(/[\[\]]/g,"\\$&");e=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return e?e[2]?decodeURIComponent(e[2].replace(/\+/g," ")):"":null}function hasAttributeOnScript(e){return!!document.getElementById("cbot-widget-script")&&document.getElementById("cbot-widget-script").hasAttribute(e)}function getParameterFromScript(e){var t=document.getElementById("cbot-widget-script");return t&&t.getAttribute(e)?t.getAttribute(e):(t=document.getElementById("cbot-"+e))&&t.value||""}function generateButtonsHTML(e,t,o=!1){for(var a='<div class="cbot-buttons">',s=0;e&&s<e.length;s++){text_button_class=suggestion_button_style=triple_button_class=triple_button_css="";var i,n=o?"cbot-button-suggestion":"cbot-button";e[s].theme=e[s].theme||"",0==o&&(e[s].theme="cbot-secondary"),"web_url"==e[s].type?(gtag("event","cbot",{event_category:"cbot-button",event_action:e[s].title,event_label:e[s].url}),a+=renderPostMessageButton(e[s].url,e[s].title,o?n+e[s].theme:n+" "+e[s].theme)):"iframe_button"==e[s].type?(e[s].auto_open&&firstMessageSent&&!t&&openMidPagePopup(e[s].url),gtag("event","cbot",{event_category:"cbot-button",event_action:e[s].title,event_label:e[s].url}),a+='<a href="#" class="'+n+" "+e[s].theme+"\"  onclick=openMidPagePopup('"+e[s].url+"')>"+e[s].title+"</a>"):"mini_web"==e[s].type?(gtag("event","cbot",{event_category:"cbot-button",event_action:e[s].title,event_label:e[s].url}),i={},e[s].lng&&e[s].lat&&(i.lng=e[s].lng,i.lat=e[s].lat),e[s].html&&(i.html=e[s].html),i=JSON.stringify(i),a+='<a href="#" class="'+n+"\"  onclick=openMiniWeb('"+e[s].data_type+"','"+e[s].url+"','"+i+"')>"+e[s].title+"</a>"):"phone_number"==e[s].type?(e[s].payload&&(e[s].payload=e[s].payload.replace(/\s+/g,"")),e[s].phone_number&&(e[s].phone_number=e[s].phone_number.replace(/\s+/g,"")),gtag("event","cbot",{event_category:"cbot-button",event_action:e[s].title,event_label:e[s].payload||e[s].phone_number}),a+="<a onclick=\"windowOpen('tel:"+(e[s].payload||e[s].phone_number)+"', '_self')\" class=\""+n+" "+e[s].theme+'">'+e[s].title+"</a>"):"account_link"==e[s].type?(gtag("event","cbot",{event_category:"cbot-button",event_action:e[s].title,event_label:e[s].url}),a+='<a href="#" class="'+n+" "+e[s].theme+'" onclick="waitForLogin(); openMidPagePopup(\''+(e[s].url||clients.login_url||"")+"',true)\">"+(e[s].title||"Giriş için Tıklayın")+"</a>"):"location"==e[s].type?(gtag("event","cbot",{event_category:"cbot-button",event_action:"SHARE_LOCATION",event_label:e[s].title}),a+='<a href="#" class="'+n+" "+e[s].theme+' cbot-location" onclick="shareLocation()">'+e[s].title+"</a>"):"file_download"==e[s].type?(gtag("event","cbot",{event_category:"cbot-button",event_action:e[s].title,event_label:e[s].url}),a+='<a href="#" class="'+n+" "+e[s].theme+'" onclick="windowOpen(\''+e[s].url+"','_blank');clickTheUrlsDirect('"+e[s].url+"')\">"+e[s].title+"</a>"):"file_upload"==e[s].type?(gtag("event","cbot",{event_category:"cbot-button",event_action:e[s].title,event_label:e[s].url}),a+="<input id='cbot-attachment-file-input-"+uploadIndex+"' accept='"+e[s].mimetypes.map(function(e){return e.mimetype}).join(",")+"' type='file' hidden/><a href=\"#\" class=\""+n+" fileupload "+e[s].theme+'" data-payload="'+uploadIndex+'">'+e[s].title+"</a>",e[s].title,uploadIndex++):"livechat_cancel"==e[s].type?(gtag("event","cbot",{event_category:"cbot-button",event_action:e[s].title}),a+='<a href="#" class="'+n+" "+e[s].theme+' cbot-livechat-cancel">'+e[s].title+"</a>"):(gtag("event","cbot",{event_category:"cbot-button",event_action:e[s].title,event_label:"postback"}),a+='<a href="#" class="'+n+" "+e[s].theme+' postback" data-payload="'+(e[s].payload||e[s].title)+"\" data-full-action='"+JSON.stringify(e[s]||{})+"'>"+e[s].title+"</a>")}return a+"</div>"}var agentId=null;function soc_survey(){LIVE_CHAT&&socket.on("cbot_survey",function(e){exitSurvey=e.exit_survey,e.survey?e.client_id==userId&&(e.IsSurvey&&1==e.IsSurvey?(surveyTrigger(e.survey[0],userId,!0),sentSurvey=!1,triggerTimingResponses(e)):(appendMessageToDialogBox(e.survey_message,"cbot-other",null,{notification:e.survey_message},function(){}),agentId=null),setisLiveTLS(isLive=setIsLive(!1))):exitSurvey&&showExitSurvey()})}var send_message_is_active_flag=!1,WAITING_FOR_LOGIN=!1,login_poll_counter=0;function waitForLogin(){if(!WAITING_FOR_LOGIN){for(var e={"Content-Type":"application/json","CBot-Token":"evsx7Tkgv5ycqZbSXV1GiAp4O8NfSJHx","CBOT-URL":generateCBOTURL(location.href)},t=clients.gateway_custom_headers||[],o=0;o<t.length;o++){var a=t[o];e[a.key]=a.value}WAITING_FOR_LOGIN=!0,$.ajax({url:rootAddress+"/login/wait/"+CLIENT,type:"POST",timeout:24e4,headers:e,data:JSON.stringify({client:CLIENT,user_id:userId,session_id:cbotSessionId,referrer:CHANNEL||"WIDGET"}),success:function(t){if(WAITING_FOR_LOGIN=!1,userLoggedInCallback(),t&&t.messages)for(let e=0;e<t.messages.length;e++)appendMessageToDialogBox(t.messages[e],"cbot-other",t.category,{notification:t.messages[e]},function(){setClickEventToInteractiveButtons(userId)});setisLiveTLS(isLive=setIsLive(t.live_chat)),isLive&&(FIRST_LIVE_MESSAGE=!0,socket_widget(t.message)),t.send_message&&($("#cbot-form-message").attr("disabled",!0),$("#cbot-send-button").attr("disabled",!0),$("#cbot-form-message").val("Yazıyor..."),appendTypingIconToDialogBox(""),send_message_is_active_flag=!0,sendPost({userId:userId,sessionId:cbotSessionId,message:t.send_message},function(e){setisLiveTLS(isLive=setIsLive(e.live_chat)),isLive&&(FIRST_LIVE_MESSAGE=!0,socket_widget(e.message.message)),handleMessageArea(),appendMessageToDialogBox(e.message,"cbot-other",null,{notification:e.speak,data:e},function(){setClickEventToInteractiveButtons(e.userId),setClickEventToFeedbackButtons(e.unique_id)})}))},error:function(e,t,o){WAITING_FOR_LOGIN=!1,0<login_poll_counter&&login_poll_counter%2==0||waitForLogin(),login_poll_counter++}})}}var WAITING_FOR_POLLING=!1;function waitForLongPolling(){if(!WAITING_FOR_POLLING){for(var e={"Content-Type":"application/json","CBot-Token":"evsx7Tkgv5ycqZbSXV1GiAp4O8NfSJHx","CBOT-URL":generateCBOTURL(location.href)},t=clients.gateway_custom_headers||[],o=0;o<t.length;o++){var a=t[o];e[a.key]=a.value}WAITING_FOR_POLLING=!0,$.ajax({url:rootAddress+"/"+CLIENT+"/userdata/wait",type:"POST",timeout:24e4,headers:e,data:JSON.stringify({client:CLIENT,user_id:userId,session_id:cbotSessionId,referrer:CHANNEL||"WIDGET"}),success:function(t){if(WAITING_FOR_POLLING=!1,userLoggedInCallback(),t&&t.messages)for(let e=0;e<t.messages.length;e++)"NO_MESSAGE"!=t.messages[e]&&appendMessageToDialogBox(t.messages[e],"cbot-other",t.category,{notification:t.messages[e]},function(){setClickEventToInteractiveButtons(userId)});t.send_message&&sendPost({userId:userId,sessionId:cbotSessionId,message:t.send_message,is_triggered:!0},function(e){setisLiveTLS(isLive=setIsLive(e.live_chat)),isLive&&(FIRST_LIVE_MESSAGE=!0,socket_widget(e.message.message)),handleMessageArea(),appendMessageToDialogBox(e.message,"cbot-other",null,{notification:e.speak},function(){setClickEventToInteractiveButtons(e.userId),setClickEventToFeedbackButtons(e.unique_id)})})},error:function(e,t,o){WAITING_FOR_POLLING=!1,"timeout"==t&&waitForLongPolling()}})}}function socket_connection_widget(){LIVE_CHAT&&socket.on("user_"+userId,function(e){e.loginStatus&&userLoggedInCallback(),setisLiveTLS(isLive=setIsLive(e.live_chat)),isLive&&(FIRST_LIVE_MESSAGE=!0,socket_widget(e.message.message)),JSON.stringify(e.message||{}).includes("account_link")||appendMessageToDialogBox(e.message,"cbot-other",e.category,{notification:e.message},function(){})})}function socket_agent_read_message(){LIVE_CHAT&&socket.on("cbot_agent_read_messages",function(e){$(".is-live").addClass("read")})}function soc_cli_data(){LIVE_CHAT&&(socket.off("cbot_agent"),socket.on("cbot_agent",function(t,o){o&&"function"==typeof o&&o({is_delivered:!0}),t.client_id==userId&&(t.handover?(appendMessageToDialogBox(t.handover_message,"cbot-other",null,{notification:t.handover_message},function(){}),setisLiveTLS(isLive=setIsLive(!1)),agentId=null,sendPost({senderName:"User_"+userId,userId:userId,sessionId:cbotSessionId,message:t.message.message||t.message,intents:intents,client:cbot_config.client,live_chat:isLive,is_handover:t.handover||!1},function(e){setisLiveTLS(isLive=setIsLive(e.live_chat)),isLive&&(FIRST_LIVE_MESSAGE=!0,socket_widget(t.message.message)),handleMessageArea(),appendMessageToDialogBox(e.message,"cbot-other",null,{notification:e.speak},function(){setClickEventToInteractiveButtons(e.client_id),setClickEventToFeedbackButtons(e.unique_id)})})):t.missed?(agentId=null,toggleCloseChatButton("none"),cancelLivechat("failed"),appendMessageToDialogBox(t.message,"cbot-other","",{notification:t.message.message||t.message},function(){setClickEventToInteractiveButtons(t.client_id),setClickEventToFeedbackButtons(t.unique_id)})):(isLive&&(agentId=t.agent_id,toggleCloseChatButton("block"),t.is_system||cancelLivechat("successful")),t.message&&t.message.message_id?document.querySelector(`li[data-message-id='${t.message.message_id}']`)||(agent_name&&Array.isArray(agent_name)&&0<agent_name.length&&agent_name[0],appendMessageToDialogBox(t.message,"cbot-other","",{notification:t.message.message||t.message},function(){o&&"function"==typeof o&&o({is_delivered:!0}),setClickEventToInteractiveButtons(t.client_id),setClickEventToFeedbackButtons(t.unique_id);var e=$(`<style nonce="8IBTHwOdqNKAWeKl7plt8g==">li[data-message-id='${t.message.message_id}']::after { flex-wrap: nowrap; content:'${agent_name}'; width: 256px;height: 18px; margin-bottom:20px;  position: absolute;  left: 42px; top: -25px;display: flex;align-items: center;font-size:14px; background-repeat: no-repeat;background-position: center center;}li[data-message-id='${t.message.message_id}']{margin-top:20px;}  </style>`),e=($("head").append(e),$(`<style nonce="8IBTHwOdqNKAWeKl7plt8g==">li[data-message-id='${t.message.message_id}']::before {  content:"";width: 18px; height: 18px; margin-bottom:20px;position: absolute; left: 20px;display: flex;top: -25px; justify-content: center;align-items: center; background-image: url(${clients.chat_agent_avatar}); background-repeat: no-repeat; background-position: center center;}li[data-message-id='${t.message.message_id}']{margin-top:20px;}   </style>`));$("head").append(e)})):appendMessageToDialogBox(t.message,"cbot-other","",{notification:t.message.message||t.message},function(){o&&"function"==typeof o&&o({is_delivered:!0}),setClickEventToInteractiveButtons(t.client_id),setClickEventToFeedbackButtons(t.unique_id)})))}))}function socket_newclient(){socket&&socket.connected&&socket.emit("new_client",{userId:userId,sessionId:cbotSessionId})}async function socket_widget(a,s=!1){return new Promise((t,e)=>{if(isLive&&LIVE_CHAT){var o={message:a,client_id:userId,session_id:cbotSessionId,referrer:"WIDGET",client:CLIENT,is_first:FIRST_LIVE_MESSAGE,agent_id:agentId};s&&(o.is_triggered=!0);let e=setInterval(()=>{socket&&(clearInterval(e),FIRST_LIVE_MESSAGE&&(FIRST_LIVE_MESSAGE=!1,socket.emit("chat_live_client",o),sendCustomPostMessage("CBOT_LIVECHAT_STARTED",{})),soc_typing(!1),sendCustomPostMessage("CBOT_MESSAGE_SENT",{message:o.message}),livechatTimeoutEndNotifier(!0),socket.emit("chat_widget",o,e=>{toggleAttachmentIcon("block"),t()}))},100)}else t()})}function socket_alert(){LIVE_CHAT&&socket.on("cbot_alert",function(e){e.message&&e.client_id==userId&&alertMessageDialogHead(e.message)})}function socket_delete_message(){LIVE_CHAT&&socket.on("cbot_message_delete",function(o){var a;o.client_id==userId&&(a=!1,$("li.cbot-other").each(function(e,t){a||$(t).attr("data-message-id")==o.message_id&&($(t).remove(),a=!0)}))})}function soc_stop(){LIVE_CHAT&&socket.on("cbot_stop_ack",function(e,t){sendCustomPostMessage("CBOT_LIVECHAT_STOPPED",{}),t&&"function"==typeof t&&t({is_delivered:!0}),e.status&&e.client_id==userId&&(setisLiveTLS(isLive=setIsLive(!1)),livechatTimeoutEndNotifier(!0),agentId=null,handleMessageArea(),e.timed_out||e.missed)&&e.message&&appendMessageToDialogBox(e.message,"cbot-other","",{notification:e.message.message||e.message},function(){setClickEventToInteractiveButtons(e.client_id)})})}function socket_suggestion(e,t,o){isLive&&LIVE_CHAT&&socket.emit("chat_suggestion",{message:e,client_id:o})}function soc_typing(e){LIVE_CHAT&&isLive&&IS_TYPING!=e&&(IS_TYPING=e,socket.emit("chat_typing",{client_id:userId,status:e,type:"CLIENT"}))}function soc_client_typing(){LIVE_CHAT&&socket.on("cbot_typing",function(e){"AGENT"==e.type&&e.client_id==userId&&(e.status?($(".cbot-typing").remove(),$(".cbot-refresh-button").css("opacity","1"),$(".cbot-refresh-button").css("pointer-events","painted"),appendTypingIconToDialogBox(e.agent),agent_name=e.agent):($(".cbot-typing").remove(),$(".cbot-refresh-button").css("opacity","1"),$(".cbot-refresh-button").css("pointer-events","painted")))})}function soc_transfer_agent(){LIVE_CHAT&&socket.on("cbot_customer_list",function(e){"TRANSFER"!=e.type&&"TAKEOVER"!=e.type||userId!=e.customer.client_id||(agentId=e.agentId)})}function getCookie(e){for(var t=e+"=",o=document.cookie.split(";"),a=0;a<o.length;a++){for(var s=o[a];" "==s.charAt(0);)s=s.substring(1);if(0==s.indexOf(t))return s.substring(t.length,s.length)}return""}var dialogEndSurveyTimeout=null;function starAnketShow(e){e=e||{},dialogCloseSurveyShowed=!0,$(".cbot-dialog-end-survey").find("span").text(e.popup_question||"Anketimize katılmak ister misiniz?"),$(".cbot-dialog-end-survey").find("button").eq(0).text(e.popup_question_yes||"Evet"),$(".cbot-dialog-end-survey").find("button").eq(1).text(e.popup_question_no||"Hayır"),$(".cbot-dialog-end-survey").fadeIn(),e.shadow_background&&$(".cbot-survey-fadebg").css("display","block")}function fileUpload(e,t,o){sendCustomPostMessage("CBOT_FILE_IS_UPLOADING",{});for(var a=new XMLHttpRequest,s=(a.onreadystatechange=function(){var e;4==this.readyState&&200==this.status?(e=JSON.parse(this.responseText),sendCustomPostMessage("CBOT_FILE_UPLOADED_SUCCESSFULLY",{}),o(null,e)):4==this.readyState&&(e=JSON.parse(this.responseText),sendCustomPostMessage("CBOT_FILE_UPLOAD_FAILED",{}),o(e))},a.open("POST",e,!0),a.setRequestHeader("Accept","application/json"),a.setRequestHeader("CBOT-Token","evsx7Tkgv5ycqZbSXV1GiAp4O8NfSJHx"),a.setRequestHeader("CBOT-URL",generateCBOTURL(location.href)),clients.gateway_custom_headers||[]),i=0;i<s.length;i++){var n=s[i];a.setRequestHeader(n.key,n.value)}a.send(t)}function fileUploadListener(s){s||0==s?$._data($("#cbot-attachment-file-input-"+s).get(0),"events")||$("#cbot-attachment-file-input-"+s).on("change",function(t){var o=document.getElementById("cbot-attachment-file-input-"+s).files[0],a=new FormData;a.append("client",CLIENT),a.append("userId",userId),a.append("referrer","WIDGET"),a.append("cbot_file",o,o.name),fileUpload(rootAddress+"/files/upload",a,function(t,o){var a={message_type:"TEXT",message:""};if(t?a.message=t.error.description:(a.message=o.message,sendPost({senderName:"User_"+userId,userId:userId,sessionId:cbotSessionId,request_type:"DOC",data:o.url,filename:o.filename,live_chat:isLive},function(e){$("#cbot-form-message").attr("disabled",!1),$("#cbot-send-button").attr("disabled",!1),$("#cbot-form-message").val("Mesajınızı buraya yazınız!"),$("#cbot-form-message").focus(),$("#cbot-form-message").val(""),e?(intents=e.intents,appendMessageToDialogBox(e.message,"cbot-other",null,{notification:e.speak},function(){setClickEventToInteractiveButtons(e.userId),e.survey&&surveyTrigger(e.survey,e.userId),triggerTimingResponses(e)})):appendMessageToDialogBox("Cihazınız internete bağlı olmadığından işleminizi gerçekleştiremiyorum. İnternete bağlandıktan sonra talebinizi baştan iletebilirsiniz.","cbot-other",null,{notification:"Cihazınız internete bağlı olmadığından işleminizi gerçekleştiremiyorum. İnternete bağlandıktan sonra talebinizi baştan iletebilirsiniz."},function(){})})),appendMessageToDialogBox(a,"cbot-other","",{notification:a.message},function(){}),!t){elCbotInteractiveButtons=document.getElementsByClassName("fileupload");for(var s=0;s<elCbotInteractiveButtons.length;s++)(e=elCbotInteractiveButtons[s]).disabled=!0}})}):$("#cbot-attachment-file-input").on("change",function(e){var t,o=document.getElementById("cbot-attachment-file-input").files[0];o&&((t=new FormData).append("client",CLIENT),t.append("userId",userId),t.append("referrer","WIDGET"),t.append("cbot_file",o,o.name),fileUpload(rootAddress+"/files/upload",t,function(e,t){var o={message_type:"TEXT",message:""};e?o.message=e.error.description:(o.message=t.message,socket_widget(t.url)),appendMessageToDialogBox(o,"cbot-other","",{notification:o.message},function(){})}))})}function showAttachmentMenu(){$(".cbot-attachment-container").css("display","block")}function hideAttachmentMenu(){$(".cbot-attachment-container").css("display","none")}function toggleAttachmentMenu(){"block"==$(".cbot-attachment-container").css("display")?$(".cbot-attachment-container").css("display","none"):$(".cbot-attachment-container").css("display","block")}function popupwindow(e,t,o,a){var s=screen.width/2-o/2,i=screen.height/2-a/2;return window.open(e,t,"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width="+o+", height="+a+", top="+i+", left="+s)}function shareLocation(){document.getElementById("cbot-form-message");navigator.geolocation.getCurrentPosition(function(t){for(var o=document.getElementsByClassName("cbot-location"),a=0;a<o.length;a++)(e=o[a]).disabled=!0;t={message_type:"LOCATION_COMPONENT",lat:t.coords.latitude,lng:t.coords.longitude};appendMessageToDialogBox(t,"cbot-self","",{},function(){}),sendPost({userId:userId,sessionId:cbotSessionId,message:"",data:t,live_chat:isLive,request_type:"LOCATION",client:cbot_config.client},function(e){$("#cbot-form-message").attr("disabled",!1),$("#cbot-send-button").attr("disabled",!1),$("#cbot-form-message").val("Mesajınızı buraya yazınız!"),$("#cbot-form-message").focus(),$("#cbot-form-message").val(""),e?(intents=e.intents,appendMessageToDialogBox(e.message,"cbot-other",null,{notification:e.speak},function(){setClickEventToInteractiveButtons(e.userId),e.survey&&surveyTrigger(e.survey,e.userId),triggerTimingResponses(e)})):appendMessageToDialogBox("Cihazınız internete bağlı olmadığından işleminizi gerçekleştiremiyorum. İnternete bağlandıktan sonra talebinizi baştan iletebilirsiniz.","cbot-other",null,{notification:"Cihazınız internete bağlı olmadığından işleminizi gerçekleştiremiyorum. İnternete bağlandıktan sonra talebinizi baştan iletebilirsiniz."},function(){})})},function(e){appendMessageToDialogBox({message_type:"TEXT",message:"Hata oluştu,Tarayıcınızın konum bilgisine erişme özelliğini aktifleştirin."},"cbot-other","",{},function(){})})}var timingResponseTimeouts=[];function triggerTimingResponses(e){var t=e.timing_response;if(clearTimingResponseTimeout(),Array.isArray(t)&&0!=t.length&&!isLive)for(var o=0,a=0;a<t.length;a++)t[a].is_active&&(o+=1e3*t[a].time,sendTimingResponse(t[a],o))}function sendTimingResponse(e,t){t=setTimeout(function(){sendPost({userId:userId,sessionId:cbotSessionId,message:e.message,client:cbot_config.client},function(e){document.getElementById("cbot-send-button")&&document.getElementById("cbot-send-button").removeAttribute("disabled"),e?(intents=e.intents,appendMessageToDialogBox(e.message,"cbot-other",null,{notification:e.speak},function(){setClickEventToInteractiveButtons(e.userId),e.survey&&surveyTrigger(e.survey,e.userId)},e.category_name)):appendMessageToDialogBox("Cihazınız internete bağlı olmadığından işleminizi gerçekleştiremiyorum. İnternete bağlandıktan sonra talebinizi baştan iletebilirsiniz.","cbot-other",null,{notification:"Cihazınız internete bağlı olmadığından işleminizi gerçekleştiremiyorum. İnternete bağlandıktan sonra talebinizi baştan iletebilirsiniz."},function(){})},!0)},t||1e3*e.time);timingResponseTimeouts.push(t)}function clearTimingResponseTimeout(){for(var e=0;e<timingResponseTimeouts.length;e++)clearTimeout(timingResponseTimeouts[e])}function getConversations(t,o){if(userId&&cbotSessionId){for(var e={"Content-Type":"application/json","CBot-Token":"evsx7Tkgv5ycqZbSXV1GiAp4O8NfSJHx","CBOT-URL":generateCBOTURL(location.href)},a=clients.gateway_custom_headers||[],s=0;s<a.length;s++){var i=a[s];e[i.key]=i.value}$.ajax({url:rootAddress+"/conversations?client="+CLIENT,type:"POST",timeout:5e3,headers:e,data:JSON.stringify({client:CLIENT,user_id:userId,session_id:cbotSessionId,referrer:CHANNEL||"WIDGET",userInfo:data_user}),success:function(e){sendCustomPostMessage("CBOT_CONVERSATION_HISTORY_FETCHED",{}),checkAndSetSessionId(e.session_id),setUserIdTLS(e.user_id),setSessionIdTLS(e.session_id),socket_newclient(),e&&e.exit_survey&&(exitSurvey=e.exit_survey),e.userInfo.user_display_name&&addAvatarLetters(e.userInfo.user_display_name),e&&e.lang_vars&&setLangVars(e.lang_vars),e&&"object"==typeof e&&e.data&&Array.isArray(e.data)&&(conversations=e.data).reverse(),t(),o&&"function"==typeof o&&o(e.user_id,interactive_popup_message)},error:function(e){t(),o&&"function"==typeof o&&o(userId,interactive_popup_message)}})}else t(),o&&"function"==typeof o&&o(userId,interactive_popup_message)}function checkAndSetSessionId(e){e&&setSessionIdTLS(cbotSessionId=e)}function sendTriggerMessages(e,o=""){setTimeout(function(){var t;document.getElementById("cbot-form-message").focus(),0<o.length&&setIsTimeoutMessageSentTLS(!1),getIsTimeoutMessageSentTLS()&&user_timeout.message&&(appendMessageToDialogBox(user_timeout.message,"cbot-other",null,{notification:user_timeout.message},function(){}),setIsTimeoutMessageSentTLS(!1)),(queryStringVars.cbot_message||Array.isArray(e)&&0<e.length&&""!=e[0]&&0==trigger_messages_count)&&(t=queryStringVars.cbot_message||e[0]+o,trigger_messages_count++,$(".cbot-refresh-button").css("opacity","0.5"),$(".cbot-refresh-button").css("pointer-events","none"),$("#cbot-form-message").attr("disabled",!0),$("#cbot-send-button").attr("disabled",!0),currentTime=new Date,hours=(currentTime.getHours()<10?"0":"")+currentTime.getHours(),minutes=(currentTime.getMinutes()<10?"0":"")+currentTime.getMinutes(),sendPost({senderName:"User_"+userId,userId:userId,sessionId:cbotSessionId,message:t,is_triggered:!0,intents:intents,live_chat:isLive,client:cbot_config.client,currentTime:hours+":"+minutes,presetCategory:sendCategory},function(e){sendCustomPostMessage("CBOT_TRIGGER_MESSAGE_SENT",{}),handleMessageArea();document.getElementById("cbot-chat");e?($(".cbot-refresh-button").css("opacity","1"),$(".cbot-refresh-button").css("pointer-events","painted"),intents=e.intents,appendMessageToDialogBox(e.message,"cbot-other",null,{notification:e.speak},function(){startEventTriggerFlag||setTimeout(()=>{startEventTriggerFlag=!0,console.log("start event triggered..."),data_mobileapp&&(cbotIsMobile.Android()?ChatbotJSBridge.start("cbotloaded"):cbotIsMobile.iOS()?window.webkit.messageHandlers.start.postMessage("cbotloaded"):console.log("Device type could not resolved."))},100),setClickEventToInteractiveButtons(e.userId),e.survey&&surveyTrigger(e.survey,e.userId),triggerTimingResponses(e),setisLiveTLS(isLive=setIsLive(e.live_chat)),isLive&&(e.livechat_from_survey||!e.is_survey_message&&!e.is_survey_feedback)&&(FIRST_LIVE_MESSAGE=!0,socket_widget(t))})):appendMessageToDialogBox("Cihazınız internete bağlı olmadığından işleminizi gerçekleştiremiyorum. İnternete bağlandıktan sonra talebinizi baştan iletebilirsiniz.","cbot-other",null,{notification:"Cihazınız internete bağlı olmadığından işleminizi gerçekleştiremiyorum. İnternete bağlandıktan sonra talebinizi baştan iletebilirsiniz."},function(){})})),scrollChatScreen(1e3)},200)}function writeConversations(){for(var t,o=0;o<conversations.length;o++){if(!conversations[o].is_triggered){let e="";(e=conversations[o].data_full_action&&conversations[o].data_full_action.title?conversations[o].data_full_action.title:conversations[o].message).match(/LOCATION\[STD]/g)&&(t=e.split("LOCATION[STD]:")[1].split(","),e={message_type:"LOCATION_COMPONENT",lat:t[0].trim(),lng:t[1].trim()}),appendMessageToDialogBox(e,"cbot-self",null,{instantWrite:!0},function(){})}if(e=conversations[o].answer)if(conversations[o].live_chat)for(var e=(e="string"==typeof e?[{message_type:"TEXT",message:e}]:e).filter(function(e){return"agent"==e.chat_type}),a=0;a<e.length;a++)(s=e[a]).is_deleted||appendMessageToDialogBox(s,"cbot-other",null,{instantWrite:!0},function(){$(".cbot-typing").remove(),$(".cbot-refresh-button").css("opacity","1"),$(".cbot-refresh-button").css("pointer-events","painted"),$("#cbot-form-message").attr("disabled",!1),$("#cbot-send-button").attr("disabled",!1),$("#cbot-form-message").val("Mesajınızı buraya yazınız!"),$("#cbot-form-message").focus(),$("#cbot-form-message").val(""),setClickEventToInteractiveButtons(userId)});else{"string"==typeof e&&(e=[{message_type:"TEXT",message:e}]);for(var s,a=0;a<e.length;a++)(s=e[a]).is_deleted||appendMessageToDialogBox(s,"cbot-other",null,{instantWrite:!0},function(){$(".cbot-typing").remove(),$(".cbot-refresh-button").css("opacity","1"),$(".cbot-refresh-button").css("pointer-events","painted"),$("#cbot-form-message").attr("disabled",!1),$("#cbot-send-button").attr("disabled",!1),$("#cbot-form-message").val("Mesajınızı buraya yazınız!"),$("#cbot-form-message").focus(),$("#cbot-form-message").val(""),setClickEventToInteractiveButtons(userId)})}}closeMiniWeb()}function getSessionIdFLS(){return localStorage[getDynamicLSName("sessionId")]||0}function setSessionIdTLS(e){cbotSessionId=e,localStorage[getDynamicLSName("sessionId")]=e,xdLocalStorage.setItem(getDynamicLSName("sessionId"),e)}function setUserIdTLS(e){userId=e,localStorage[getDynamicLSName("userid")]=userId,xdLocalStorage.setItem(getDynamicLSName("userid"),userId)}function getisLiveFLS(){var e="true"===localStorage[getDynamicLSName("isLive")]||"false"===localStorage[getDynamicLSName("isLive")]?JSON.parse(localStorage[getDynamicLSName("isLive")]):isLive;return e&&sendCustomPostMessage("CBOT_LIVECHAT_RECONNECTED",{}),e}function setisLiveTLS(e){!0!==e||hasSurveyFeedback||(showedSurvey=null),localStorage[getDynamicLSName("isLive")]=e,xdLocalStorage.setItem(getDynamicLSName("isLive"),e)}function setUserInfoTLS(e){localStorage[getDynamicLSName("userInfo")]=e,xdLocalStorage.setItem(getDynamicLSName("userInfo"),e)}function getUserInfoFLS(){return localStorage[getDynamicLSName("userInfo")]||""}function setIsLive(e){return e?(LIVE_CHAT&&e&&toggleAttachmentIcon("block"),LIVE_CHAT&&e):(data_vip||data_livechat)&&LIVE_CHAT?(LIVE_CHAT&&e?toggleAttachmentIcon("block"):(toggleCloseChatButton("none"),cancelLivechat("failed")),FIRST_LIVE_MESSAGE=!0):(toggleAttachmentIcon("none"),toggleCloseChatButton("none"),cancelLivechat("failed"),e)}function clearLastMessageSentDateTLS(e){localStorage[getDynamicLSName("lastmessagedate",!1)]="0",xdLocalStorage.setItem(getDynamicLSName("lastmessagedate",!1),"0")}function setLastMessageSentDateTLS(e){localStorage[getDynamicLSName("lastmessagedate",!1)]=Date.now(),xdLocalStorage.setItem(getDynamicLSName("lastmessagedate",!1),Date.now())}function getLastMessageSentDateFLS(e){return JSON.parse(localStorage[getDynamicLSName("lastmessagedate",!1)]||0)}function setFirstMessageSentTLS(e){localStorage[getDynamicLSName("firstmessagesent")]=e,xdLocalStorage.setItem(getDynamicLSName("firstmessagesent"),e)}function getFirstMessageSentFLS(e){return"true"==localStorage[getDynamicLSName("firstmessagesent")]}function setIsTimeoutMessageSentTLS(e){localStorage[getDynamicLSName("istimeoutmessagesent")]=e,xdLocalStorage.setItem(getDynamicLSName("istimeoutmessagesent"),e)}function getIsTimeoutMessageSentTLS(e){return!!clients.send_timeout_message_to_new_session&&"true"==localStorage[getDynamicLSName("istimeoutmessagesent")]}function setIsWidgetOpenedTLS(e){localStorage[getDynamicLSName("iswidgetopened")]=e,xdLocalStorage.setItem(getDynamicLSName("iswidgetopened"),e)}function getIsWidgetOpenedTLS(e){return!!clients.stay_open_widget&&"true"==localStorage[getDynamicLSName("iswidgetopened")]}function checkLastMessageDate(e){e=getLastMessageSentDateFLS(e);return!!e&&(lastMessageReceiveDate=parseInt(e),new Date(parseInt(e)+60*parseInt(clients.user_timeout_minute||clients.user_timeout||30)*1e3)>=Date.now())}function closeMiniWeb(){var e=document.getElementById("cbot-web-area");"none"!=$("#cbot-web-area").css("display")&&fadeOut(e)}function b64encode(e){return btoa(unescape(encodeURIComponent(e)))}function b64decode(e){return decodeURIComponent(escape(atob(e)))}function browserNotifications(){var e;"Notification"in window&&("granted"===(e=Notification.permission)?showNotification():"default"===e&&requestAndShowPermission())}function showNotification(e,t){if(e=e||"","Notification"in window&&(isWidgetOpen||toggleBadge(++newMsgCount),"visible"!==document.visibilityState)&&(t="string"==typeof t?(t=(t=(t||"").replace(/<.+?>/g,"")).replace(/NO_MESSAGE/g,"")).trim():t)){icon=cbot_config.dialogImageURL;try{var o=new Notification(e,{body:t,icon:icon});audioElement&&audioElement.play(),o.onclick=function(){o.close(),window.parent.focus(),isWidgetOpen||dialogButtonRegular()}}catch(e){console.error(e)}}}function requestAndShowPermission(){Notification.requestPermission(function(e){"granted"===e&&showNotification()})}function toggleBadge(e){0<e?($("#cbot-count-badge").text(e),$("#cbot-count-badge").css("display","block")):$("#cbot-count-badge").css("display","none")}async function closeLivechat(e=!0){LIVE_CHAT&&isLive&&(toggleCloseChatButton("none"),await socket_widget("Görüşme kullanıcı tarafından sonlandırıldı.",!0),socket.emit("chat_stop_by_customer",{client_id:userId,session_id:cbotSessionId}),setisLiveTLS(isLive=setIsLive(!1)),handleMessageArea(),e&&appendMessageToDialogBox(lang_vars.LIVECHAT_CUSTOMER_CLOSE_MESSAGE,"cbot-other","",{},function(){}),getChannelValue(clients.close_widget_after_leave_livechat,CHANNEL)&&document.querySelector(".cbot-close-icon-new").click(),sendCustomPostMessage("CBOT_LIVECHAT_STOPPED",{}))}function cancelLivechat(e){var t;LIVE_CHAT&&isLive&&((t=$(".livechat").last()).find(".cbot-livechat-cancel").addClass("disabled"),"successful"==e?(livechatTimeoutEndNotifier(),t.find(".cbot-image img").attr("src",livechat_connection_images.success),t.find(".cbot-subtitle").addClass("disabled"),t.find(".cbot-connect-successful-message").removeClass("disabled"),t.find(".cbot-connect-fail-message").addClass("disabled")):(t.find(".cbot-connect-successful-message").hasClass("disabled")&&(t.find(".cbot-image img").attr("src",livechat_connection_images.fail),t.find(".cbot-subtitle").addClass("disabled"),t.find(".cbot-connect-fail-message").removeClass("disabled")),"failed"!=e&&(livechatTimeoutEndNotifier(!0),closeLivechat())))}function toggleAttachmentIcon(e){"block"!=e||bool_attachments||(e="none"),$("#cbot-attachment-area").css("display",e)}function toggleCloseChatButton(e){"none"==e?$("#cbot-chat").css("height","calc(100% - 155px);"):$("#cbot-chat").css("height","calc(100% - 175px);"),$(".cbot-livechat-close").css("display",e)}var user_timeout_for_bot=0;function chatEndNotifier(){user_timeout=(clients.user_timeout||{}).DEFAULT||{DEFAULT:{message:""}},clients.user_timeout_minute&&(user_timeout_for_bot=parseInt(clients.user_timeout_minute)),clients.user_timeout_notify_second&&(timeoutNotifySecPeriod=parseInt(clients.user_timeout_notify_second)),setInterval(function(){var e;"show"==cbotShowMessageArea?$(".cbot-dialog-end-timer").css("bottom",""):$(".cbot-dialog-end-timer").css("bottom","0"),new Date(lastMessageReceiveDate+1e3*user_timeout_for_bot*60-1e3*timeoutNotifySecPeriod).getTime()<(new Date).getTime()&&new Date(lastMessageReceiveDate+1e3*user_timeout_for_bot*60).getTime()>(new Date).getTime()?(e=parseInt((new Date(lastMessageReceiveDate+1e3*user_timeout_for_bot*60).getTime()-(new Date).getTime())/1e3),"block"!=$(".cbot-dialog-end-timer").css("display")&&$(".cbot-dialog-end-timer").css("display","block"),$(".cbot-dialog-end-timer").html("<span>"+e+"</span> saniye içerisinde oturumunuz sonlanacaktır."),0==e&&setTimeout(function(){user_timeout.message&&sendTimeOutMessage(user_timeout.message)},1e3)):0===timeoutNotifySecPeriod&&new Date(lastMessageReceiveDate+1e3*user_timeout_for_bot*60).getTime()>(new Date).getTime()&&0===parseInt((new Date(lastMessageReceiveDate+1e3*user_timeout_for_bot*60).getTime()-(new Date).getTime())/1e3)?user_timeout.message&&sendTimeOutMessage(user_timeout.message):"none"!=$(".cbot-dialog-end-timer").css("display")&&$(".cbot-dialog-end-timer").css("display","none")},1e3)}async function loadLottieLibrary(){try{lottie||await new Promise((e,t)=>{var o=document.createElement("script");o.src=staticAddress+"/js/lottie-5.7.4.min.js",o.onload=e,o.onerror=t,document.getElementsByTagName("head")[0].insertBefore(o,document.getElementsByTagName("head")[0].firstChild)})}catch(e){console.error("Lottie kütüphanesi yüklenirken bir hata oluştu:",e)}}var livechat_timeout_interval,livechat_timeout_for_bot=0;function livechatTimeoutEndNotifier(e=!1){if(e)clearInterval(livechat_timeout_interval),"none"!=$(".cbot-livechat-end-timer").css("display")&&$(".cbot-livechat-end-timer").css("display","none");else{let o=(clients.livechat_timeout||{}).DEFAULT||{DEFAULT:{message:""}};clients.livechat_timeout_minute&&(livechat_timeout_for_bot=parseInt(clients.livechat_timeout_minute)),clients.livechat_timeout_notify_second&&(timeoutNotifySecPeriod=parseInt(clients.livechat_timeout_notify_second));var a=Date.now();clearInterval(livechat_timeout_interval),livechat_timeout_interval=setInterval(function(){var e,t;"show"==cbotShowMessageArea?$(".cbot-livechat-end-timer").css("bottom",""):$(".cbot-livechat-end-timer").css("bottom","0"),new Date(a+1e3*livechat_timeout_for_bot*60-1e3*timeoutNotifySecPeriod).getTime()<(new Date).getTime()&&new Date(a+1e3*livechat_timeout_for_bot*60).getTime()>(new Date).getTime()?(e=parseInt((new Date(a+1e3*livechat_timeout_for_bot*60).getTime()-(new Date).getTime())/1e3),"block"!=$(".cbot-livechat-end-timer").css("display")&&$(".cbot-livechat-end-timer").css("display","block"),t=clients.livechat_timeout_banner_message||" saniye içerisinde livechat sonlanacaktır.",$(".cbot-livechat-end-timer").html("<span>"+e+"</span> "+t),0==e&&setTimeout(function(){o.message&&appendMessageToDialogBox(o.message,"cbot-other",null,{notification:o.message},function(){}),closeLivechat(!1),clearInterval(livechat_timeout_interval)},1e3)):0===timeoutNotifySecPeriod&&new Date(a+1e3*livechat_timeout_for_bot*60).getTime()>(new Date).getTime()&&0===parseInt((new Date(a+1e3*livechat_timeout_for_bot*60).getTime()-(new Date).getTime())/1e3)?o.message&&(appendMessageToDialogBox(o.message,"cbot-other",null,{notification:o.message},function(){}),closeLivechat(!1),clearInterval(livechat_timeout_interval)):"none"!=$(".cbot-livechat-end-timer").css("display")&&$(".cbot-livechat-end-timer").css("display","none")},1e3)}}function checkURLs(e){if(!e||0==e.length)return{};document.createElement("script").type="text/javascript";for(var t=0;t<e.length&&window.location.href.indexOf(e[t].url)<0;)t++;return t<e.length?e[t]:void 0}function appendLocalStorageIFrame(e,t){$("body").append('<iframe src="'+e+'" id="cbot-localstorage"></iframe>');e=document.getElementById("cbot-localstorage");e&&(e.onload=t)}function getXdLocalStorage(){var t,o=document.getElementById("cbot-localstorage");try{t=o.contentWindow}catch(e){try{t=o.contentWindow}catch(e){}}return t}var xdLocalStorage={getItem:function(e){var t=getXdLocalStorage();t&&t.postMessage({action:"get",key:e},getAddr())},setItem:function(e,t){var o=getXdLocalStorage();o&&o.postMessage({action:"save",key:e,value:t},getAddr())},checkIFrameLocalStorage:function(){return null!=getXdLocalStorage()},clearAll:function(){var e=getXdLocalStorage();e&&e.postMessage({action:"clearAll"},getAddr())}};function messageHandler(e){"returnData"==e.data.action&&e.data.value?setToLocalStorage(e.data.key,e.data.value):storageCount++}function visibilityOfCenterPagePopupCloseIcon(e){"none"!=e&&"block"!=e||$(".cbot-center-page-popup-close").css("display",e)}window.addEventListener("message",messageHandler,!1);var addNonDot=0;function heightChangeHandler(e){var t,o;e.data&&e.data.loginInProgress&&visibilityOfCenterPagePopupCloseIcon("none"),e.data&&e.data.loginSucceed&&visibilityOfCenterPagePopupCloseIcon("none"),e.data&&e.data.loginFailed&&visibilityOfCenterPagePopupCloseIcon("block"),e.data&&e.data.closeChatBotLoginPopup&&$(".cbot-center-page-popup-close").css("display","none"),e.data&&e.data.pageSizeChanged?(343!=parseInt(e.data.pageSizeChanged)&&319!=parseInt(e.data.pageSizeChanged)||$(".cbot-center-page-popup-close").css("display","none"),o=window.innerHeight+83-10,t=((e.data||{}).pageSizeChanged||"0").toString(),addNonDot=-1==t.indexOf(".")?30:0,t=t.replace(/[^0-9\.]/g,""),!isNaN(parseInt(t))&&0<parseInt(t)?(0<parseInt(t)&&parseInt(t)<80&&(t=300),t=parseInt(t)+83+10+addNonDot,cbotIsMobile.any()&&parseInt(t)>o&&(t=""+o),$(".cbot-center-page-popup-container").attr("style","height: calc("+parseInt(t)+"px - 83px)")):console.log("pageSizeChanged yakalanan değer",t)):e.data&&e.data.status&&(o="1"==e.data.status?"payment_success":"payment_fail",setTimeout(()=>{scrollIframeToTop()},500),dialog(userId,o,function(){},o,!1),setTimeout(()=>{$(".cbot-center-page-popup-overlay").css("display","none"),window.removeEventListener("message",heightChangeHandler)},6e3))}function scrollIframeToTop(){var e=document.getElementsByClassName("cbot-center-page-iframe");e&&0<e.length&&e[0].contentWindow.scrollTo(0,0)}function setToLocalStorage(e,t){localStorage[e]=t,storageCount++}function getVarsFromLocalStorageIFrame(e){xdLocalStorage.getItem(getDynamicLSName("userid")),xdLocalStorage.getItem(getDynamicLSName("sessionId")),xdLocalStorage.getItem(getDynamicLSName("userInfo")),xdLocalStorage.getItem(getDynamicLSName("isLive")),xdLocalStorage.getItem(getDynamicLSName("lastmessagedate",!1)),xdLocalStorage.getItem(getDynamicLSName("firstmessagesent"))}function randomString(e=10){return"cbot_"+Math.round(Math.pow(36,e+1)-Math.random()*Math.pow(36,e)).toString(36).slice(1)}function cbotDonutOpenTab(e,t,o,a,s){for(var i,n=document.getElementsByClassName(a),c=0;c<n.length;c++)n[c].style.display="none";for(i=document.getElementsByClassName(o),c=0;c<i.length;c++)i[c].className=i[c].className.replace(" active",""),i[c].style["border-left"]="3px solid #CCC";document.getElementById(t).style.display="block",e.currentTarget.className+=" active",e.currentTarget.style["border-left"]="3px solid "+s}function openMidPagePopup(e,t){login_button_clicked=t||!1,clearTimingResponseTimeout(),console.log("POPUP URL: ",e),$(".cbot-center-page-popup-overlay").css("display","block"),$(".cbot-center-page-popup-close").css("display",""),$(".cbot-button").prop("disabled",!0),"true"!=data_mobileapp&&1!=data_mobileapp||($(".cbot-center-page-popup-container").css("width","100%"),$(".cbot-center-page-popup-container").css("height","100%"),$(".cbot-center-page-popup-header").css("height","50px"),$(".cbot-center-page-popup-close").css("border","unset"),$(".cbot-center-page-popup-close").css("height","20px"),$(".cbot-center-page-popup-close").css("margin-top","15px"),$(".cbot-center-page-popup-logo").css("height","20px"),$(".cbot-center-page-popup-content").css("height","calc(100% - 55px)")),$(".cbot-center-page-popup-content").html('<iframe class="cbot-center-page-iframe" onload="cbotMidPageIframeLoaded(this)" frameBorder="0" src="'+e+'"></iframe>'),window.addEventListener("message",heightChangeHandler,!1)}function popupCloseMessage(){}function cbotMidPageIframeLoaded(e){let t="";try{t=e.contentWindow.location.href,console.log("URL SET",t)}catch(e){console.log("iframe error",e)}var o;(t=decodeURIComponent(t))&&-1<t.indexOf("/infopage")&&/Message=(.+)?&|Message=(.+)$/.test(t)&&(e="",e=t.match(/Message=(.+)?&|Message=(.+)$/)[1],o=/Status=(.+)?&|Status=(.+)$/,e)&&(setTimeout(function(){userLoggedInCallback()},3e3),setTimeout(function(){var e="1"==(o.test(t)?t.match(o)[1]:"0")?"payment_success":"payment_fail";dialog(userId,e,function(){},e,!1)},4e3))}function userLoggedInCallback(){$(".cbot-center-page-popup-overlay").css("display","none")}function getCustomPositionings(){return{width:getParameterFromScript("data-pos-"+CHANNEL+"-width"),height:getParameterFromScript("data-pos-"+CHANNEL+"-height"),bottom:getParameterFromScript("data-pos-"+CHANNEL+"-bottom"),right:getParameterFromScript("data-pos-"+CHANNEL+"-right"),left:getParameterFromScript("data-pos-"+CHANNEL+"-left")}}function cbotClearUserDialog(e=!1,t=!1){e?(cbotSessionId=null,setisLiveTLS(isLive=setIsLive(welcomeMessageSent=!1)),clearLastMessageSentDateTLS(),$("#cbot-chat").find("li").each(function(e,t){$(t).remove()})):(userId=null,localStorage[getDynamicLSName("userid")]=userId,xdLocalStorage.setItem(getDynamicLSName("userid"),userId),cbotSessionId=null,setisLiveTLS(isLive=setIsLive(welcomeMessageSent=!1)),setSessionIdTLS(cbotSessionId),clearLastMessageSentDateTLS(),t||$("#cbot-chat").find("li").each(function(e,t){$(t).remove()})),document.getElementById("cbot-web-area")&&document.querySelector(".cbot-web-close").click()}function cbotGetFontSize(e){return(fontSize=30-e<13?13:30-e<21?21:30)+"px"}let interactive_popup_message;function openAndSendMessage(e,t=!1,o=""){o&&(clients.welcome_message?ChangeWelcomeMessage(clients.welcome_message=o):appendMessageToDialogBox(o,"cbot-other",null,{},function(){})),t&&(ia_take_attention_state.is_executed=!0),ia_take_attention_state_timer&&clearTimeout(ia_take_attention_state_timer);let a=()=>{};e&&(interactive_popup_message=e,a=(e,t)=>{dialog(e,t,()=>{},void 0,!1,void 0,!0)}),dialogButtonRegular(a=o?a:(e,t)=>{appendMessageToDialogBox(t,"cbot-self",null,{},function(){}),dialog(e,t,()=>{},void 0,!1,void 0,!0)}),$(".cbot-join-chat-container").css("display","none"),data_timeout_popup_active_answered=!0}function hideTimeoutPopup(){$(".cbot-join-chat-container").css("display","none"),data_timeout_popup_active_answered=!0}function getQueryVariable(e){if(-1==e.indexOf("?"))return{};for(var t=e.slice(e.indexOf("?")+1).split("&"),o={},a=0;a<t.length;a++){var s=t[a].split("=");s[0]&&s[1]&&(o[s[0]]=s[1])}return o}function getCustomHeaders(o){clients.gateway_custom_headers=(clients.gateway_custom_headers||[]).filter(function(e){return e.value=e.value.replace(/\$\{([a-zA-Z_ÇÖĞŞÜİçöğşüı]+)\}/g,function(e,t){return data_script_qs[t]||(o?"":e)}),o&&checkAuthHeader(),!!e.value})}function generateCBOTURL(e){var t=[{key:"cbot_dynamic_id",value:cbot_dynamic_id}];return-1==e.indexOf("?")?e+"?"+t.map(e=>e.key+"="+e.value).join("&"):e+"&"+t.map(e=>e.key+"="+e.value).join("&")}function checkAuthHeader(){var e=clients.gateway_custom_headers.find(function(e){return"cbot-userchanged"==e.key})||{};1!=e.value&&"true"!=e.value||setSessionIdTLS(cbotSessionId=null)}function getUrlTarget(t,e){return null==((clients.link_list||{})[e=("WIDGET"==e?"DEFAULT":e)||"DEFAULT"]||[]).find(function(e){return t.includes(e)})?"_blank":"_self"}function getChannelValue(e,t){return!(!e||e.length<1)&&(e||{})[t=("WIDGET"==t?"DEFAULT":t)||"DEFAULT"]}function checkChannelName(e="",t){return-1!==e.indexOf(t=("WIDGET"==t?"DEFAULT":t)||"DEFAULT")}function checkPageTransition(e,t){return previousURL===currentURL}function hideMessageArea(){cbotShowMessageArea="hide",$(".cbot-form-message-area").css("display","none"),$(".cbot-send-button").css("display","none"),$(".cbot-chat").css("height","calc(100% - 75px)"),scrollChatScreen(100)}function showMessageArea(){cbotShowMessageArea="show",$(".cbot-form-message-area").css("display","block"),$(".cbot-send-button").css("display","block"),$(".cbot-chat").css({height:"",display:""}),scrollChatScreen(100)}function handleMessageArea(){clients.button_mode&&(hideMessageArea(),isLive)&&showMessageArea()}function randomString(){for(var e="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",t="",o=32;0<o;--o)t+=e[Math.floor(Math.random()*e.length)];return t}function cbotHideHelpTextMenu(){$(".cbot-dialog-head").fadeIn(),$(".cbot-dialog-sozlesme").fadeOut(),$("#cbot-help").fadeOut(),$(".cbot-send-button").stop().slideDown(),"show"==cbotShowMessageArea&&$(".cbot-form-message-area").css("display","block"),voice_bot_is_active&&$(".cbot-voice-area").css("display","block")}function cbotHelpTextToDialog(e){cbotHideHelpTextMenu(),dialog(userId,e,function(){})}function getUserIDFLS(){return localStorage[getDynamicLSName("userid")]}function getUserIDName(){return clients.is_dynamic_user_id?"cbot-"+CLIENT+"-"+CHANNEL+"-userid":"cbot-"+CLIENT+"-userid"}function getDynamicLSName(e,t=!0){return clients.is_dynamic_user_id&&t?"cbot-"+CLIENT+"-"+(cbot_dynamic_id||CHANNEL)+"-"+e:"cbot-"+CLIENT+"-"+e}function isGenericComponent(e){return!!(e&&["DONUT_COMPONENT","GENERIC_COMPONENT","GENERIC_COMPONENT_V1","GENERIC_COMPONENT_V2","GENERIC_COMPONENT_V3"].includes(e.message_type)&&e.elements&&0<e.elements.length)}function isButtonComponent(e){return!(!e||!["BUTTON_COMPONENT"].includes(e.message_type))}function slideDonut(e){let t=e.target;t.onclick=null,t.className.includes("arrow-left")?(e=t.parentElement.previousElementSibling,0<Math.abs($(e).css("left").replace("px",""))?$(e).animate({left:"+=300px"},1e3,"swing",function(){$(t.nextElementSibling).attr("data-current",parseInt($(t.nextElementSibling).attr("data-current"))-1),t.onclick=slideDonut}):t.onclick=slideDonut):(e=t.parentElement.previousElementSibling,Math.abs($(e).css("left").replace("px",""))+300<$(e).width()?$(e).animate({left:"-=300px"},1e3,"swing",function(){$(t.previousElementSibling).attr("data-current",parseInt($(t.previousElementSibling).attr("data-current"))+1),t.onclick=slideDonut}):t.onclick=slideDonut)}function windowOpen(e,t){return window.open(e,t)}function disablePostbackButtonsInHistory(){var o=document.getElementsByClassName("cbot-buttons"),a=[];for(let t=0;t<o.length-1;t++)for(var s=o[t],i=s.getElementsByClassName("postback"),n=i.length-1;0<=n;n--)e=i[n],clients.remove_clicked_button_family&&e&&e.parentElement&&e.parentElement.parentElement&&!e.parentElement.parentElement.className.includes("cbot-survey-type")&&a.push(s),e&&"true"!=e.getAttribute("data-branch")&&(e.disabled=!0);a.forEach(e=>e.remove())}function sendCustomPostMessage(e,t){try{window.postMessage({action:e,data:t},getAddr()),window.ReactNativeWebView?window.ReactNativeWebView.postMessage({action:e,data:t},getAddr()):cbotIsMobile.iOS()?window.webkit.messageHandlers?window.webkit.messageHandlers.ChatbotEventBridge.postMessage({action:e,data:t},getAddr()):window.ChatbotEventBridge&&window.ChatbotEventBridge.postMessage({action:e,data:t},getAddr()):cbotIsMobile.Android()&&window.ChatbotEventBridge&&window.ChatbotEventBridge.postMessage(JSON.stringify({action:e,data:t}))}catch(e){console.log(e)}}function renderPostMessageButton(e,t,o){var a,s="";/list/i.test(o=o||"")&&(s="cbot-list-item-button",o="");let i="";return"object"==typeof e?i+=`<a onclick="sendPostMessage(${JSON.stringify(e).replace(/'/g,"&apos;").replace(/"/g,"&quot;")})" style="cursor:pointer"><div class="cbot-button">${t}</div></a>`:"string"==typeof e&&(a=getUrlTarget(e,CHANNEL),i+='<a href="'+e+'" target="'+a+'" class="'+o+s+triple_button_class+text_button_class+'" style="'+suggestion_button_style+triple_button_css+'" onclick="clickTheURLs(this)">'+t+"</a>"),i}function sendPostMessage(e){window.postMessage(JSON.stringify(e),getAddr()),window.ReactNativeWebView&&window.ReactNativeWebView.postMessage(JSON.stringify(e),getAddr())}function scrollChatScreen(e){isScrolling||(isScrolling=!0,setTimeout(function(){$("#cbot-chat").stop().animate({scrollTop:$("#cbot-chat").prop("scrollHeight")},1,function(){isScrolling=!1})},e))}function scrollMessageBox(e){setTimeout(function(){$("#cbot-form-message").stop().animate({scrollTop:$("#cbot-form-message").prop("scrollHeight")},1,function(){})},e)}function cbotSetCarouselv2Width(e){$(e).css("width",224*$(e).children().length+"px"),2<$(e).children().length&&$(e).siblings(".cbot-generic-v2-arrow.right").css("display","block")}function setNavigatorDots(e){let o=0;$(e).siblings(".cbot-generic-template-v2-carousel-wrapper").eq(0).find(".cbot-generic-v2-carousel").eq(0).find(".cbot-generic-template-v2").each((e,t)=>{"cbot-generic-template-v2"==$(t).attr("class")&&"block"==$(t).css("display")&&o++}),$(e).find(".cbot-generic-template-v2-navigator-dot").each((e,t)=>{e<=o&&$(t).css("display","inline-block")})}function checkAndClearBeforeButtons(){clients.remove_clicked_button_family&&$("#cbot-chat").find(".cbot-buttons:not(.cbot-survey-type .cbot-buttons, .livechat .cbot-buttons)").remove()}function socket_reconnect(){var e;LIVE_CHAT&&(e=setInterval(function(){window.io&&cbotSessionId&&userId&&((socket=socket.connected?socket:io.connect(soc_connect,{transports:["websocket"],secure:!0,upgrade:!1,auth:{session_id:cbotSessionId,user_id:userId}})).on("connect",function(){var e=setInterval(function(){userId&&cbotSessionId&&(socket.emit("new_client",{userId:userId,sessionId:cbotSessionId}),clearInterval(e))},500)}),socket_connection_widget(),socket_agent_read_message(),soc_cli_data(),soc_survey(),soc_stop(),soc_client_typing(),socket_alert(),socket_delete_message(),soc_transfer_agent(),soc_error(),clearInterval(e))},1e3))}function soc_error(){LIVE_CHAT&&(socket.on("connect_error",function(e){console.log("connect_error => ",e),e.data&&"authentication_error"===e.data.type&&isLive&&(agentId=null,cbotClearUserDialog(),clearSurveyTimeout(),setTimeout(()=>{var e="Bağlantınızda bir problem görünüyor. Sizi yeniden bağlamayı deniyoruz. Lütfen bekleyin veya daha sonra tekrar deneyin.";showNotification(cbot_config.dialogTitle,e),appendMessageToDialogBox(e,"cbot-other","",{},function(){})},500),socket_reconnect())}),socket.on("disconnect",function(e){sendCustomPostMessage("CBOT_WEBSOCKET_DISCONNECTED",{}),console.log(" disconnect=> ",e),"io server disconnect"===e&&socket.connect()}))}function socketHandshake(){LIVE_CHAT&&socket&&(socket.connected||isLive||(socket.auth={session_id:cbotSessionId,user_id:userId},socket.io.opts.auth={session_id:cbotSessionId,user_id:userId},socket.connect()))}var speechRecognizedMessage="",isSpeechListening=!1;function viewVoiceButton(){voice_bot_button_option&&(0<$("#cbot-form-message").val().trim().length?($(".cbot-send-button").css("display","block"),$(".cbot-voice-area").css("display","none")):($(".cbot-send-button").css("display","none"),$(".cbot-voice-area").css("display","block")))}function initRecording(){(recognition=new webkitSpeechRecognition||root.mozSpeechRecognition||root.msSpeechRecognition||root.oSpeechRecognition||root.SpeechRecognition).lang="tr-TR",recognition.continuous=!1,recognition.interimResults=!1,recognition.onspeechstart=function(){$(".ripple_effect").css("display","block"),$("#cbot-form-message").css("display","none")},recognition.onspeechend=function(){$("#cbot-form-message").css("display","block"),$(".cbot-voice-area").click()},recognition.onresult=function(e){speechRecognizedMessage="";for(var t=0;t<e.results.length;t++)speechRecognizedMessage+=e.results[t][0].transcript,$("#cbot-form-message").val(speechRecognizedMessage),scrollMessageBox(100),$("#cbot-form-message").css("display","block"),$(".cbot-send-button").addClass("active"),$("#cbot-form-message").focus()},recognition.onend=()=>{recognition.stop(),speechRecognizedMessage="",$("#cbot-form-message").css("display","block"),$(".ripple_effect").css("display","none"),$("#cbot-voice-area").removeClass("active"),isSpeechListening=!1,voice_bot_button_option&&0<$("#cbot-form-message").val().trim().length?($(".cbot-send-button").css("display","block"),$(".cbot-voice-area").css("display","none")):voice_bot_button_option&&($(".cbot-send-button").css("display","none"),$(".cbot-voice-area").css("display","block"))},$(".cbot-voice-area").click(function(){isSpeechListening=isSpeechListening?(recognition.stop(),$("#cbot-form-message").css("display","block"),$(".ripple_effect").css("display","none"),$("#cbot-voice-area").removeClass("active"),!1):(recognition.start(),$("#cbot-form-message").css("display","none"),$(".ripple_effect").css("display","block"),$("#cbot-voice-area").addClass("active"),!0)})}function detectBrowser(){return-1!=(navigator.userAgent.indexOf("Opera")||navigator.userAgent.indexOf("OPR"))?"Opera":-1!=navigator.userAgent.indexOf("Edg")?"Edge":-1!=navigator.userAgent.indexOf("Chrome")?"Chrome":-1!=navigator.userAgent.indexOf("Safari")?"Safari":-1!=navigator.userAgent.indexOf("Firefox")?"Firefox":-1!=navigator.userAgent.indexOf("MSIE")||1==!!document.documentMode?"IE":void 0}const interactive_class={getWeekNumber:(e=new Date)=>{var e=new Date(e),t=new Date(e.getFullYear(),0,1),e=Math.floor((e-t)/864e5);return Math.ceil((e+t.getDay()+1)/7)},getDayOfMonth:(e=new Date)=>{return new Date(e).getDate()},getDayName:(e=new Date)=>{return["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][new Date(e).getDay()]},getDayIndexOfWeek:(e=new Date)=>{return[7,1,2,3,4,5,6][new Date(e).getDay()]},getMonth:(e=new Date)=>{return new Date(e).getMonth()},getMonthName:(e=new Date)=>{return["january","february","march","april","may","june","july","august","september","october","november","december"][new Date(e).getMonth()]},isWeekday:(e=new Date)=>{e=new Date(e).getDay();return 1<=e&&e<=5},getTimeOfDay(e=new Date){e=new Date(e).getHours();return 5<=e&&e<12?"morning":12<=e&&e<17?"afternoon":17<=e&&e<20?"evening":"night"},generateStats:(e=new Date)=>({date:new Date(e).getTime(),monthNumber:interactive_class.getMonth()+1,weekNumber:interactive_class.getWeekNumber(),dayNumber:interactive_class.getDayOfMonth(),dayIndexOfWeek:interactive_class.getDayIndexOfWeek(),month:interactive_class.getMonthName(),day:interactive_class.getDayName(),daylight:interactive_class.getTimeOfDay(),isWeekDay:interactive_class.isWeekday()}),setStats:()=>{localStorage.setItem(getDynamicLSName("interactive_stats"),JSON.stringify(interactive_class.generateStats()))},getStats:()=>JSON.parse(localStorage.getItem(getDynamicLSName("interactive_stats"))),recommend:()=>{var e=interactive_class.getStats(),t=interactive_class.generateStats(),o={first_time_in_this_month:!0,first_time_in_this_week:!0,first_time_in_this_day:!0};return e&&(o.delta={as_minutes:(t.date-e.date)/6e4,as_hours:(t.date-e.date)/36e5,as_days:(t.date-e.date)/864e5,as_week:(t.date-e.date)/6048e5,as_month:(t.date-e.date)/2592e6},o.diff_as_month=t.monthNumber-e.monthNumber,o.diff_as_week=t.weekNumber-e.weekNumber,o.diff_as_day=t.dayNumber-e.dayNumber,o.is_same_month=t.month==e.month,o.is_same_week=t.weekNumber==e.weekNumber,o.is_same_day_of_month=t.dayNumber==e.dayNumber,o.is_same_day_of_week=t.day==e.day,o.is_same_daylight=t.daylight==e.daylight,o.first_time_in_this_month=0<o.diff_as_month,o.first_time_in_this_week=0<o.diff_as_week,o.first_time_in_this_day=0<o.diff_as_day),{current_stats:t,recommends:o}}},interactive_actions_executer={checkOpenWidget:()=>{let t=!1;if(interactive_actions&&interactive_actions.open_widget&&Array.isArray(interactive_actions.open_widget)&&0<interactive_actions.open_widget.length)for(let e=0;e<interactive_actions.open_widget.length;e++){var o=interactive_actions.open_widget[e],a=interactive_recommends.recommends[o.behaviour];if("equal"==o.operator?t=""+a==o.equity:"not_equal"==o.operator&&(t=""+a!=o.equity),t)break}return t},checkDisplayPopup:()=>{let t=!1;var o=[];if(interactive_actions&&interactive_actions.display_popup&&Array.isArray(interactive_actions.display_popup)&&0<interactive_actions.display_popup.length)for(let e=0;e<interactive_actions.display_popup.length;e++){var a,s,i=interactive_actions.display_popup[e];checkChannelName(i.channels,CHANNEL)&&"site_urls"==i.behaviour&&(a=window.location.href.split("?")[0],s=i.equity.map(e=>e.value),"equal"==i.operator?s.includes(a)&&(t=!0,o.push(i.popup)):"not_equal"!=i.operator||s.includes(a)||(t=!0,o.push(i.popup)))}return{res:t,popups:o}},checkTakeAttention:()=>{let t=!1,o,a;if(interactive_actions&&interactive_actions.take_attention&&Array.isArray(interactive_actions.take_attention)&&0<interactive_actions.take_attention.length)for(let e=0;e<interactive_actions.take_attention.length;e++){var s=interactive_actions.take_attention[e];if(checkChannelName(s.channels,CHANNEL)&&"site_urls"==s.behaviour){var i=window.location.href.split("?")[0],n=s.equity.map(e=>e.value);if("equal"==s.operator){if(n.includes(i)){t=!0,o=s.trigger_message,a=s.delay;break}}else if("not_equal"==s.operator&&!n.includes(i)){t=!0,o=s.trigger_message,a=s.delay;break}}}return{status:t,trigger_message:o,delay:a}}};function cbotRefreshChat(){closeLivechat(!1),lastMessageReceiveDate=Date.now(),cbotClearUserDialog(!0),trigger_messages_count=0,sendTriggerMessages(trigger_messages,"_refresh")}function initializeLottieAnimation(e,t){lottie_icon_activation&&(e=document.getElementById(e),lottie.loadAnimation({container:e,renderer:"svg",loop:!0,autoplay:!0,path:t||`/firm-${CLIENT}/lottie/data.json`}))}document.addEventListener("DOMContentLoaded",function(){sendCustomPostMessage("CBOT_DOM_CONTENT_LOADED",{})});var iphoneSpeechDisabledDevices=["iPhone14,7","iPhone14,8","iPhone15,2","iPhone15,3","iPhone15,4","iPhone15,5","iPhone16,1","iPhone16,2","iPhone14,6"];function handlePopup(e,p,m){let b="";function _(t){return new Promise(e=>{isWidgetOpen||($(".cbot-proactive-rule").not(".cbot-"+t.rule_code).css("display","none"),$(".cbot-dialog-button-regular").off("mouseenter mouseleave"),$(".cbot-dialog-button-regular").off("hover"),$(".cbot-"+t.rule_code).off("mouseenter mouseleave"),$(".cbot-"+t.rule_code).off("hover"),$(".cbot-"+t.rule_code).css("opacity","0"),$(".cbot-"+t.rule_code).css("display","flex"),$(".cbot-"+t.rule_code).stop().animate({opacity:1},400),handlePopupTimeouts.push(setTimeout(()=>{$(".cbot-"+t.rule_code).stop().animate({opacity:1},400,function(){$(".cbot-"+t.rule_code).css("display","none"),$(".cbot-dialog-button-regular").off("mouseenter mouseleave"),$(".cbot-dialog-button-regular").off("hover"),e()})},1e3*t.duration)))})}function v(e,t,o){0!==e&&handlePopupTimeouts.push(setTimeout(async()=>{await _(o),v(0<e?e-1:e,t,o)},1e3*t))}function f(a){return new Promise(e=>{var t,o;isWidgetOpen||($(".cbot-proactive-rule").not(".cbot-"+a.rule_code).css("display","none"),t=document.getElementsByClassName("cbot-"+a.rule_code)[0],(o=document.createElement("div")).className="cbot-join-chat-container-close",t.appendChild(o),$(".cbot-"+a.rule_code).css("display","block"),handlePopupTimeouts.push(setTimeout(()=>{$(".cbot-"+a.rule_code).css("display","none"),e()},1e3*a.duration)))})}function h(e,t,o){0!==e&&handlePopupTimeouts.push(setTimeout(async()=>{await f(o),h(0<e?e-1:e,t,o)},1e3*t))}return handlePopupTimeouts.forEach(clearTimeout),handlePopupTimeouts=[],e.popups.forEach(e=>{if("SHORT_TEXT"===e.popup_type)l=(r=e).message,d="background: "+(p.popup_background_color||m.dialogButtonColor||"#000")+"; color: "+(p.popup_text_color||m.title_font_color||"#FFF")+";",u="",r.convert_trigger_message&&(trigger_messages=[l]),p.slide_from_left&&(u+="; left: 40px; padding-left: 50px;"),r.proactive_welcome_message&&"true"!=localStorage.getItem(getDynamicLSName("iswidgetopened"))?b+=`<div class="cbot-dialog-button-help-message cbot-proactive-rule cbot-${r.rule_code}" onclick="openAndSendMessage('${l}', true, new_welcome_message='${r.proactive_welcome_message}')"`+`style="${d+u}; width:346px;padding-right: 45px; font-size: 16px;padding-top: 15px; padding-left: 0px; line-height: 1.5; text-align: center; word-break: break-word; overflow-wrap: break-word;"> <p class="cbot-popup-message">${l}</p></div>`:b+='<div class="cbot-dialog-button-help-message cbot-proactive-rule cbot-'+r.rule_code+'" onclick="openAndSendMessage(\''+l+'\', true)"style="'+d+u+'; width:346px;padding-right: 45px; font-size: 16px;padding-top: 15px; padding-left: 0px; line-height: 1.5; text-align: center; word-break: break-word; overflow-wrap: break-word;"> <p class="cbot-popup-message">'+l+"</p></div>",handlePopupTimeouts.push(setTimeout(async()=>{var e,t;await _(r),r.show_again&&(e=parseInt(r.show_again_time,10),t=parseInt(r.show_again_loop,10),isNaN(e)||(isNaN(t)?v(-1,e,r):0<t&&v(t,e,r)))},1e3*r.opening_delay));else if("RICH_CONTENT"===e.popup_type){var o=e;if(b=(b+="<div class='cbot-join-chat-container cbot-proactive-rule cbot-"+o.rule_code+"'>")+("<span class='cbot-join-chat-text'>"+o.message+"</span>"),o.image_url&&0<o.image_url.length&&(b+="<img src='"+o.image_url+"' class='cbot-join-chat-image'></img>"),o.buttons&&0<o.buttons.length){b=b+'<div class="cbot-msg-custom-button rich_content">'+'<div class="cbot-buttons">';for(let e=0;e<o.buttons.length;e++){var t=o.buttons[e];"POSTBACK"===t.type?(o.proactive_welcome_message&&"true"!=localStorage.getItem(getDynamicLSName("iswidgetopened"))?b+=`<button class="cbot-button cbot-secondary" onclick="openAndSendMessage('${t.payload}', true, new_welcome_message= '${o.proactive_welcome_message}')">`:b+='<button class="cbot-button cbot-secondary" onclick="openAndSendMessage(\''+t.payload+"', true)\">",b=b+t.title+"</button>"):"URL"===t.type&&(b=(b+='<a href="'+t.payload+'" target="_blank" class="cbot-button cbot-secondary">')+t.title+"</a>")}b+="</div></div>"}b+="</div>",handlePopupTimeouts.push(setTimeout(async()=>{var e,t;await f(o),o.show_again&&(e=parseInt(o.show_again_time,10),t=parseInt(o.show_again_loop,10),isNaN(e)||(isNaN(t)?h(-1,e,o):0<t&&h(t,e,o)))},1e3*o.opening_delay))}else if("IMAGE"===e.popup_type){var a=e;b+="<div class='cbot-join-chat-container cbot-proactive-rule cbot-"+a.rule_code+"'>";const g=a.image_url;d=a.image_payload,u=a.image_payload_postback;g&&0<g.length&&("json"===(l=g.split(".").pop().toLowerCase())?(lottie_icon_activation=!0,loadLottieLibrary(),setTimeout(()=>{initializeLottieAnimation("cbot-join-chat-image",g)},500),b+="<div id='cbot-join-chat-image' style='cursor: pointer; margin-bottom:unset'"):b+="mp4"===l?"<video src='"+g+"' class='cbot-join-chat-image' style='cursor: pointer; margin-bottom:unset' autoplay loop muted":"<img src='"+g+"' class='cbot-join-chat-image' style='cursor: pointer; margin-bottom:unset'",u?(a.proactive_welcome_message&&"true"!=localStorage.getItem(getDynamicLSName("iswidgetopened"))?b+=" onclick=\"openAndSendMessage('"+d+"', true, new_welcome_message='"+a.proactive_welcome_message+"')\"":b+=" onclick=\"openAndSendMessage('"+d+"', true)\"",a.convert_trigger_message&&(trigger_messages=[d])):b+=" onclick=\"window.open('"+d+"', '_blank')\"",b+="json"===l?"></div>":"mp4"===l?"></video>":"></img>"),b+="</div>",handlePopupTimeouts.push(setTimeout(async()=>{var e,t;await f(a),a.show_again&&(e=parseInt(a.show_again_time,10),t=parseInt(a.show_again_loop,10),isNaN(e)||(isNaN(t)?h(-1,e,a):0<t&&h(t,e,a)))},1e3*a.opening_delay))}else if("WELCOME_MESSAGE"===e.popup_type)e.welcome_message_type&&(c="NEW_MESSAGE"===e.welcome_message_type?e.welcome_message:e.welcome_intent,n=e.welcome_message_type,c=c,"NEW_MESSAGE"==n?"true"!=localStorage.getItem(getDynamicLSName("iswidgetopened"))&&(trigger_messages=[c]):"INTENT"==n&&(trigger_messages=["intent"],sendCategory=c));else{var s=e;if(b=(b+="<div class='cbot-join-chat-container cbot-proactive-rule cbot-"+s.rule_code+"'>")+("<span class='cbot-join-chat-text'>"+s.message+"</span>"),s.buttons&&0<s.buttons.length){b=b+'<div class="cbot-msg-custom-button">'+'<div class="cbot-buttons">';for(let e=0;e<s.buttons.length;e++){var i=s.buttons[e];"POSTBACK"===i.type?(s.proactive_welcome_message&&"true"!=localStorage.getItem(getDynamicLSName("iswidgetopened"))?b+=`<button class="cbot-button cbot-secondary" onclick="openAndSendMessage('${i.payload}', true, new_welcome_message= '${s.proactive_welcome_message}')">`:b+='<button class="cbot-button cbot-secondary" onclick="openAndSendMessage(\''+i.payload+"', true)\">",b=b+i.title+"</button>"):"URL"===i.type&&(b=(b+='<a href="'+i.payload+'" target="_blank" class="cbot-button cbot-secondary">')+i.title+"</a>")}b+="</div></div>"}b+="</div>",handlePopupTimeouts.push(setTimeout(async()=>{var e,t;await f(s),s.show_again&&(e=parseInt(s.show_again_time,10),t=parseInt(s.show_again_loop,10),isNaN(e)||(isNaN(t)?h(-1,e,s):0<t&&h(t,e,s)))},1e3*s.opening_delay))}var n,c,r,l,d,u}),b}function ChangeWelcomeMessage(e){(welcomeDoc=document.querySelector("#cbot-chat [data-message-id]").querySelector(".cbot-msg")).textContent=e}window.addEventListener("cbotCustomEventListener",function(e){let t=e.detail;$(".cbot-proactive-rule").length&&$(".cbot-proactive-rule").remove(),t.actionType&&((e=interactive_actions.display_popup.find(e=>e.action_type===t.actionType))?(e=handlePopup(e={popups:[e.popup]},clients,cbot_config),$(".cbot-animation-holder").append(e)):console.log("Eşleşen aksiyon bulunamadı."))});